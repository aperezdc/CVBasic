                        00001 	; CVBasic compiler v0.6.1 Aug/15/2024
                        00002 	; Command: ./cvbasic --creativision examples/viboritas.bas viboritas.asm 
                        00003 	; Created: Sat Aug 17 09:35:49 2024
                        00004 
                        00005 COLECO:	EQU 0
                        00006 SG1000:	EQU 0
                        00007 MSX:	EQU 0
                        00008 SGM:	EQU 0
                        00009 SVI:	EQU 0
                        00010 SORD:	EQU 0
                        00011 MEMOTECH:	EQU 0
                        00012 EINSTEIN:	EQU 0
                        00013 CPM:	EQU 0
                        00014 PENCIL:	EQU 0
                        00015 PV2000:	EQU 0
                        00016 
                        00017 CVBASIC_MUSIC_PLAYER:	EQU 0
                        00018 CVBASIC_COMPRESSION:	EQU 0
                        00019 CVBASIC_BANK_SWITCHING:	EQU 0
                        00020 
                        00021 BASE_RAM:	EQU $0050	; Base of RAM
                        00022 STACK:	EQU $017F	; Base stack pointer
                        00023 VDP:	EQU $00	; VDP port (write)
                        00024 VDPR:	EQU $00	; VDP port (read)
                        00025 PSG:	EQU $00	; PSG port (write)
                        00026 
                        00027 	;
                        00028 	; CVBasic prologue (BASIC compiler, 6502 target)
                        00029 	;
                        00030 	; by Oscar Toledo G.
                        00031 	; https://nanochess.org/
                        00032 	;
                        00033 	; Creation date: Aug/05/2024.
                        00034 	; Revision date: Aug/06/2024. Ported music player from Z80 CVBasic.
                        00035 	; Revision date: Aug/07/2024. Ported Pletter decompressor from Z80 CVBasic.
                        00036 	;                             Added VDP delays.
                        00037 	; Revision date: Aug/16/2024. Corrected bug in define_char_unpack.
                        00038 	;
                        00039 
                        00040 	CPU 6502
                        00041 
                        00042 BIOS_NMI_RESET_ADDR:	EQU $F808
                        00043 BIOS_READ_CONTROLLERS:	EQU $FA00
                        00044 BIOS_WRITE_PSG:		EQU $FE77
                        00045 
                        00046 	;
                        00047 	; Platforms supported:
                        00048 	; o Vtech Creativision.
                        00049 	; o Dick Smith's Wizzard.
                        00050 	;
                        00051 
                        00052 	;
                        00053 	; CVBasic variables in zero page.
                        00054 	;
                        00055 
                        00056 	; This is a block of 8 bytes that should stay together.
                        00057 TEMP:		EQU $02
                        00058 TEMP2:		EQU $04
                        00059 RESULT:		EQU $06
                        00060 POINTER:	EQU $08
                        00061 
                        00062 READ_POINTER:	EQU $0A
                        00063 CURSOR:		EQU $0C
                        00064 PLETTER_OFF:	EQU $0E	; Used by Pletter
                        00065 
                        00066 	; Zero page $00-$01 and $10-$1f are used by
                        00067 	; the Creativision BIOS to read the controllers.
                        00068 JOY1_DIR:	EQU $11
                        00069 JOY2_DIR:	EQU $13
                        00070 JOY1_BUTTONS:	EQU $16
                        00071 JOY2_BUTTONS:	EQU $17
                        00072 
                        00073 JOY1_DATA:	EQU $20
                        00074 JOY2_DATA:	EQU $21
                        00075 KEY1_DATA:	EQU $22
                        00076 KEY2_DATA:	EQU $23
                        00077 FRAME:		EQU $24
                        00078 LFSR:		EQU $26
                        00079 MODE:           EQU $28
                        00080 FLICKER:	EQU $29
                        00081 SPRITE_DATA:	EQU $2A
                        00082 NTSC:		EQU $2E
                        00083 PLETTER_BIT:	EQU $2F
                        00084 
                        00085 	IF CVBASIC_MUSIC_PLAYER
                        00086 MUSIC_PLAYING:		EQU $30
                        00087 MUSIC_TIMING:		EQU $31
                        00088 MUSIC_START:		EQU $32
                        00089 MUSIC_POINTER:		EQU $34
                        00090 MUSIC_NOTE_COUNTER:	EQU $36
                        00091 MUSIC_INSTRUMENT_1:	EQU $37
                        00092 MUSIC_NOTE_1:		EQU $38
                        00093 MUSIC_COUNTER_1:	EQU $39
                        00094 MUSIC_INSTRUMENT_2:	EQU $3A
                        00095 MUSIC_NOTE_2:		EQU $3B
                        00096 MUSIC_COUNTER_2:	EQU $3C
                        00097 MUSIC_INSTRUMENT_3:	EQU $3D
                        00098 MUSIC_NOTE_3:		EQU $3E
                        00099 MUSIC_COUNTER_3:	EQU $3F
                        00100 MUSIC_DRUM:		EQU $40
                        00101 MUSIC_COUNTER_4:	EQU $41
                        00102 AUDIO_FREQ1:		EQU $42
                        00103 AUDIO_FREQ2:		EQU $44
                        00104 AUDIO_FREQ3:		EQU $46
                        00105 AUDIO_VOL1:		EQU $48
                        00106 AUDIO_VOL2:		EQU $49
                        00107 AUDIO_VOL3:		EQU $4A
                        00108 AUDIO_VOL4HW:		EQU $4B
                        00109 AUDIO_NOISE:		EQU $4C
                        00110 AUDIO_CONTROL:		EQU $4D
                        00111 MUSIC_MODE:		EQU $4E
                        00112 	ENDIF
                        00113 
                        00114 SPRITES:	EQU $0180
                        00115 
4000                    00116 	ORG $4000
4000                    00117 	
4000                    00118 WRTVDP:
4000  8D0130            00119 	STA $3001
4003  8A                00120 	TXA
4004  0980              00121 	ORA #$80
4006  8D0130            00122 	STA $3001
4009  60                00123 	RTS
400A                    00124 
400A                    00125 SETWRT:
400A  8D0130            00126 	STA $3001	; 4
400D  98                00127 	TYA		; 2
400E  0940              00128 	ORA #$40	; 2
4010  8D0130            00129 	STA $3001	; 4
4013  60                00130 	RTS		; 6
4014                    00131 
4014                    00132 SETRD:
4014  8D0130            00133 	STA $3001	; 4
4017  98                00134 	TYA		; 2
4018  293F              00135 	AND #$3F	; 2
401A  8D0130            00136 	STA $3001	; 4
401D  60                00137 	RTS		; 6
401E                    00138 
401E                    00139 	; VDP delays calculated for 6502 running at 2 mhz.
401E                    00140 WRTVRM:
401E  200A40            00141 	JSR SETWRT	; 6
4021  8A                00142 	TXA		; 2
4022  EA                00143 	NOP		; 2
4023  EA                00144 	NOP		; 2
4024  EA                00145 	NOP		; 2 = RTS + 14 = Minimum cycles
4025  EA                00146 	NOP		; 2
4026  8D0030            00147 	STA $3000	; 4
4029  60                00148 	RTS		; 6
402A                    00149 
402A                    00150 RDVRM:
402A  201440            00151 	JSR SETRD	; 6
402D  EA                00152 	NOP		; 2
402E  EA                00153 	NOP		; 2
402F  EA                00154 	NOP		; 2
4030  EA                00155 	NOP		; 2
4031  EA                00156 	NOP		; 2
4032  EA                00157 	NOP		; 2
4033  EA                00158 	NOP		; 2
4034  EA                00159 	NOP		; 2
4035  EA                00160 	NOP		; 2
4036  EA                00161 	NOP		; 2
4037  EA                00162 	NOP		; 2
4038  AD0020            00163 	LDA $2000	; 4
403B  60                00164 	RTS		; 6
403C                    00165 
403C                    00166 FILVRM:
403C  A508              00167 	LDA POINTER
403E  A409              00168 	LDY POINTER+1
4040  200A40            00169 	JSR SETWRT
4043  A504              00170 	LDA TEMP2
4045  F002              00171 	BEQ .1
4047  E605              00172 	INC TEMP2+1
4049                    00173 .1:
4049  A502              00174 	LDA TEMP	; 3
404B  8D0030            00175 	STA $3000	; 4
404E  EA                00176 	NOP		; 2
404F  EA                00177 	NOP		; 2
4050  C604              00178 	DEC TEMP2	; 5
4052  D0F5              00179 	BNE .1		; 2/3/4
4054  C605              00180 	DEC TEMP2+1	; 5
4056  D0F1              00181 	BNE .1		; 2/3/4
4058  60                00182 	RTS	
4059                    00183 
4059                    00184 LDIRVM:
4059  A508              00185 	LDA POINTER
405B  A409              00186 	LDY POINTER+1
405D  200A40            00187 	JSR SETWRT
4060  A504              00188 	LDA TEMP2
4062  F002              00189 	BEQ .1
4064  E605              00190 	INC TEMP2+1
4066                    00191 .1:
4066  A000              00192 	LDY #0
4068                    00193 .2:
4068  B102              00194 	LDA (TEMP),Y	; 5/6
406A  8D0030            00195 	STA $3000	; 4
406D  E602              00196 	INC TEMP	; 5
406F  D002              00197 	BNE .3		; 2/3/4
4071  E603              00198 	INC TEMP+1	; 5
4073                    00199 .3:
4073  C604              00200 	DEC TEMP2	; 5
4075  D0F1              00201 	BNE .2		; 2/3/4
4077  C605              00202 	DEC TEMP2+1	; 5
4079  D0ED              00203 	BNE .2		; 2/3/4
407B  60                00204 	RTS
407C                    00205 
407C                    00206 LDIRVM3:
407C  208240            00207 	JSR .1
407F  208240            00208 	JSR .1
4082  A502              00209 .1:	LDA TEMP
4084  48                00210 	PHA
4085  A503              00211 	LDA TEMP+1
4087  48                00212 	PHA
4088  A504              00213 	LDA TEMP2
408A  48                00214 	PHA
408B  A505              00215 	LDA TEMP2+1
408D  48                00216 	PHA
408E  205940            00217 	JSR LDIRVM
4091  A509              00218 	LDA POINTER+1
4093  18                00219 	CLC
4094  6908              00220 	ADC #8
4096  8509              00221 	STA POINTER+1
4098  68                00222 	PLA
4099  8505              00223 	STA TEMP2+1
409B  68                00224 	PLA
409C  8504              00225 	STA TEMP2
409E  68                00226 	PLA
409F  8503              00227 	STA TEMP+1
40A1  68                00228 	PLA
40A2  8502              00229 	STA TEMP
40A4  60                00230 	RTS
40A5                    00231 
40A5                    00232 DISSCR:
40A5  78                00233 	SEI
40A6  A9A2              00234 	LDA #$A2
40A8  A201              00235 	LDX #$01
40AA  200040            00236 	JSR WRTVDP
40AD  58                00237 	CLI
40AE  60                00238 	RTS
40AF                    00239 
40AF                    00240 ENASCR:
40AF  78                00241 	SEI
40B0  A9E2              00242 	LDA #$E2
40B2  A201              00243 	LDX #$01
40B4  200040            00244 	JSR WRTVDP
40B7  58                00245 	CLI
40B8  60                00246 	RTS
40B9                    00247 
40B9                    00248 CPYBLK:
40B9  78                00249 	SEI
40BA                    00250 .1:	
40BA  A504              00251 	LDA TEMP2
40BC  48                00252 	PHA
40BD  A505              00253 	LDA TEMP2+1
40BF  48                00254 	PHA
40C0  8A                00255 	TXA
40C1  48                00256 	PHA
40C2  98                00257 	TYA
40C3  48                00258 	PHA
40C4  A502              00259 	LDA TEMP
40C6  48                00260 	PHA
40C7  A503              00261 	LDA TEMP+1
40C9  48                00262 	PHA
40CA  A900              00263 	LDA #0
40CC  8505              00264 	STA TEMP2+1
40CE  205940            00265 	JSR LDIRVM
40D1  68                00266 	PLA
40D2  8503              00267 	STA TEMP+1
40D4  68                00268 	PLA
40D5  8502              00269 	STA TEMP
40D7  68                00270 	PLA
40D8  8505              00271 	STA TEMP2+1
40DA  68                00272 	PLA
40DB  8504              00273 	STA TEMP2
40DD  A502              00274 	LDA TEMP
40DF  18                00275 	CLC
40E0  6504              00276 	ADC TEMP2
40E2  8502              00277 	STA TEMP
40E4  A503              00278 	LDA TEMP+1
40E6  6505              00279 	ADC TEMP2+1
40E8  8503              00280 	STA TEMP+1
40EA  A604              00281 	LDX TEMP2
40EC  A405              00282 	LDY TEMP2+1
40EE  68                00283 	PLA
40EF  8505              00284 	STA TEMP2+1
40F1  68                00285 	PLA
40F2  8504              00286 	STA TEMP2
40F4  A508              00287 	LDA POINTER
40F6  18                00288 	CLC
40F7  6920              00289 	ADC #$20
40F9  8508              00290 	STA POINTER
40FB  A509              00291 	LDA POINTER+1
40FD  6900              00292 	ADC #$00
40FF  8509              00293 	STA POINTER+1
4101  C605              00294 	DEC TEMP2+1
4103  D0B5              00295 	BNE .1
4105  58                00296 	CLI
4106  60                00297 	RTS
4107                    00298 
4107                    00299 CLS:
4107  A900              00300 	LDA #$00
4109  A018              00301 	LDY #$18
410B  850C              00302 	STA CURSOR
410D  840D              00303 	STY CURSOR+1
410F  8508              00304 	STA POINTER
4111  8409              00305 	STY POINTER+1
4113  A900              00306 	LDA #$00
4115  A003              00307 	LDY #$03
4117  8504              00308 	STA TEMP2
4119  8405              00309 	STY TEMP2+1
411B  A920              00310 	LDA #$20
411D  8502              00311 	STA TEMP
411F  78                00312 	SEI
4120  203C40            00313 	JSR FILVRM
4123  58                00314 	CLI
4124  60                00315 	RTS
4125                    00316 
4125                    00317 PRINT_STRING:
4125  8502              00318 	STA TEMP
4127  8403              00319 	STY TEMP+1
4129  8604              00320 	STX TEMP2
412B  8A                00321 	TXA
412C  48                00322 	PHA
412D  A900              00323 	LDA #0
412F  8505              00324 	STA TEMP2+1
4131  A50C              00325 	LDA CURSOR
4133  8508              00326 	STA POINTER
4135  A50D              00327 	LDA CURSOR+1
4137  2907              00328 	AND #$07
4139  0918              00329 	ORA #$18
413B  8509              00330 	STA POINTER+1
413D  78                00331 	SEI
413E  205940            00332 	JSR LDIRVM
4141  58                00333 	CLI
4142  68                00334 	PLA
4143  18                00335 	CLC
4144  650C              00336 	ADC CURSOR
4146  850C              00337 	STA CURSOR
4148  9002              00338 	BCC .1
414A  E60D              00339 	INC CURSOR+1
414C                    00340 .1:
414C  60                00341 	RTS
414D                    00342 
414D                    00343 PRINT_NUMBER:
414D  A200              00344 	LDX #0
414F  8602              00345 	STX TEMP
4151  78                00346 	SEI
4152                    00347 PRINT_NUMBER5:
4152  A210              00348 	LDX #10000
4154  8604              00349 	STX TEMP2
4156  A227              00350 	LDX #10000/256
4158  8605              00351 	STX TEMP2+1
415A  208D41            00352 	JSR PRINT_DIGIT
415D                    00353 PRINT_NUMBER4:
415D  A2E8              00354 	LDX #1000
415F  8604              00355 	STX TEMP2
4161  A203              00356 	LDX #1000/256
4163  8605              00357 	STX TEMP2+1
4165  208D41            00358 	JSR PRINT_DIGIT
4168                    00359 PRINT_NUMBER3:
4168  A264              00360 	LDX #100
416A  8604              00361 	STX TEMP2
416C  A200              00362 	LDX #0
416E  8605              00363 	STX TEMP2+1
4170  208D41            00364 	JSR PRINT_DIGIT
4173                    00365 PRINT_NUMBER2:
4173  A20A              00366 	LDX #10
4175  8604              00367 	STX TEMP2
4177  A200              00368 	LDX #0
4179  8605              00369 	STX TEMP2+1
417B  208D41            00370 	JSR PRINT_DIGIT
417E                    00371 PRINT_NUMBER1:
417E  A201              00372 	LDX #1
4180  8604              00373 	STX TEMP2
4182  8602              00374 	STX TEMP
4184  A200              00375 	LDX #0
4186  8605              00376 	STX TEMP2+1
4188  208D41            00377 	JSR PRINT_DIGIT
418B  58                00378 	CLI
418C  60                00379 	RTS
418D                    00380 
418D                    00381 PRINT_DIGIT:
418D  A22F              00382 	LDX #$2F
418F                    00383 .2:
418F  E8                00384 	INX
4190  38                00385 	SEC
4191  E504              00386 	SBC TEMP2
4193  48                00387 	PHA
4194  98                00388 	TYA
4195  E505              00389 	SBC TEMP2+1
4197  A8                00390 	TAY
4198  68                00391 	PLA
4199  B0F4              00392 	BCS .2
419B  18                00393 	CLC
419C  6504              00394 	ADC TEMP2
419E  48                00395 	PHA
419F  98                00396 	TYA
41A0  6505              00397 	ADC TEMP2+1
41A2  A8                00398 	TAY
41A3  68                00399 	PLA
41A4  E030              00400 	CPX #$30
41A6  D00E              00401 	BNE .3
41A8  A602              00402 	LDX TEMP
41AA  D001              00403 	BNE .4
41AC  60                00404 	RTS
41AD                    00405 
41AD  CA                00406 .4:	DEX
41AE  F004              00407 	BEQ .6
41B0  A603              00408 	LDX TEMP+1
41B2  D008              00409 	BNE .5
41B4                    00410 .6:
41B4  A230              00411 	LDX #$30
41B6  48                00412 .3:	PHA
41B7  A901              00413 	LDA #1
41B9  8502              00414 	STA TEMP
41BB  68                00415 	PLA
41BC  48                00416 .5:	PHA
41BD  98                00417 	TYA
41BE  48                00418 	PHA
41BF  A50D              00419 	LDA CURSOR+1
41C1  2907              00420 	AND #$07
41C3  0918              00421 	ORA #$18
41C5  A8                00422 	TAY
41C6  A50C              00423 	LDA CURSOR
41C8  201E40            00424 	JSR WRTVRM
41CB  E60C              00425 	INC CURSOR
41CD  D002              00426 	BNE .1
41CF  E60D              00427 	INC CURSOR+1
41D1                    00428 .1:
41D1  68                00429 	PLA
41D2  A8                00430 	TAY
41D3  68                00431 	PLA
41D4  60                00432 	RTS
41D5                    00433 
41D5                    00434 DEFINE_SPRITE:
41D5  8504              00435 	STA TEMP2
41D7  A900              00436 	LDA #0
41D9  8505              00437 	STA TEMP2+1
41DB  A907              00438 	LDA #7
41DD  8509              00439 	STA POINTER+1
41DF  A508              00440 	LDA POINTER
41E1  0A                00441 	ASL A
41E2  0A                00442 	ASL A
41E3  0A                00443 	ASL A
41E4  2609              00444 	ROL POINTER+1
41E6  0A                00445 	ASL A
41E7  2609              00446 	ROL POINTER+1
41E9  0A                00447 	ASL A
41EA  2609              00448 	ROL POINTER+1
41EC  8508              00449 	STA POINTER
41EE  A504              00450 	LDA TEMP2
41F0  0A                00451 	ASL A
41F1  2605              00452 	ROL TEMP2+1
41F3  0A                00453 	ASL A
41F4  2605              00454 	ROL TEMP2+1
41F6  0A                00455 	ASL A
41F7  2605              00456 	ROL TEMP2+1
41F9  0A                00457 	ASL A
41FA  2605              00458 	ROL TEMP2+1
41FC  0A                00459 	ASL A
41FD  2605              00460 	ROL TEMP2+1
41FF  8504              00461 	STA TEMP2
4201  78                00462 	SEI
4202  205940            00463 	JSR LDIRVM
4205  58                00464 	CLI
4206  60                00465 	RTS
4207                    00466 
4207                    00467 DEFINE_CHAR:
4207  8504              00468 	STA TEMP2
4209  A900              00469 	LDA #0
420B  8509              00470 	STA POINTER+1
420D  8505              00471 	STA TEMP2+1
420F  A508              00472 	LDA POINTER
4211  0A                00473 	ASL A
4212  2609              00474 	ROL POINTER+1
4214  0A                00475 	ASL A
4215  2609              00476 	ROL POINTER+1
4217  0A                00477 	ASL A
4218  2609              00478 	ROL POINTER+1
421A  8508              00479 	STA POINTER
421C  A504              00480 	LDA TEMP2
421E  0A                00481 	ASL A
421F  2605              00482 	ROL TEMP2+1
4221  0A                00483 	ASL A
4222  2605              00484 	ROL TEMP2+1
4224  0A                00485 	ASL A
4225  2605              00486 	ROL TEMP2+1
4227  8504              00487 	STA TEMP2
4229  78                00488 	SEI
422A  A528              00489 	LDA MODE
422C  2904              00490 	AND #$04
422E  D005              00491 	BNE .1
4230  207C40            00492 	JSR LDIRVM3
4233  58                00493 	CLI
4234  60                00494 	RTS
4235                    00495 
4235  205940            00496 .1:	JSR LDIRVM
4238  58                00497 	CLI
4239  60                00498 	RTS
423A                    00499 
423A                    00500 DEFINE_COLOR:
423A  8504              00501 	STA TEMP2
423C  A900              00502 	LDA #0
423E  8505              00503 	STA TEMP2+1
4240  A904              00504 	LDA #$04
4242  8509              00505 	STA POINTER+1
4244  A508              00506 	LDA POINTER
4246  0A                00507 	ASL A
4247  2609              00508 	ROL POINTER+1
4249  0A                00509 	ASL A
424A  2609              00510 	ROL POINTER+1
424C  0A                00511 	ASL A
424D  2609              00512 	ROL POINTER+1
424F  8508              00513 	STA POINTER
4251  A504              00514 	LDA TEMP2
4253  0A                00515 	ASL A
4254  2605              00516 	ROL TEMP2+1
4256  0A                00517 	ASL A
4257  2605              00518 	ROL TEMP2+1
4259  0A                00519 	ASL A
425A  2605              00520 	ROL TEMP2+1
425C  8504              00521 	STA TEMP2
425E  78                00522 	SEI
425F  207C40            00523 	JSR LDIRVM3
4262  58                00524 	CLI
4263  60                00525 	RTS
4264                    00526 
4264                    00527 UPDATE_SPRITE:
4264  0A                00528 	ASL A
4265  0A                00529 	ASL A
4266  0980              00530 	ORA #$80
4268  8508              00531 	STA POINTER
426A  A901              00532 	LDA #$01
426C  8509              00533 	STA POINTER+1
426E  A000              00534 	LDY #0
4270  A52A              00535 	LDA SPRITE_DATA+0
4272  9108              00536 	STA (POINTER),Y
4274  C8                00537 	INY
4275  A52B              00538 	LDA SPRITE_DATA+1
4277  9108              00539 	STA (POINTER),Y
4279  C8                00540 	INY
427A  A52C              00541 	LDA SPRITE_DATA+2
427C  9108              00542 	STA (POINTER),Y
427E  C8                00543 	INY
427F  A52D              00544 	LDA SPRITE_DATA+3
4281  9108              00545 	STA (POINTER),Y
4283  60                00546 	RTS
4284                    00547 
4284                    00548 _ABS16:
4284  48                00549 	PHA
4285  98                00550 	TYA
4286  100D              00551 	BPL _NEG16.1
4288  68                00552 	PLA
4289                    00553 _NEG16:
4289  49FF              00554 	EOR #$FF
428B  18                00555 	CLC
428C  6901              00556 	ADC #1
428E  48                00557 	PHA
428F  98                00558 	TYA
4290  49FF              00559 	EOR #$FF
4292  6900              00560 	ADC #0
4294  A8                00561 	TAY
4295                    00562 .1:
4295  68                00563 	PLA
4296  60                00564 	RTS
4297                    00565 
4297                    00566 _SGN16:
4297  8402              00567 	STY TEMP
4299  0502              00568 	ORA TEMP
429B  F00B              00569 	BEQ .1
429D  98                00570 	TYA
429E  3006              00571 	BMI .2
42A0  A900              00572 	LDA #0
42A2  A8                00573 	TAY
42A3  A901              00574 	LDA #1
42A5  60                00575 	RTS
42A6                    00576 
42A6  A9FF              00577 .2:	LDA #$FF
42A8  A8                00578 .1:	TAY
42A9  60                00579 	RTS
42AA                    00580 
42AA                    00581 _READ16:
42AA  20B442            00582 	JSR _READ8
42AD  48                00583 	PHA
42AE  20B442            00584 	JSR _READ8
42B1  A8                00585 	TAY
42B2  68                00586 	PLA
42B3  60                00587 	RTS
42B4                    00588 
42B4                    00589 _READ8:
42B4  A000              00590 	LDY #0
42B6  B10A              00591 	LDA (READ_POINTER),Y
42B8  E60A              00592 	INC READ_POINTER
42BA  D002              00593 	BNE .1
42BC  E60B              00594 	INC READ_POINTER+1
42BE                    00595 .1:
42BE  60                00596 	RTS
42BF                    00597 
42BF                    00598 _PEEK8:
42BF  8508              00599 	STA POINTER
42C1  8409              00600 	STY POINTER+1
42C3  A000              00601 	LDY #0
42C5  B108              00602 	LDA (POINTER),Y
42C7  60                00603 	RTS
42C8                    00604 
42C8                    00605 _PEEK16:
42C8  8508              00606 	STA POINTER
42CA  8409              00607 	STY POINTER+1
42CC  A000              00608 	LDY #0
42CE  B108              00609 	LDA (POINTER),Y
42D0  48                00610 	PHA
42D1  C8                00611 	INY
42D2  B108              00612 	LDA (POINTER),Y
42D4  A8                00613 	TAY
42D5  68                00614 	PLA
42D6  60                00615 	RTS
42D7                    00616 
42D7                    00617 	; temp2 constains left side (dividend)
42D7                    00618 	; temp contains right side (divisor)
42D7                    00619 
42D7                    00620 	; 16-bit multiplication.
42D7                    00621 _MUL16:
42D7  68                00622 	PLA
42D8  8506              00623 	STA RESULT
42DA  68                00624 	PLA
42DB  8507              00625 	STA RESULT+1
42DD  68                00626 	PLA
42DE  8505              00627 	STA TEMP2+1
42E0  68                00628 	PLA
42E1  8504              00629 	STA TEMP2
42E3  A507              00630 	LDA RESULT+1
42E5  48                00631 	PHA
42E6  A506              00632 	LDA RESULT
42E8  48                00633 	PHA
42E9  A900              00634 	LDA #0
42EB  8506              00635 	STA RESULT
42ED  8507              00636 	STA RESULT+1
42EF  A20F              00637 	LDX #15
42F1                    00638 .1:
42F1  4605              00639 	LSR TEMP2+1
42F3  6604              00640 	ROR TEMP2
42F5  900D              00641 	BCC .2
42F7  A506              00642 	LDA RESULT
42F9  18                00643 	CLC
42FA  6502              00644 	ADC TEMP
42FC  8506              00645 	STA RESULT
42FE  A507              00646 	LDA RESULT+1
4300  6503              00647 	ADC TEMP+1
4302  8507              00648 	STA RESULT+1
4304  0602              00649 .2:	ASL TEMP
4306  2603              00650 	ROL TEMP+1
4308  CA                00651 	DEX
4309  10E6              00652 	BPL .1
430B  A506              00653 	LDA RESULT
430D  A407              00654 	LDY RESULT+1
430F  60                00655 	RTS
4310                    00656 
4310                    00657 	; 16-bit signed modulo.
4310                    00658 _MOD16S:
4310  68                00659 	PLA
4311  8506              00660 	STA RESULT
4313  68                00661 	PLA
4314  8507              00662 	STA RESULT+1
4316  68                00663 	PLA
4317  8505              00664 	STA TEMP2+1
4319  68                00665 	PLA
431A  8504              00666 	STA TEMP2
431C  A507              00667 	LDA RESULT+1
431E  48                00668 	PHA
431F  A506              00669 	LDA RESULT
4321  48                00670 	PHA
4322  A405              00671 	LDY TEMP2+1
4324  08                00672 	PHP
4325  1009              00673 	BPL .1
4327  A504              00674 	LDA TEMP2
4329  208942            00675 	JSR _NEG16
432C  8504              00676 	STA TEMP2
432E  8405              00677 	STY TEMP2+1
4330                    00678 .1:
4330  A403              00679 	LDY TEMP+1
4332  1009              00680 	BPL .2
4334  A502              00681 	LDA TEMP
4336  208942            00682 	JSR _NEG16
4339  8502              00683 	STA TEMP
433B  8403              00684 	STY TEMP+1
433D                    00685 .2:
433D  20DE43            00686 	JSR _MOD16.1
4340  28                00687 	PLP
4341  1003              00688 	BPL .3
4343  208942            00689 	JSR _NEG16
4346                    00690 .3:
4346  60                00691 	RTS
4347                    00692 
4347                    00693 	; 16-bit signed division.
4347                    00694 _DIV16S:
4347  68                00695 	PLA
4348  8506              00696 	STA RESULT
434A  68                00697 	PLA
434B  8507              00698 	STA RESULT+1
434D  68                00699 	PLA
434E  8505              00700 	STA TEMP2+1
4350  68                00701 	PLA
4351  8504              00702 	STA TEMP2
4353  A507              00703 	LDA RESULT+1
4355  48                00704 	PHA
4356  A506              00705 	LDA RESULT
4358  48                00706 	PHA
4359  A503              00707 	LDA TEMP+1
435B  4505              00708 	EOR TEMP2+1
435D  08                00709 	PHP
435E  A405              00710 	LDY TEMP2+1
4360  1009              00711 	BPL .1
4362  A504              00712 	LDA TEMP2
4364  208942            00713 	JSR _NEG16
4367  8504              00714 	STA TEMP2
4369  8405              00715 	STY TEMP2+1
436B                    00716 .1:
436B  A403              00717 	LDY TEMP+1
436D  1009              00718 	BPL .2
436F  A502              00719 	LDA TEMP
4371  208942            00720 	JSR _NEG16
4374  8502              00721 	STA TEMP
4376  8403              00722 	STY TEMP+1
4378                    00723 .2:
4378  209443            00724 	JSR _DIV16.1
437B  28                00725 	PLP
437C  1003              00726 	BPL .3
437E  208942            00727 	JSR _NEG16
4381                    00728 .3:
4381  60                00729 	RTS
4382                    00730 
4382                    00731 _DIV16:
4382  68                00732 	PLA
4383  8506              00733 	STA RESULT
4385  68                00734 	PLA
4386  8507              00735 	STA RESULT+1
4388  68                00736 	PLA
4389  8505              00737 	STA TEMP2+1
438B  68                00738 	PLA
438C  8504              00739 	STA TEMP2
438E  A507              00740 	LDA RESULT+1
4390  48                00741 	PHA
4391  A506              00742 	LDA RESULT
4393  48                00743 	PHA
4394                    00744 .1:
4394  A900              00745 	LDA #0
4396  8506              00746 	STA RESULT
4398  8507              00747 	STA RESULT+1
439A  A20F              00748 	LDX #15
439C                    00749 .2:
439C  2604              00750 	ROL TEMP2
439E  2605              00751 	ROL TEMP2+1
43A0  2606              00752 	ROL RESULT
43A2  2607              00753 	ROL RESULT+1
43A4  A506              00754 	LDA RESULT
43A6  38                00755 	SEC
43A7  E502              00756 	SBC TEMP
43A9  8506              00757 	STA RESULT
43AB  A507              00758 	LDA RESULT+1
43AD  E503              00759 	SBC TEMP+1
43AF  8507              00760 	STA RESULT+1
43B1  B00D              00761 	BCS .3
43B3  A506              00762 	LDA RESULT
43B5  6502              00763 	ADC TEMP
43B7  8506              00764 	STA RESULT
43B9  A507              00765 	LDA RESULT+1
43BB  6503              00766 	ADC TEMP+1
43BD  8507              00767 	STA RESULT+1
43BF  18                00768 	CLC
43C0                    00769 .3:
43C0  CA                00770 	DEX
43C1  10D9              00771 	BPL .2
43C3  2604              00772 	ROL TEMP2
43C5  2605              00773 	ROL TEMP2+1
43C7  A504              00774 	LDA TEMP2
43C9  A405              00775 	LDY TEMP2+1
43CB  60                00776 	RTS
43CC                    00777 
43CC                    00778 _MOD16:
43CC  68                00779 	PLA
43CD  8506              00780 	STA RESULT
43CF  68                00781 	PLA
43D0  8507              00782 	STA RESULT+1
43D2  68                00783 	PLA
43D3  8505              00784 	STA TEMP2+1
43D5  68                00785 	PLA
43D6  8504              00786 	STA TEMP2
43D8  A507              00787 	LDA RESULT+1
43DA  48                00788 	PHA
43DB  A506              00789 	LDA RESULT
43DD  48                00790 	PHA
43DE                    00791 .1:
43DE  A900              00792 	LDA #0
43E0  8506              00793 	STA RESULT
43E2  8507              00794 	STA RESULT+1
43E4  A20F              00795 	LDX #15
43E6                    00796 .2:
43E6  2604              00797 	ROL TEMP2
43E8  2605              00798 	ROL TEMP2+1
43EA  2606              00799 	ROL RESULT
43EC  2607              00800 	ROL RESULT+1
43EE  A506              00801 	LDA RESULT
43F0  38                00802 	SEC
43F1  E502              00803 	SBC TEMP
43F3  8506              00804 	STA RESULT
43F5  A507              00805 	LDA RESULT+1
43F7  E503              00806 	SBC TEMP+1
43F9  8507              00807 	STA RESULT+1
43FB  B00D              00808 	BCS .3
43FD  A506              00809 	LDA RESULT
43FF  6502              00810 	ADC TEMP
4401  8506              00811 	STA RESULT
4403  A507              00812 	LDA RESULT+1
4405  6503              00813 	ADC TEMP+1
4407  8507              00814 	STA RESULT+1
4409  18                00815 	CLC
440A                    00816 .3:
440A  CA                00817 	DEX
440B  10D9              00818 	BPL .2
440D  A506              00819 	LDA RESULT
440F  A407              00820 	LDY RESULT+1
4411  60                00821 	RTS
4412                    00822 
4412                    00823 	; Random number generator.
4412                    00824 	; From my game Mecha Eight.
4412                    00825 RANDOM:
4412  A526              00826 	LDA LFSR
4414  0527              00827 	ORA LFSR+1
4416  D008              00828 	BNE .0
4418  A911              00829 	LDA #$11
441A  8526              00830 	STA LFSR
441C  A978              00831 	LDA #$78
441E  8527              00832 	STA LFSR+1
4420  A527              00833 .0:	LDA LFSR+1
4422  6A                00834 	ROR A	
4423  6A                00835 	ROR A		
4424  6A                00836 	ROR A		
4425  4527              00837 	EOR LFSR+1	
4427  8502              00838 	STA TEMP
4429  A527              00839 	LDA LFSR+1
442B  6A                00840 	ROR A
442C  6A                00841 	ROR A
442D  4502              00842 	EOR TEMP
442F  8502              00843 	STA TEMP
4431  A526              00844 	LDA LFSR
4433  0A                00845 	ASL A
4434  0A                00846 	ASL A
4435  4502              00847 	EOR TEMP
4437  2A                00848 	ROL A
4438  6627              00849 	ROR LFSR+1
443A  6626              00850 	ROR LFSR
443C  A526              00851 	LDA LFSR
443E  A427              00852 	LDY LFSR+1
4440  60                00853 	RTS
4441                    00854 
4441                    00855 SN76489_FREQ:
4441  8502              00856 	STA TEMP
4443  8403              00857 	STY TEMP+1
4445  8604              00858 	STX TEMP2
4447  290F              00859 	AND #$0F
4449  0504              00860 	ORA TEMP2
444B  2077FE            00861 	JSR BIOS_WRITE_PSG
444E  A503              00862 	LDA TEMP+1
4450  0602              00863 	ASL TEMP
4452  2A                00864 	ROL A
4453  0602              00865 	ASL TEMP
4455  2A                00866 	ROL A
4456  0602              00867 	ASL TEMP
4458  2A                00868 	ROL A
4459  0602              00869 	ASL TEMP
445B  2A                00870 	ROL A
445C  293F              00871 	AND #$3F	
445E  4C77FE            00872 	JMP BIOS_WRITE_PSG
4461                    00873 	
4461                    00874 SN76489_VOL:
4461  8604              00875 	STX TEMP2
4463  49FF              00876 	EOR #$FF
4465  290F              00877 	AND #$0F
4467  0504              00878 	ORA TEMP2
4469  4C77FE            00879 	JMP BIOS_WRITE_PSG
446C                    00880 
446C                    00881 SN76489_CONTROL:
446C  290F              00882 	AND #$0F
446E  09E0              00883 	ORA #$E0
4470  4C77FE            00884 	JMP BIOS_WRITE_PSG
4473                    00885 
4473                    00886 VDP_GENERIC_MODE:
4473  78                00887 	SEI
4474  200040            00888 	JSR WRTVDP
4477  A9A2              00889 	LDA #$A2
4479  A201              00890 	LDX #$01
447B  200040            00891 	JSR WRTVDP
447E  A906              00892 	LDA #$06	; $1800 for pattern table.
4480  A202              00893 	LDX #$02
4482  200040            00894 	JSR WRTVDP
4485  A502              00895 	LDA TEMP
4487  A203              00896 	LDX #$03	; for color table.
4489  200040            00897 	JSR WRTVDP
448C  A503              00898 	LDA TEMP+1
448E  A204              00899 	LDX #$04	; for bitmap table.
4490  200040            00900 	JSR WRTVDP
4493  A936              00901 	LDA #$36	; $1b00 for sprite attribute table.
4495  A205              00902 	LDX #$05
4497  200040            00903 	JSR WRTVDP
449A  A907              00904 	LDA #$07	; $3800 for sprites bitmaps.
449C  A206              00905 	LDX #$06
449E  200040            00906 	JSR WRTVDP
44A1  A901              00907 	LDA #$01
44A3  A207              00908 	LDX #$07
44A5  4C0040            00909 	JMP WRTVDP
44A8                    00910 
44A8                    00911 MODE_0:
44A8  A528              00912 	LDA MODE
44AA  29FB              00913 	AND #$FB
44AC  8528              00914 	STA MODE
44AE  A9FF              00915 	LDA #$FF	; $2000 for color table.
44B0  8502              00916 	STA TEMP
44B2  A903              00917 	LDA #$03	; $0000 for bitmaps
44B4  8503              00918 	STA TEMP+1
44B6  A902              00919 	LDA #$02
44B8  A200              00920 	LDX #$00
44BA  207344            00921 	JSR VDP_GENERIC_MODE
44BD  A9F2              00922 	LDA #FONT_BITMAPS
44BF  A046              00923 	LDY #FONT_BITMAPS>>8
44C1  8502              00924 	STA TEMP
44C3  8403              00925 	STY TEMP+1
44C5  A900              00926 	LDA #$00
44C7  8508              00927 	STA POINTER
44C9  8504              00928 	STA TEMP2
44CB  A901              00929 	LDA #$01
44CD  8509              00930 	STA POINTER+1
44CF  A903              00931 	LDA #$03
44D1  8505              00932 	STA TEMP2+1
44D3  207C40            00933 	JSR LDIRVM3
44D6  58                00934 	CLI
44D7  78                00935 	SEI
44D8  A9F0              00936 	LDA #$F0
44DA  8502              00937 	STA TEMP
44DC  A900              00938 	LDA #$00
44DE  8508              00939 	STA POINTER
44E0  8504              00940 	STA TEMP2
44E2  A020              00941 	LDY #$2000>>8
44E4  8409              00942 	STY POINTER+1
44E6  A018              00943 	LDY #$1800>>8
44E8  8405              00944 	STY TEMP2+1
44EA  203C40            00945 	JSR FILVRM
44ED  58                00946 	CLI
44EE  200741            00947 	JSR CLS
44F1                    00948 VDP_GENERIC_SPRITES:
44F1  A9D1              00949 	LDA #$D1
44F3  8502              00950 	STA TEMP
44F5  A900              00951 	LDA #$00
44F7  8508              00952 	STA POINTER
44F9  8505              00953 	STA TEMP2+1
44FB  A01B              00954 	LDY #$1B00>>8
44FD  8409              00955 	STY POINTER+1
44FF  A980              00956 	LDA #$80
4501  8504              00957 	STA TEMP2
4503  78                00958 	SEI
4504  203C40            00959 	JSR FILVRM
4507  A27F              00960 	LDX #$7F
4509  A9D1              00961 	LDA #$D1
450B                    00962 .1:
450B  9D8001            00963 	STA SPRITES,X
450E  CA                00964 	DEX
450F  10FA              00965 	BPL .1
4511  A9E2              00966 	LDA #$E2
4513  A201              00967 	LDX #$01
4515  200040            00968 	JSR WRTVDP
4518  58                00969 	CLI
4519  60                00970 	RTS
451A                    00971 
451A                    00972 MODE_1:
451A  A528              00973 	LDA MODE
451C  29FB              00974 	AND #$FB
451E  8528              00975 	STA MODE
4520  A9FF              00976 	LDA #$FF	; $2000 for color table.
4522  8502              00977 	STA TEMP
4524  A903              00978 	LDA #$03	; $0000 for bitmaps
4526  8503              00979 	STA TEMP+1
4528  A902              00980 	LDA #$02
452A  A200              00981 	LDX #$00
452C  207344            00982 	JSR VDP_GENERIC_MODE
452F  A900              00983 	LDA #$00
4531  8502              00984 	STA TEMP
4533  8508              00985 	STA POINTER
4535  8509              00986 	STA POINTER+1
4537  8504              00987 	STA TEMP2
4539  A918              00988 	LDA #$18
453B  8505              00989 	STA TEMP2+1
453D  203C40            00990 	JSR FILVRM
4540  58                00991 	CLI
4541  A9F0              00992 	LDA #$F0
4543  8502              00993 	STA TEMP
4545  A900              00994 	LDA #$00
4547  8508              00995 	STA POINTER
4549  8504              00996 	STA TEMP2
454B  A020              00997 	LDY #$2000>>8
454D  8409              00998 	STY POINTER+1
454F  A018              00999 	LDY #$1800>>8
4551  8405              01000 	STY TEMP2+1
4553  78                01001 	SEI
4554  203C40            01002 	JSR FILVRM
4557  58                01003 	CLI
4558  A900              01004 	LDA #$1800
455A  A018              01005 	LDY #$1800>>8
455C  8508              01006 	STA POINTER
455E  8409              01007 	STY POINTER+1
4560  78                01008 .1:	SEI
4561  A508              01009 	LDA POINTER
4563  A409              01010 	LDY POINTER+1
4565  200A40            01011 	JSR SETWRT
4568  A220              01012 	LDX #32
456A  A408              01013 	LDY POINTER
456C                    01014 .2:
456C  98                01015 	TYA		; 2
456D  8D0030            01016 	STA $3000	; 4
4570  EA                01017 	NOP		; 2
4571  EA                01018 	NOP		; 2
4572  EA                01019 	NOP		; 2
4573  C8                01020 	INY		; 2
4574  CA                01021 	DEX		; 2
4575  D0F5              01022 	BNE .2		; 2/3/4
4577  58                01023 	CLI
4578  A508              01024 	LDA POINTER
457A  18                01025 	CLC
457B  6920              01026 	ADC #32
457D  8508              01027 	STA POINTER
457F  90DF              01028 	BCC .1
4581  E609              01029 	INC POINTER+1
4583  A509              01030 	LDA POINTER+1
4585  C91B              01031 	CMP #$1B
4587  D0D7              01032 	BNE .1
4589  4CF144            01033 	JMP VDP_GENERIC_SPRITES
458C                    01034 
458C                    01035 MODE_2:
458C  A528              01036 	LDA MODE
458E  0904              01037 	ORA #$04
4590  8528              01038 	STA MODE
4592  A980              01039 	LDA #$80	; $2000 for color table.
4594  8502              01040 	STA TEMP
4596  A900              01041 	LDA #$00	; $0000 for bitmaps
4598  8503              01042 	STA TEMP+1
459A  A900              01043 	LDA #$00
459C  A200              01044 	LDX #$00
459E  207344            01045 	JSR VDP_GENERIC_MODE
45A1  A9F2              01046 	LDA #FONT_BITMAPS
45A3  A046              01047 	LDY #FONT_BITMAPS>>8
45A5  8502              01048 	STA TEMP
45A7  8403              01049 	STY TEMP+1
45A9  A900              01050 	LDA #$00
45AB  8508              01051 	STA POINTER
45AD  8504              01052 	STA TEMP2
45AF  A001              01053 	LDY #$0100>>8
45B1  8409              01054 	STY POINTER+1
45B3  A003              01055 	LDY #$0300>>8
45B5  8405              01056 	STY TEMP2+1
45B7  205940            01057 	JSR LDIRVM
45BA  58                01058 	CLI
45BB  78                01059 	SEI
45BC  A9F0              01060 	LDA #$F0
45BE  8502              01061 	STA TEMP
45C0  A900              01062 	LDA #$00
45C2  8508              01063 	STA POINTER
45C4  8505              01064 	STA TEMP2+1
45C6  A020              01065 	LDY #$2000>>8
45C8  8409              01066 	STY POINTER+1
45CA  A920              01067 	LDA #$20
45CC  8504              01068 	STA TEMP2
45CE  203C40            01069 	JSR FILVRM
45D1  58                01070 	CLI
45D2  200741            01071 	JSR CLS
45D5  4CF144            01072 	JMP VDP_GENERIC_SPRITES
45D8                    01073 
45D8                    01074 INT_HANDLER:
45D8  48                01075 	PHA
45D9  8A                01076 	TXA
45DA  48                01077 	PHA
45DB  98                01078 	TYA
45DC  48                01079 	PHA
45DD  AD0120            01080 	LDA $2001	; VDP interruption clear.
45E0  A900              01081 	LDA #$1B00
45E2  A01B              01082 	LDY #$1B00>>8
45E4  200A40            01083 	JSR SETWRT
45E7  A528              01084 	LDA MODE
45E9  2904              01085 	AND #$04
45EB  F012              01086 	BEQ .4
45ED  A200              01087 	LDX #0
45EF  BD8001            01088 .7:	LDA SPRITES,X	; 4
45F2  8D0030            01089 	STA $3000	; 4
45F5  EA                01090 	NOP		; 2
45F6  EA                01091 	NOP		; 2
45F7  E8                01092 	INX		; 2
45F8  E080              01093 	CPX #$80	; 2
45FA  D0F3              01094 	BNE .7		; 2/3/4
45FC  4C3F46            01095 	JMP .5
45FF                    01096 
45FF  A529              01097 .4:	LDA FLICKER
4601  18                01098 	CLC
4602  6904              01099 	ADC #4
4604  297F              01100 	AND #$7F
4606  8529              01101 	STA FLICKER
4608  AA                01102 	TAX
4609  A01F              01103 	LDY #31
460B                    01104 .6:
460B  BD8001            01105 	LDA SPRITES,X
460E  8D0030            01106 	STA $3000	
4611  EA                01107 	NOP
4612  EA                01108 	NOP
4613  EA                01109 	NOP
4614  EA                01110 	NOP
4615  EA                01111 	NOP
4616  E8                01112 	INX
4617  BD8001            01113 	LDA SPRITES,X
461A  8D0030            01114 	STA $3000
461D  EA                01115 	NOP
461E  EA                01116 	NOP
461F  EA                01117 	NOP
4620  EA                01118 	NOP
4621  EA                01119 	NOP
4622  E8                01120 	INX
4623  BD8001            01121 	LDA SPRITES,X
4626  8D0030            01122 	STA $3000
4629  EA                01123 	NOP
462A  EA                01124 	NOP
462B  EA                01125 	NOP
462C  EA                01126 	NOP
462D  EA                01127 	NOP
462E  E8                01128 	INX
462F  BD8001            01129 	LDA SPRITES,X
4632  8D0030            01130 	STA $3000
4635  8A                01131 	TXA
4636  18                01132 	CLC
4637  6919              01133 	ADC #25
4639  297F              01134 	AND #$7F
463B  AA                01135 	TAX
463C  88                01136 	DEY
463D  10CC              01137 	BPL .6
463F                    01138 .5:
463F  2000FA            01139 	JSR BIOS_READ_CONTROLLERS
4642                    01140 
4642  A611              01141 	LDX JOY1_DIR
4644  A516              01142 	LDA JOY1_BUTTONS
4646  209846            01143 	JSR CONVERT_JOYSTICK
4649  8520              01144 	STA JOY1_DATA
464B                    01145 
464B  A613              01146 	LDX JOY2_DIR
464D  A517              01147 	LDA JOY2_BUTTONS
464F  4A                01148 	LSR A
4650  4A                01149 	LSR A
4651  209846            01150 	JSR CONVERT_JOYSTICK
4654  8521              01151 	STA JOY2_DATA
4656                    01152 
4656                    01153     IF CVBASIC_MUSIC_PLAYER
4656                    01154 	LDA MUSIC_MODE
4656                    01155 	BEQ .10
4656                    01156 	JSR MUSIC_HARDWARE
4656                    01157 .10:
4656                    01158     ENDIF
4656  E624              01159 	INC FRAME
4658  D002              01160 	BNE .8
465A  E625              01161 	INC FRAME+1
465C                    01162 .8:
465C  E626              01163 	INC LFSR	; Make LFSR more random
465E  E626              01164 	INC LFSR
4660  E626              01165 	INC LFSR
4662                    01166     IF CVBASIC_MUSIC_PLAYER
4662                    01167 	LDA MUSIC_MODE
4662                    01168 	BEQ .9
4662                    01169 	JSR MUSIC_GENERATE
4662                    01170 .9:
4662                    01171     ENDIF
4662                    01172 	; This is like saving extra registers, because these
4662                    01173 	; are used by the compiled code, and we don't want
4662                    01174 	; any reentrancy.
4662  A502              01175 	LDA TEMP+0
4664  48                01176 	PHA
4665  A503              01177 	LDA TEMP+1
4667  48                01178 	PHA
4668  A504              01179 	LDA TEMP+2
466A  48                01180 	PHA
466B  A505              01181 	LDA TEMP+3
466D  48                01182 	PHA
466E  A506              01183 	LDA TEMP+4
4670  48                01184 	PHA
4671  A507              01185 	LDA TEMP+5
4673  48                01186 	PHA
4674  A508              01187 	LDA TEMP+6
4676  48                01188 	PHA
4677  A509              01189 	LDA TEMP+7
4679  48                01190 	PHA
467A  68                01191 	PLA
467B  8509              01192 	STA TEMP+7
467D  68                01193 	PLA
467E  8508              01194 	STA TEMP+6
4680  68                01195 	PLA
4681  8507              01196 	STA TEMP+5
4683  68                01197 	PLA
4684  8506              01198 	STA TEMP+4
4686  68                01199 	PLA
4687  8505              01200 	STA TEMP+3
4689  68                01201 	PLA
468A  8504              01202 	STA TEMP+2
468C  68                01203 	PLA
468D  8503              01204 	STA TEMP+1
468F  68                01205 	PLA
4690  8502              01206 	STA TEMP+0
4692                    01207 
4692  68                01208 	PLA
4693  A8                01209 	TAY
4694  68                01210 	PLA
4695  AA                01211 	TAX
4696  68                01212 	PLA
4697  40                01213 	RTI
4698                    01214 
4698                    01215 CONVERT_JOYSTICK:
4698  6A                01216 	ROR A
4699  6A                01217 	ROR A
469A  6A                01218 	ROR A
469B  29C0              01219 	AND #$C0
469D  A8                01220 	TAY
469E  8A                01221 	TXA
469F  F013              01222 	BEQ .1
46A1  290F              01223 	AND #$0F
46A3  AA                01224 	TAX
46A4  A524              01225 	LDA FRAME
46A6  2901              01226 	AND #1
46A8  F005              01227 	BEQ .2
46AA  98                01228 	TYA
46AB  1DB646            01229 	ORA JOYSTICK_TABLE,X
46AE  60                01230 	RTS
46AF                    01231 .2:
46AF  98                01232 	TYA
46B0  1DC646            01233 	ORA JOYSTICK_TABLE+16,X
46B3  60                01234 	RTS
46B4                    01235 
46B4  98                01236 .1:	TYA
46B5  60                01237 	RTS
46B6                    01238 
46B6                    01239 JOYSTICK_TABLE:
46B6  0404060602020303  01240 	DB $04,$04,$06,$06,$02,$02,$03,$03
46BE  0101090908080C0C  01241 	DB $01,$01,$09,$09,$08,$08,$0C,$0C
46C6                    01242 
46C6  0C04040606020203  01243 	DB $0C,$04,$04,$06,$06,$02,$02,$03
46CE  030101090908080C  01244 	DB $03,$01,$01,$09,$09,$08,$08,$0C
46D6                    01245 
46D6                    01246 WAIT:
46D6  A524              01247 	LDA FRAME
46D8  C524              01248 .1:	CMP FRAME
46DA  F0FC              01249 	BEQ .1
46DC  60                01250 	RTS
46DD                    01251 
46DD                    01252 MUSIC_INIT:
46DD  A99F              01253 	LDA #$9F
46DF  2077FE            01254 	JSR BIOS_WRITE_PSG	
46E2  A9BF              01255 	LDA #$BF
46E4  2077FE            01256 	JSR BIOS_WRITE_PSG	
46E7  A9DF              01257 	LDA #$DF
46E9  2077FE            01258 	JSR BIOS_WRITE_PSG	
46EC  A9FF              01259 	LDA #$FF
46EE  2077FE            01260 	JSR BIOS_WRITE_PSG
46F1                    01261     IF CVBASIC_MUSIC_PLAYER
46F1                    01262     ELSE	
46F1  60                01263 	RTS
46F2                    01264     ENDIF
46F2                    01265 
46F2                    01266     IF CVBASIC_MUSIC_PLAYER
46F2                    01267 	LDA #$FF
46F2                    01268 	STA AUDIO_VOL4HW
46F2                    01269 	LDA #$00
46F2                    01270 	STA AUDIO_CONTROL
46F2                    01271 	LDA #MUSIC_SILENCE
46F2                    01272 	LDY #MUSIC_SILENCE>>8
46F2                    01273 	;
46F2                    01274 	; Play music.
46F2                    01275 	; YA = Pointer to music.
46F2                    01276 	;
46F2                    01277 MUSIC_PLAY:
46F2                    01278 	SEI
46F2                    01279 	STA MUSIC_POINTER
46F2                    01280 	STY MUSIC_POINTER+1
46F2                    01281 	LDY #0
46F2                    01282 	STY MUSIC_NOTE_COUNTER
46F2                    01283 	LDA (MUSIC_POINTER),Y
46F2                    01284 	STA MUSIC_TIMING
46F2                    01285 	INY
46F2                    01286 	STY MUSIC_PLAYING
46F2                    01287 	INC MUSIC_POINTER
46F2                    01288 	BNE $+4
46F2                    01289 	INC MUSIC_POINTER+1
46F2                    01290 	LDA MUSIC_POINTER
46F2                    01291 	LDY MUSIC_POINTER+1
46F2                    01292 	STA MUSIC_START
46F2                    01293 	STY MUSIC_START+1
46F2                    01294 	CLI
46F2                    01295 	RTS
46F2                    01296 
46F2                    01297 	;
46F2                    01298 	; Generates music
46F2                    01299 	;
46F2                    01300 MUSIC_GENERATE:
46F2                    01301 	LDA #0
46F2                    01302 	STA AUDIO_VOL1
46F2                    01303 	STA AUDIO_VOL2
46F2                    01304 	STA AUDIO_VOL3
46F2                    01305 	LDA #$FF
46F2                    01306 	STA AUDIO_VOL4HW
46F2                    01307 	LDA MUSIC_NOTE_COUNTER
46F2                    01308 	BEQ .1
46F2                    01309 	JMP .2
46F2                    01310 .1:
46F2                    01311 	LDY #0
46F2                    01312 	LDA (MUSIC_POINTER),Y
46F2                    01313 	CMP #$FE	; End of music?
46F2                    01314 	BNE .3		; No, jump.
46F2                    01315 	LDA #0		; Keep at same place.
46F2                    01316 	STA MUSIC_PLAYING
46F2                    01317 	RTS
46F2                    01318 
46F2                    01319 .3:	CMP #$FD	; Repeat music?
46F2                    01320 	BNE .4
46F2                    01321 	LDA MUSIC_START
46F2                    01322 	LDY MUSIC_START+1
46F2                    01323 	STA MUSIC_POINTER
46F2                    01324 	STY MUSIC_POINTER+1
46F2                    01325 	JMP .1
46F2                    01326 
46F2                    01327 .4:	LDA MUSIC_TIMING
46F2                    01328 	AND #$3F	; Restart note time.
46F2                    01329 	STA MUSIC_NOTE_COUNTER
46F2                    01330 
46F2                    01331 	LDA (MUSIC_POINTER),Y
46F2                    01332 	CMP #$3F	; Sustain?
46F2                    01333 	BEQ .5
46F2                    01334 	AND #$C0
46F2                    01335 	STA MUSIC_INSTRUMENT_1
46F2                    01336 	LDA (MUSIC_POINTER),Y
46F2                    01337 	AND #$3F
46F2                    01338 	ASL A
46F2                    01339 	STA MUSIC_NOTE_1
46F2                    01340 	LDA #0
46F2                    01341 	STA MUSIC_COUNTER_1
46F2                    01342 .5:
46F2                    01343 	INY
46F2                    01344 	LDA (MUSIC_POINTER),Y
46F2                    01345 	CMP #$3F	; Sustain?
46F2                    01346 	BEQ .6
46F2                    01347 	AND #$C0
46F2                    01348 	STA MUSIC_INSTRUMENT_2
46F2                    01349 	LDA (MUSIC_POINTER),Y
46F2                    01350 	AND #$3F
46F2                    01351 	ASL A
46F2                    01352 	STA MUSIC_NOTE_2
46F2                    01353 	LDA #0
46F2                    01354 	STA MUSIC_COUNTER_2
46F2                    01355 .6:
46F2                    01356 	INY
46F2                    01357 	LDA (MUSIC_POINTER),Y
46F2                    01358 	CMP #$3F	; Sustain?
46F2                    01359 	BEQ .7
46F2                    01360 	AND #$C0
46F2                    01361 	STA MUSIC_INSTRUMENT_3
46F2                    01362 	LDA (MUSIC_POINTER),Y
46F2                    01363 	AND #$3F
46F2                    01364 	ASL A
46F2                    01365 	STA MUSIC_NOTE_3
46F2                    01366 	LDA #0
46F2                    01367 	STA MUSIC_COUNTER_3
46F2                    01368 .7:
46F2                    01369 	INY
46F2                    01370 	LDA (MUSIC_POINTER),Y
46F2                    01371 	STA MUSIC_DRUM
46F2                    01372 	LDA #0	
46F2                    01373 	STA MUSIC_COUNTER_4
46F2                    01374 	LDA MUSIC_POINTER
46F2                    01375 	CLC
46F2                    01376 	ADC #4
46F2                    01377 	STA MUSIC_POINTER
46F2                    01378 	LDA MUSIC_POINTER+1
46F2                    01379 	ADC #0
46F2                    01380 	STA MUSIC_POINTER+1
46F2                    01381 .2:
46F2                    01382 	LDY MUSIC_NOTE_1
46F2                    01383 	BEQ .8
46F2                    01384 	LDA MUSIC_INSTRUMENT_1
46F2                    01385 	LDX MUSIC_COUNTER_1
46F2                    01386 	JSR MUSIC_NOTE2FREQ
46F2                    01387 	STA AUDIO_FREQ1
46F2                    01388 	STY AUDIO_FREQ1+1
46F2                    01389 	STX AUDIO_VOL1
46F2                    01390 .8:
46F2                    01391 	LDY MUSIC_NOTE_2
46F2                    01392 	BEQ .9
46F2                    01393 	LDA MUSIC_INSTRUMENT_2
46F2                    01394 	LDX MUSIC_COUNTER_2
46F2                    01395 	JSR MUSIC_NOTE2FREQ
46F2                    01396 	STA AUDIO_FREQ2
46F2                    01397 	STY AUDIO_FREQ2+1
46F2                    01398 	STX AUDIO_VOL2
46F2                    01399 .9:
46F2                    01400 	LDY MUSIC_NOTE_3
46F2                    01401 	BEQ .10
46F2                    01402 	LDA MUSIC_INSTRUMENT_3
46F2                    01403 	LDX MUSIC_COUNTER_3
46F2                    01404 	JSR MUSIC_NOTE2FREQ
46F2                    01405 	STA AUDIO_FREQ3
46F2                    01406 	STY AUDIO_FREQ3+1
46F2                    01407 	STX AUDIO_VOL3
46F2                    01408 .10:
46F2                    01409 	LDA MUSIC_DRUM
46F2                    01410 	BEQ .11
46F2                    01411 	CMP #1		; 1 - Long drum.
46F2                    01412 	BNE .12
46F2                    01413 	LDA MUSIC_COUNTER_4
46F2                    01414 	CMP #3
46F2                    01415 	BCS .11
46F2                    01416 .15:
46F2                    01417 	LDA #$EC
46F2                    01418 	STA AUDIO_NOISE
46F2                    01419 	LDA #$F5
46F2                    01420 	STA AUDIO_VOL4HW
46F2                    01421 	JMP .11
46F2                    01422 
46F2                    01423 .12:	CMP #2		; 2 - Short drum.
46F2                    01424 	BNE .14
46F2                    01425 	LDA MUSIC_COUNTER_4
46F2                    01426 	CMP #0
46F2                    01427 	BNE .11
46F2                    01428 	LDA #$ED
46F2                    01429 	STA AUDIO_NOISE
46F2                    01430 	LDA #$F5
46F2                    01431 	STA AUDIO_VOL4HW
46F2                    01432 	JMP .11
46F2                    01433 
46F2                    01434 .14:	;CMP #3		; 3 - Roll.
46F2                    01435 	;BNE
46F2                    01436 	LDA MUSIC_COUNTER_4
46F2                    01437 	CMP #2
46F2                    01438 	BCC .15
46F2                    01439 	ASL A
46F2                    01440 	SEC
46F2                    01441 	SBC MUSIC_TIMING
46F2                    01442 	BCC .11
46F2                    01443 	CMP #4
46F2                    01444 	BCC .15
46F2                    01445 .11:
46F2                    01446 	LDX MUSIC_COUNTER_1
46F2                    01447 	INX
46F2                    01448 	CPX #$18
46F2                    01449 	BNE $+4
46F2                    01450 	LDX #$10
46F2                    01451 	STX MUSIC_COUNTER_1
46F2                    01452 
46F2                    01453 	LDX MUSIC_COUNTER_2
46F2                    01454 	INX
46F2                    01455 	CPX #$18
46F2                    01456 	BNE $+4
46F2                    01457 	LDX #$10
46F2                    01458 	STX MUSIC_COUNTER_2
46F2                    01459 
46F2                    01460 	LDX MUSIC_COUNTER_3
46F2                    01461 	INX
46F2                    01462 	CPX #$18
46F2                    01463 	BNE $+4
46F2                    01464 	LDX #$10
46F2                    01465 	STX MUSIC_COUNTER_3
46F2                    01466 
46F2                    01467 	INC MUSIC_COUNTER_4
46F2                    01468 	DEC MUSIC_NOTE_COUNTER
46F2                    01469 	RTS
46F2                    01470 
46F2                    01471 MUSIC_FLUTE:
46F2                    01472 	LDA MUSIC_NOTES_TABLE,Y
46F2                    01473 	CLC
46F2                    01474 	ADC .2,X
46F2                    01475 	PHA
46F2                    01476 	LDA MUSIC_NOTES_TABLE+1,Y
46F2                    01477 	ADC #0
46F2                    01478 	TAY
46F2                    01479 	LDA .1,X
46F2                    01480 	TAX
46F2                    01481 	PLA
46F2                    01482 	RTS
46F2                    01483 
46F2                    01484 .1:
46F2                    01485         DB 10,12,13,13,12,12,12,12
46F2                    01486         DB 11,11,11,11,10,10,10,10
46F2                    01487         DB 11,11,11,11,10,10,10,10
46F2                    01488 
46F2                    01489 .2:
46F2                    01490 	DB 0,0,0,0,0,1,1,1
46F2                    01491 	DB 0,1,1,1,0,1,1,1
46F2                    01492 	DB 0,1,1,1,0,1,1,1
46F2                    01493 
46F2                    01494 	;
46F2                    01495 	; Converts note to frequency.
46F2                    01496 	; Input:
46F2                    01497 	;   A = Instrument.
46F2                    01498 	;   Y = Note (1-62)
46F2                    01499 	;   X = Instrument counter.
46F2                    01500 	; Output:
46F2                    01501 	;   YA = Frequency.
46F2                    01502 	;   X = Volume.
46F2                    01503 	;
46F2                    01504 MUSIC_NOTE2FREQ:
46F2                    01505 	CMP #$40
46F2                    01506 	BCC MUSIC_PIANO
46F2                    01507 	BEQ MUSIC_CLARINET
46F2                    01508 	CMP #$80
46F2                    01509 	BEQ MUSIC_FLUTE
46F2                    01510 	;
46F2                    01511 	; Bass instrument
46F2                    01512 	; 
46F2                    01513 MUSIC_BASS:
46F2                    01514 	LDA MUSIC_NOTES_TABLE,Y
46F2                    01515 	ASL A
46F2                    01516 	PHA
46F2                    01517 	LDA MUSIC_NOTES_TABLE+1,Y
46F2                    01518 	ROL A
46F2                    01519 	TAY
46F2                    01520 	LDA .1,X
46F2                    01521 	TAX
46F2                    01522 	PLA
46F2                    01523 	RTS
46F2                    01524 
46F2                    01525 .1:
46F2                    01526 	DB 13,13,12,12,11,11,10,10
46F2                    01527 	DB 9,9,8,8,7,7,6,6
46F2                    01528 	DB 5,5,4,4,3,3,2,2
46F2                    01529 
46F2                    01530 MUSIC_PIANO:
46F2                    01531 	LDA MUSIC_NOTES_TABLE,Y
46F2                    01532 	PHA
46F2                    01533 	LDA MUSIC_NOTES_TABLE+1,Y
46F2                    01534 	TAY
46F2                    01535 	LDA .1,X
46F2                    01536 	TAX
46F2                    01537 	PLA
46F2                    01538 	RTS
46F2                    01539 
46F2                    01540 .1:	DB 12,11,11,10,10,9,9,8
46F2                    01541 	DB 8,7,7,6,6,5,5,4
46F2                    01542 	DB 4,4,5,5,4,4,3,3
46F2                    01543 
46F2                    01544 MUSIC_CLARINET:
46F2                    01545 	LDA MUSIC_NOTES_TABLE,Y
46F2                    01546 	CLC
46F2                    01547 	ADC .2,X
46F2                    01548 	PHA
46F2                    01549 	LDA .2,X
46F2                    01550 	BMI .3
46F2                    01551 	LDA #$00
46F2                    01552 	DB $2C
46F2                    01553 .3:	LDA #$FF
46F2                    01554 	ADC MUSIC_NOTES_TABLE+1,Y
46F2                    01555 	LSR A
46F2                    01556 	TAY
46F2                    01557 	LDA .1,X
46F2                    01558 	TAX
46F2                    01559 	PLA
46F2                    01560 	ROR A
46F2                    01561 	RTS
46F2                    01562 
46F2                    01563 .1:
46F2                    01564         DB 13,14,14,13,13,12,12,12
46F2                    01565         DB 11,11,11,11,12,12,12,12
46F2                    01566         DB 11,11,11,11,12,12,12,12
46F2                    01567 
46F2                    01568 .2:
46F2                    01569 	DB 0,0,0,0,-1,-2,-1,0
46F2                    01570 	DB 1,2,1,0,-1,-2,-1,0
46F2                    01571 	DB 1,2,1,0,-1,-2,-1,0
46F2                    01572 
46F2                    01573 	;
46F2                    01574 	; Musical notes table.
46F2                    01575 	;
46F2                    01576 MUSIC_NOTES_TABLE:
46F2                    01577 	; Silence - 0
46F2                    01578 	DW 0
46F2                    01579 	; Values for 2.00 mhz.
46F2                    01580 	; 2nd octave - Index 1
46F2                    01581 	DW 956,902,851,804,758,716,676,638,602,568,536,506
46F2                    01582 	; 3rd octave - Index 13
46F2                    01583 	DW 478,451,426,402,379,358,338,319,301,284,268,253
46F2                    01584 	; 4th octave - Index 25
46F2                    01585 	DW 239,225,213,201,190,179,169,159,150,142,134,127
46F2                    01586 	; 5th octave - Index 37
46F2                    01587 	DW 119,113,106,100,95,89,84,80,75,71,67,63
46F2                    01588 	; 6th octave - Index 49
46F2                    01589 	DW 60,56,53,50,47,45,42,40,38,36,34,32
46F2                    01590 	; 7th octave - Index 61
46F2                    01591 	DW 30,28,27
46F2                    01592 
46F2                    01593 MUSIC_HARDWARE:
46F2                    01594 	LDA MUSIC_MODE
46F2                    01595 	CMP #4		; PLAY SIMPLE?
46F2                    01596 	BCC .7		; Yes, jump.
46F2                    01597 	LDA AUDIO_VOL2
46F2                    01598 	BNE .7
46F2                    01599 	LDA AUDIO_VOL3
46F2                    01600 	BEQ .7
46F2                    01601 	STA AUDIO_VOL2
46F2                    01602 	LDA #0
46F2                    01603 	STA AUDIO_VOL3
46F2                    01604 	LDA AUDIO_FREQ3
46F2                    01605 	LDY AUDIO_FREQ3+1
46F2                    01606 	STA AUDIO_FREQ2
46F2                    01607 	STY AUDIO_FREQ2+1
46F2                    01608 .7:
46F2                    01609 	LDA AUDIO_FREQ1+1
46F2                    01610 	CMP #$04
46F2                    01611 	LDA #$9F
46F2                    01612 	BCS .1
46F2                    01613 	LDA AUDIO_FREQ1
46F2                    01614 	AND #$0F
46F2                    01615 	ORA #$80
46F2                    01616 	JSR BIOS_WRITE_PSG
46F2                    01617 	LDA AUDIO_FREQ1+1
46F2                    01618 	ASL AUDIO_FREQ1
46F2                    01619 	ROL A
46F2                    01620 	ASL AUDIO_FREQ1
46F2                    01621 	ROL A
46F2                    01622 	ASL AUDIO_FREQ1
46F2                    01623 	ROL A
46F2                    01624 	ASL AUDIO_FREQ1
46F2                    01625 	ROL A
46F2                    01626 	JSR BIOS_WRITE_PSG
46F2                    01627 	LDX AUDIO_VOL1
46F2                    01628 	LDA AY2SN,X
46F2                    01629 	ORA #$90
46F2                    01630 .1:	JSR BIOS_WRITE_PSG
46F2                    01631 
46F2                    01632 	LDA AUDIO_FREQ2+1
46F2                    01633 	CMP #$04
46F2                    01634 	LDA #$BF
46F2                    01635 	BCS .2
46F2                    01636 	LDA AUDIO_FREQ2
46F2                    01637 	AND #$0F
46F2                    01638 	ORA #$A0
46F2                    01639 	JSR BIOS_WRITE_PSG
46F2                    01640 	LDA AUDIO_FREQ2+1
46F2                    01641 	ASL AUDIO_FREQ2
46F2                    01642 	ROL A
46F2                    01643 	ASL AUDIO_FREQ2
46F2                    01644 	ROL A
46F2                    01645 	ASL AUDIO_FREQ2
46F2                    01646 	ROL A
46F2                    01647 	ASL AUDIO_FREQ2
46F2                    01648 	ROL A
46F2                    01649 	JSR BIOS_WRITE_PSG
46F2                    01650 	LDX AUDIO_VOL2
46F2                    01651 	LDA AY2SN,X
46F2                    01652 	ORA #$B0
46F2                    01653 .2:	JSR BIOS_WRITE_PSG
46F2                    01654 
46F2                    01655 	LDA MUSIC_MODE
46F2                    01656 	CMP #4		; PLAY SIMPLE?
46F2                    01657 	BCC .6		; Yes, jump.
46F2                    01658 
46F2                    01659 	LDA AUDIO_FREQ3+1
46F2                    01660 	CMP #$04
46F2                    01661 	LDA #$DF
46F2                    01662 	BCS .3
46F2                    01663 	LDA AUDIO_FREQ3
46F2                    01664 	AND #$0F
46F2                    01665 	ORA #$C0
46F2                    01666 	JSR BIOS_WRITE_PSG
46F2                    01667 	LDA AUDIO_FREQ3+1
46F2                    01668 	ASL AUDIO_FREQ3
46F2                    01669 	ROL A
46F2                    01670 	ASL AUDIO_FREQ3
46F2                    01671 	ROL A
46F2                    01672 	ASL AUDIO_FREQ3
46F2                    01673 	ROL A
46F2                    01674 	ASL AUDIO_FREQ3
46F2                    01675 	ROL A
46F2                    01676 	JSR BIOS_WRITE_PSG
46F2                    01677 	LDX AUDIO_VOL3
46F2                    01678 	LDA AY2SN,X
46F2                    01679 	ORA #$D0
46F2                    01680 .3:	JSR BIOS_WRITE_PSG
46F2                    01681 
46F2                    01682 .6:	LDA MUSIC_MODE
46F2                    01683 	LSR A		; NO DRUMS?
46F2                    01684 	BCC .8
46F2                    01685 	LDA AUDIO_VOL4HW
46F2                    01686 	CMP #$FF
46F2                    01687 	BEQ .4
46F2                    01688 	LDA AUDIO_NOISE
46F2                    01689 	CMP AUDIO_CONTROL
46F2                    01690 	BEQ .4
46F2                    01691 	STA AUDIO_CONTROL
46F2                    01692 	JSR BIOS_WRITE_PSG
46F2                    01693 .4:	LDA AUDIO_VOL4HW
46F2                    01694 	JSR BIOS_WRITE_PSG
46F2                    01695 .8:
46F2                    01696 	RTS
46F2                    01697 
46F2                    01698         ;
46F2                    01699         ; Converts AY-3-8910 volume to SN76489
46F2                    01700         ;
46F2                    01701 AY2SN:
46F2                    01702         DB $0F,$0F,$0F,$0E,$0E,$0E,$0D,$0B,$0A,$08,$07,$05,$04,$03,$01,$00
46F2                    01703 
46F2                    01704 MUSIC_SILENCE:
46F2                    01705 	DB 8
46F2                    01706 	DB 0,0,0,0
46F2                    01707 	DB -2
46F2                    01708     ENDIF
46F2                    01709 
46F2                    01710     IF CVBASIC_COMPRESSION
46F2                    01711 DEFINE_CHAR_UNPACK:
46F2                    01712 	LDA #0
46F2                    01713 	STA POINTER+1
46F2                    01714 	LDA POINTER
46F2                    01715 	ASL A
46F2                    01716 	ROL POINTER+1
46F2                    01717 	ASL A
46F2                    01718 	ROL POINTER+1
46F2                    01719 	ASL A
46F2                    01720 	ROL POINTER+1
46F2                    01721 	STA POINTER
46F2                    01722 	LDA MODE
46F2                    01723 	AND #$04
46F2                    01724 	BEQ UNPACK3
46F2                    01725 	BNE UNPACK
46F2                    01726 
46F2                    01727 DEFINE_COLOR_UNPACK:
46F2                    01728 	LDA #4
46F2                    01729 	STA POINTER+1
46F2                    01730 	LDA POINTER
46F2                    01731 	ASL A
46F2                    01732 	ROL POINTER+1
46F2                    01733 	ASL A
46F2                    01734 	ROL POINTER+1
46F2                    01735 	ASL A
46F2                    01736 	ROL POINTER+1
46F2                    01737 	STA POINTER
46F2                    01738 UNPACK3:
46F2                    01739 	JSR .1
46F2                    01740 	JSR .1
46F2                    01741 .1:	LDA POINTER
46F2                    01742 	PHA
46F2                    01743 	LDA POINTER+1
46F2                    01744 	PHA
46F2                    01745 	LDA TEMP
46F2                    01746 	PHA
46F2                    01747 	LDA TEMP+1
46F2                    01748 	PHA
46F2                    01749 	JSR UNPACK
46F2                    01750 	PLA
46F2                    01751 	STA TEMP+1
46F2                    01752 	PLA
46F2                    01753 	STA TEMP
46F2                    01754 	PLA
46F2                    01755 	CLC
46F2                    01756 	ADC #8
46F2                    01757 	STA POINTER+1
46F2                    01758 	PLA
46F2                    01759 	STA POINTER
46F2                    01760 	RTS
46F2                    01761 
46F2                    01762         ;
46F2                    01763         ; Pletter-0.5c decompressor (XL2S Entertainment & Team Bomba)
46F2                    01764         ; Ported from Z80 original
46F2                    01765 	; temp = Pointer to source data
46F2                    01766 	; pointer = Pointer to target VRAM
46F2                    01767 	; temp2
46F2                    01768 	; temp2+1
46F2                    01769 	; result
46F2                    01770 	; result+1
46F2                    01771 	; pletter_off
46F2                    01772 	; pletter_off+1
46F2                    01773 	;
46F2                    01774 UNPACK:
46F2                    01775 	; Initialization
46F2                    01776 	LDY #0
46F2                    01777 	STY TEMP2
46F2                    01778 	LDA (TEMP),Y
46F2                    01779 	INC TEMP
46F2                    01780 	BNE $+4
46F2                    01781 	INC TEMP+1
46F2                    01782 	ASL A
46F2                    01783 	ROL TEMP2
46F2                    01784 	ADC #1
46F2                    01785 	ASL A
46F2                    01786 	ROL TEMP2
46F2                    01787 	ASL A
46F2                    01788 	STA PLETTER_BIT
46F2                    01789 	ROL TEMP2
46F2                    01790 	ROL TEMP2
46F2                    01791 	LDA #.MODES
46F2                    01792 	ADC TEMP2
46F2                    01793 	STA TEMP2
46F2                    01794 	LDA #.MODES>>8
46F2                    01795 	ADC #0
46F2                    01796 	STA TEMP2+1
46F2                    01797 	LDA (TEMP2),Y
46F2                    01798 	TAX
46F2                    01799 	INY
46F2                    01800 	LDA (TEMP2),Y
46F2                    01801 	STX TEMP2	; IX (temp2)
46F2                    01802 	STA TEMP2+1
46F2                    01803 	LDA PLETTER_BIT
46F2                    01804 .LITERAL:
46F2                    01805 	STA PLETTER_BIT
46F2                    01806 	LDY #0
46F2                    01807 	LDA (TEMP),Y
46F2                    01808 	INC TEMP
46F2                    01809 	BNE $+4
46F2                    01810 	INC TEMP+1
46F2                    01811 	TAX
46F2                    01812 	LDA POINTER
46F2                    01813 	LDY POINTER+1
46F2                    01814 	SEI
46F2                    01815 	JSR WRTVRM
46F2                    01816 	CLI
46F2                    01817 	INC POINTER
46F2                    01818 	BNE $+4
46F2                    01819 	INC POINTER+1
46F2                    01820 	LDA PLETTER_BIT
46F2                    01821 .LOOP:
46F2                    01822 	ASL A
46F2                    01823 	BNE $+5
46F2                    01824 	JSR .GETBIT
46F2                    01825 	BCC .LITERAL
46F2                    01826 
46F2                    01827 	; Compressed data
46F2                    01828 	LDX #1
46F2                    01829 	STX RESULT
46F2                    01830 	DEX
46F2                    01831 	STX RESULT+1
46F2                    01832 .GETLEN:
46F2                    01833 	ASL A
46F2                    01834 	BNE $+5
46F2                    01835 	JSR .GETBIT
46F2                    01836 	BCC .LENOK
46F2                    01837 .LUS:	ASL A
46F2                    01838 	BNE $+5
46F2                    01839 	JSR .GETBIT
46F2                    01840 	ROL RESULT
46F2                    01841 	ROL RESULT+1
46F2                    01842 	BCC $+3
46F2                    01843 	RTS
46F2                    01844 	ASL A
46F2                    01845 	BNE $+5
46F2                    01846 	JSR .GETBIT
46F2                    01847 	BCC .LENOK
46F2                    01848 	ASL A
46F2                    01849 	BNE $+5
46F2                    01850 	JSR .GETBIT
46F2                    01851 	ROL RESULT
46F2                    01852 	ROL RESULT+1
46F2                    01853 	BCC $+3
46F2                    01854 	RTS
46F2                    01855 	ASL A
46F2                    01856 	BNE $+5
46F2                    01857 	JSR .GETBIT
46F2                    01858 	BCS .LUS
46F2                    01859 .LENOK:
46F2                    01860 	INC RESULT
46F2                    01861 	BNE $+4
46F2                    01862 	INC RESULT+1
46F2                    01863 	STA PLETTER_BIT
46F2                    01864 	LDY #0
46F2                    01865 	STY PLETTER_OFF+1
46F2                    01866 	LDA (TEMP),Y
46F2                    01867 	INC TEMP
46F2                    01868 	BNE $+4
46F2                    01869 	INC TEMP+1
46F2                    01870 	STA PLETTER_OFF
46F2                    01871 	LDA PLETTER_OFF
46F2                    01872 	BPL .OFFSOK
46F2                    01873 	LDA PLETTER_BIT
46F2                    01874 	JMP (TEMP2)
46F2                    01875 	
46F2                    01876 .MODE6:
46F2                    01877 	ASL A
46F2                    01878 	BNE $+5
46F2                    01879 	JSR .GETBIT
46F2                    01880 	ROL PLETTER_OFF+1
46F2                    01881 .MODE5:
46F2                    01882 	ASL A
46F2                    01883 	BNE $+5
46F2                    01884 	JSR .GETBIT
46F2                    01885 	ROL PLETTER_OFF+1
46F2                    01886 .MODE4:
46F2                    01887 	ASL A
46F2                    01888 	BNE $+5
46F2                    01889 	JSR .GETBIT
46F2                    01890 	ROL PLETTER_OFF+1
46F2                    01891 .MODE3:
46F2                    01892 	ASL A
46F2                    01893 	BNE $+5
46F2                    01894 	JSR .GETBIT
46F2                    01895 	ROL PLETTER_OFF+1
46F2                    01896 .MODE2:
46F2                    01897 	ASL A
46F2                    01898 	BNE $+5
46F2                    01899 	JSR .GETBIT
46F2                    01900 	ROL PLETTER_OFF+1
46F2                    01901 	ASL A
46F2                    01902 	BNE $+5
46F2                    01903 	JSR .GETBIT
46F2                    01904 	STA PLETTER_BIT
46F2                    01905 	BCC .OFFSOK
46F2                    01906 	INC PLETTER_OFF+1
46F2                    01907 	LDA PLETTER_OFF
46F2                    01908 	AND #$7F
46F2                    01909 	STA PLETTER_OFF
46F2                    01910 .OFFSOK:
46F2                    01911 	INC PLETTER_OFF
46F2                    01912 	BNE $+4
46F2                    01913 	INC PLETTER_OFF+1
46F2                    01914 
46F2                    01915 	LDA RESULT
46F2                    01916 	BEQ $+4
46F2                    01917 	INC RESULT+1
46F2                    01918 
46F2                    01919 	LDA POINTER
46F2                    01920 	SEC
46F2                    01921 	SBC PLETTER_OFF
46F2                    01922 	STA PLETTER_OFF
46F2                    01923 	LDA POINTER+1
46F2                    01924 	SBC PLETTER_OFF+1
46F2                    01925 	STA PLETTER_OFF+1
46F2                    01926 .LOOP2:
46F2                    01927 	SEI
46F2                    01928 	LDA PLETTER_OFF
46F2                    01929 	LDY PLETTER_OFF+1
46F2                    01930 	JSR RDVRM
46F2                    01931 	TAX
46F2                    01932 	LDA POINTER
46F2                    01933 	LDY POINTER+1
46F2                    01934 	JSR WRTVRM
46F2                    01935 	CLI
46F2                    01936 	INC PLETTER_OFF
46F2                    01937 	BNE $+4
46F2                    01938 	INC PLETTER_OFF+1
46F2                    01939 	INC POINTER
46F2                    01940 	BNE $+4
46F2                    01941 	INC POINTER+1
46F2                    01942 	DEC RESULT
46F2                    01943 	BNE .LOOP2
46F2                    01944 	DEC RESULT+1
46F2                    01945 	BNE .LOOP2
46F2                    01946 
46F2                    01947 	LDA PLETTER_BIT
46F2                    01948 	JMP .LOOP
46F2                    01949 
46F2                    01950 .GETBIT:
46F2                    01951 	LDY #0
46F2                    01952 	LDA (TEMP),Y
46F2                    01953 	INC TEMP
46F2                    01954 	BNE $+4
46F2                    01955 	INC TEMP+1
46F2                    01956 	ROL A
46F2                    01957 	RTS
46F2                    01958 
46F2                    01959 .MODES:
46F2                    01960 	DW .OFFSOK
46F2                    01961 	DW .MODE2
46F2                    01962 	DW .MODE3
46F2                    01963 	DW .MODE4
46F2                    01964 	DW .MODE5
46F2                    01965 	DW .MODE6
46F2                    01966     ENDIF
46F2                    01967 
46F2                    01968 	; Required for Creativision because it doesn't provide an ASCII charset.
46F2                    01969 	;
46F2                    01970         ; My personal font for TMS9928.
46F2                    01971         ;
46F2                    01972         ; Patterned after the TMS9928 programming manual 6x8 letters
46F2                    01973         ; with better lowercase letters, also I made a proper
46F2                    01974         ; AT sign.
46F2                    01975         ;
46F2                    01976 FONT_BITMAPS:
46F2  0000000000000000  01977         DB $00,$00,$00,$00,$00,$00,$00,$00      ; $20 space
46FA  2020202020002000  01978         DB $20,$20,$20,$20,$20,$00,$20,$00      ; $21 !
4702  5050500000000000  01979         DB $50,$50,$50,$00,$00,$00,$00,$00      ; $22 "
470A  5050F850F8505000  01980         DB $50,$50,$F8,$50,$F8,$50,$50,$00      ; $23 #
4712  2078A07028F02000  01981         DB $20,$78,$A0,$70,$28,$F0,$20,$00      ; $24 $
471A  C0C8102040981800  01982         DB $C0,$C8,$10,$20,$40,$98,$18,$00      ; $25 %
4722  40A040A0A8906800  01983         DB $40,$A0,$40,$A0,$A8,$90,$68,$00      ; $26 &
472A  6020400000000000  01984         DB $60,$20,$40,$00,$00,$00,$00,$00      ; $27 '
4732  1020404040201000  01985         DB $10,$20,$40,$40,$40,$20,$10,$00      ; $28 (
473A  4020101010204000  01986         DB $40,$20,$10,$10,$10,$20,$40,$00      ; $29 )
4742  00A8702070A80000  01987         DB $00,$A8,$70,$20,$70,$A8,$00,$00      ; $2a *
474A  002020F820200000  01988         DB $00,$20,$20,$F8,$20,$20,$00,$00      ; $2b +
4752  0000000000602040  01989         DB $00,$00,$00,$00,$00,$60,$20,$40      ; $2c ,
475A  000000FC00000000  01990         DB $00,$00,$00,$FC,$00,$00,$00,$00      ; $2d -
4762  0000000000006000  01991         DB $00,$00,$00,$00,$00,$00,$60,$00      ; $2e .
476A  0008102040800000  01992         DB $00,$08,$10,$20,$40,$80,$00,$00      ; $2f /
4772  708898A8C8887000  01993         DB $70,$88,$98,$A8,$C8,$88,$70,$00      ; $30 0
477A  206020202020F800  01994         DB $20,$60,$20,$20,$20,$20,$F8,$00      ; $31 1
4782  708808106080F800  01995         DB $70,$88,$08,$10,$60,$80,$F8,$00      ; $32 2
478A  7088083008887000  01996         DB $70,$88,$08,$30,$08,$88,$70,$00      ; $33 3
4792  30509090F8101000  01997         DB $30,$50,$90,$90,$F8,$10,$10,$00      ; $34 4
479A  F880F0080808F000  01998         DB $F8,$80,$F0,$08,$08,$08,$F0,$00      ; $35 5
47A2  304080F088887000  01999         DB $30,$40,$80,$F0,$88,$88,$70,$00      ; $36 6
47AA  F808102020202000  02000         DB $F8,$08,$10,$20,$20,$20,$20,$00      ; $37 7
47B2  7088887088887000  02001         DB $70,$88,$88,$70,$88,$88,$70,$00      ; $38 8
47BA  7088887808106000  02002         DB $70,$88,$88,$78,$08,$10,$60,$00      ; $39 9
47C2  0000006000600000  02003         DB $00,$00,$00,$60,$00,$60,$00,$00      ; $3a :
47CA  0000006000602040  02004         DB $00,$00,$00,$60,$00,$60,$20,$40      ; $3b ;
47D2  1020408040201000  02005         DB $10,$20,$40,$80,$40,$20,$10,$00      ; $3c <
47DA  0000F800F8000000  02006         DB $00,$00,$F8,$00,$F8,$00,$00,$00      ; $3d =
47E2  0804020102040800  02007         DB $08,$04,$02,$01,$02,$04,$08,$00      ; $3e >
47EA  7088081020002000  02008         DB $70,$88,$08,$10,$20,$00,$20,$00      ; $3f ?
47F2  708898A898807000  02009         DB $70,$88,$98,$A8,$98,$80,$70,$00      ; $40 @
47FA  20508888F8888800  02010         DB $20,$50,$88,$88,$F8,$88,$88,$00      ; $41 A
4802  F08888F08888F000  02011         DB $F0,$88,$88,$F0,$88,$88,$F0,$00      ; $42 B
480A  7088808080887000  02012         DB $70,$88,$80,$80,$80,$88,$70,$00      ; $43 C
4812  F08888888888F000  02013         DB $F0,$88,$88,$88,$88,$88,$F0,$00      ; $44 D
481A  F88080F08080F800  02014         DB $F8,$80,$80,$F0,$80,$80,$F8,$00      ; $45 E
4822  F88080F080808000  02015         DB $F8,$80,$80,$F0,$80,$80,$80,$00      ; $46 F
482A  708880B888887000  02016         DB $70,$88,$80,$B8,$88,$88,$70,$00      ; $47 G
4832  888888F888888800  02017         DB $88,$88,$88,$F8,$88,$88,$88,$00      ; $48 H
483A  7020202020207000  02018         DB $70,$20,$20,$20,$20,$20,$70,$00      ; $49 I
4842  0808080888887000  02019         DB $08,$08,$08,$08,$88,$88,$70,$00      ; $4A J
484A  8890A0C0A0908800  02020         DB $88,$90,$A0,$C0,$A0,$90,$88,$00      ; $4B K
4852  808080808080F800  02021         DB $80,$80,$80,$80,$80,$80,$F8,$00      ; $4C L
485A  88D8A8A888888800  02022         DB $88,$D8,$A8,$A8,$88,$88,$88,$00      ; $4D M
4862  88C8C8A898988800  02023         DB $88,$C8,$C8,$A8,$98,$98,$88,$00      ; $4E N
486A  7088888888887000  02024         DB $70,$88,$88,$88,$88,$88,$70,$00      ; $4F O
4872  F08888F080808000  02025         DB $F0,$88,$88,$F0,$80,$80,$80,$00      ; $50 P
487A  7088888888A89068  02026         DB $70,$88,$88,$88,$88,$A8,$90,$68      ; $51 Q
4882  F08888F0A0908800  02027         DB $F0,$88,$88,$F0,$A0,$90,$88,$00      ; $52 R
488A  7088807008887000  02028         DB $70,$88,$80,$70,$08,$88,$70,$00      ; $53 S
4892  F820202020202000  02029         DB $F8,$20,$20,$20,$20,$20,$20,$00      ; $54 T
489A  8888888888887000  02030         DB $88,$88,$88,$88,$88,$88,$70,$00      ; $55 U
48A2  8888888850502000  02031         DB $88,$88,$88,$88,$50,$50,$20,$00      ; $56 V
48AA  888888A8A8D88800  02032         DB $88,$88,$88,$A8,$A8,$D8,$88,$00      ; $57 W
48B2  8888502050888800  02033         DB $88,$88,$50,$20,$50,$88,$88,$00      ; $58 X
48BA  8888887020202000  02034         DB $88,$88,$88,$70,$20,$20,$20,$00      ; $59 Y
48C2  F80810204080F800  02035         DB $F8,$08,$10,$20,$40,$80,$F8,$00      ; $5A Z
48CA  7860606060607800  02036         DB $78,$60,$60,$60,$60,$60,$78,$00      ; $5B [
48D2  0080402010080000  02037         DB $00,$80,$40,$20,$10,$08,$00,$00      ; $5C \
48DA  F03030303030F000  02038         DB $F0,$30,$30,$30,$30,$30,$F0,$00      ; $5D ]
48E2  2050880000000000  02039         DB $20,$50,$88,$00,$00,$00,$00,$00      ; $5E 
48EA  000000000000F800  02040         DB $00,$00,$00,$00,$00,$00,$F8,$00      ; $5F _
48F2  4020100000000000  02041         DB $40,$20,$10,$00,$00,$00,$00,$00      ; $60 
48FA  0000689888986800  02042         DB $00,$00,$68,$98,$88,$98,$68,$00      ; $61 a
4902  8080F0888888F000  02043         DB $80,$80,$F0,$88,$88,$88,$F0,$00      ; $62 b
490A  0000788080807800  02044         DB $00,$00,$78,$80,$80,$80,$78,$00      ; $63 c
4912  0808689888986800  02045         DB $08,$08,$68,$98,$88,$98,$68,$00      ; $64 d
491A  00007088F8807000  02046         DB $00,$00,$70,$88,$F8,$80,$70,$00      ; $65 e
4922  304840E040404000  02047         DB $30,$48,$40,$E0,$40,$40,$40,$00      ; $66 f
492A  0000788888780870  02048         DB $00,$00,$78,$88,$88,$78,$08,$70      ; $67 g
4932  8080F08888888800  02049         DB $80,$80,$F0,$88,$88,$88,$88,$00      ; $68 h
493A  2000602020207000  02050         DB $20,$00,$60,$20,$20,$20,$70,$00      ; $69 i
4942  0800180888887000  02051         DB $08,$00,$18,$08,$88,$88,$70,$00      ; $6a j
494A  80808890E0908800  02052         DB $80,$80,$88,$90,$E0,$90,$88,$00      ; $6b k
4952  6020202020207000  02053         DB $60,$20,$20,$20,$20,$20,$70,$00      ; $6c l
495A  0000D0A8A8A8A800  02054         DB $00,$00,$D0,$A8,$A8,$A8,$A8,$00      ; $6d m
4962  0000B0C888888800  02055         DB $00,$00,$B0,$C8,$88,$88,$88,$00      ; $6e n
496A  0000708888887000  02056         DB $00,$00,$70,$88,$88,$88,$70,$00      ; $6f o
4972  0000F0888888F080  02057         DB $00,$00,$F0,$88,$88,$88,$F0,$80      ; $70 p
497A  0000788888887808  02058         DB $00,$00,$78,$88,$88,$88,$78,$08      ; $71 q
4982  0000B8C080808000  02059         DB $00,$00,$B8,$C0,$80,$80,$80,$00      ; $72 r
498A  000078807008F000  02060         DB $00,$00,$78,$80,$70,$08,$F0,$00      ; $73 s
4992  2020F82020202000  02061         DB $20,$20,$F8,$20,$20,$20,$20,$00      ; $74 t
499A  0000888888986800  02062         DB $00,$00,$88,$88,$88,$98,$68,$00      ; $75 u
49A2  0000888888502000  02063         DB $00,$00,$88,$88,$88,$50,$20,$00      ; $76 v
49AA  000088A8A8A85000  02064         DB $00,$00,$88,$A8,$A8,$A8,$50,$00      ; $77 w
49B2  0000885020508800  02065         DB $00,$00,$88,$50,$20,$50,$88,$00      ; $78 x
49BA  0000888898680870  02066         DB $00,$00,$88,$88,$98,$68,$08,$70      ; $79 y
49C2  0000F8102040F800  02067         DB $00,$00,$F8,$10,$20,$40,$F8,$00      ; $7a z
49CA  1820204020201800  02068         DB $18,$20,$20,$40,$20,$20,$18,$00      ; $7b {
49D2  2020202020202000  02069         DB $20,$20,$20,$20,$20,$20,$20,$00      ; $7c |
49DA  C02020102020C000  02070         DB $C0,$20,$20,$10,$20,$20,$C0,$00      ; $7d } 
49E2  000040A810000000  02071         DB $00,$00,$40,$A8,$10,$00,$00,$00      ; $7e
49EA  707020F820705000  02072         DB $70,$70,$20,$F8,$20,$70,$50,$00      ; $7f
49F2                    02073 
49F2                    02074 START:
49F2  78                02075 	SEI
49F3  D8                02076 	CLD
49F4  A27F              02077 	LDX #STACK
49F6  9A                02078 	TXS
49F7  AD0120            02079 	LDA $2001
49FA  A982              02080 	LDA #$82
49FC  A201              02081 	LDX #$01
49FE  200040            02082 	JSR WRTVDP
4A01  AD0120            02083 	LDA $2001
4A04  A982              02084 	LDA #$82
4A06  A201              02085 	LDX #$01
4A08  200040            02086 	JSR WRTVDP
4A0B                    02087 
4A0B  20DD46            02088 	JSR MUSIC_INIT
4A0E                    02089 
4A0E  20A844            02090 	JSR MODE_0
4A11                    02091 
4A11  A900              02092 	LDA #$00
4A13  8520              02093 	STA JOY1_DATA
4A15  8521              02094 	STA JOY2_DATA
4A17  A90F              02095 	LDA #$0F
4A19  8522              02096 	STA KEY1_DATA
4A1B  8523              02097 	STA KEY2_DATA
4A1D                    02098 
4A1D                    02099 CVB_Y_ENEMY1:	EQU $0050
4A1D                    02100 CVB_Y_ENEMY2:	EQU $0051
4A1D                    02101 CVB_Y_ENEMY3:	EQU $0052
4A1D                    02102 CVB_C:	EQU $0053
4A1D                    02103 CVB_D:	EQU $0054
4A1D                    02104 CVB_E:	EQU $0055
4A1D                    02105 CVB_PLAYER_FRAME:	EQU $0056
4A1D                    02106 CVB_TICK_NOTE:	EQU $0057
4A1D                    02107 CVB_LIVES:	EQU $0058
4A1D                    02108 CVB_LEVEL:	EQU $0059
4A1D                    02109 CVB_ENEMY1_FRAME:	EQU $005A
4A1D                    02110 CVB_COLUMN:	EQU $005B
4A1D                    02111 CVB_ENEMY_SPEED:	EQU $005C
4A1D                    02112 CVB_SONG_NOTE:	EQU $005D
4A1D                    02113 CVB_ENEMY2_FRAME:	EQU $005E
4A1D                    02114 CVB_#C:	EQU $005F
4A1D                    02115 CVB_#D:	EQU $0061
4A1D                    02116 CVB_BASE_CHARACTER:	EQU $0063
4A1D                    02117 CVB_X_PLAYER:	EQU $0064
4A1D                    02118 CVB_ENEMY3_FRAME:	EQU $0065
4A1D                    02119 CVB_X_ENEMY1:	EQU $0066
4A1D                    02120 CVB_X_ENEMY2:	EQU $0067
4A1D                    02121 CVB_X_ENEMY3:	EQU $0068
4A1D                    02122 CVB_NOTE:	EQU $0069
4A1D                    02123 CVB_LADDERS:	EQU $006A
4A1D                    02124 CVB_ROW:	EQU $006B
4A1D                    02125 CVB_Y_PLAYER:	EQU $006C
4A1D                    02126 RAM_END:
4A1D                    02127 	; 	'
4A1D                    02128 	; 	' Viboritas (demo for CVBasic)
4A1D                    02129 	; 	'
4A1D                    02130 	; 	' by Oscar Toledo G.
4A1D                    02131 	; 	' https://nanochess.org/
4A1D                    02132 	; 	'
4A1D                    02133 	; 	' Creation date: Oct/1990.
4A1D                    02134 	; 	' Revision date: Feb/29/2024. Ported to CVBasic.
4A1D                    02135 	; 	'
4A1D                    02136 	; 
4A1D                    02137 	; 	' The original game was made in Z80 assembler,
4A1D                    02138 	; 	' you can see it here: https://nanochess.org/viboritas.html
4A1D                    02139 	; 
4A1D                    02140 	; 	' It is easier to understand in CVBasic ;)
4A1D                    02141 	; 
4A1D                    02142 	; 	DEFINE CHAR 128,21,game_bitmaps
4A1D  A980              02143 	LDA #128
4A1F  A000              02144 	LDY #0
4A21  8508              02145 	STA POINTER
4A23  A915              02146 	LDA #21
4A25  48                02147 	PHA
4A26  A92E              02148 	LDA #CVB_GAME_BITMAPS
4A28  8502              02149 	STA TEMP
4A2A  A956              02150 	LDA #CVB_GAME_BITMAPS>>8
4A2C  8503              02151 	STA TEMP+1
4A2E  68                02152 	PLA
4A2F  200742            02153 	JSR DEFINE_CHAR
4A32                    02154 	; 	DEFINE COLOR 128,21,game_colors
4A32  A980              02155 	LDA #128
4A34  A000              02156 	LDY #0
4A36  8508              02157 	STA POINTER
4A38  A915              02158 	LDA #21
4A3A  48                02159 	PHA
4A3B  A9D6              02160 	LDA #CVB_GAME_COLORS
4A3D  8502              02161 	STA TEMP
4A3F  A956              02162 	LDA #CVB_GAME_COLORS>>8
4A41  8503              02163 	STA TEMP+1
4A43  68                02164 	PLA
4A44  203A42            02165 	JSR DEFINE_COLOR
4A47                    02166 	; 	DEFINE SPRITE 0,10,game_sprites
4A47  A900              02167 	LDA #0
4A49  A000              02168 	LDY #0
4A4B  8508              02169 	STA POINTER
4A4D  A90A              02170 	LDA #10
4A4F  48                02171 	PHA
4A50  A97E              02172 	LDA #CVB_GAME_SPRITES
4A52  8502              02173 	STA TEMP
4A54  A957              02174 	LDA #CVB_GAME_SPRITES>>8
4A56  8503              02175 	STA TEMP+1
4A58  68                02176 	PLA
4A59  20D541            02177 	JSR DEFINE_SPRITE
4A5C                    02178 	; 
4A5C                    02179 	; restart_game:
4A5C                    02180 CVB_RESTART_GAME:
4A5C                    02181 	; 	lives = 2
4A5C  A902              02182 	LDA #2
4A5E  8558              02183 	STA CVB_LIVES
4A60                    02184 	; 	level = 1
4A60  A901              02185 	LDA #1
4A62  8559              02186 	STA CVB_LEVEL
4A64                    02187 	; restart_level:
4A64                    02188 CVB_RESTART_LEVEL:
4A64                    02189 	; 	
4A64                    02190 	; 	PRINT AT 684,"Lives: ",lives
4A64  A9AC              02191 	LDA #172
4A66  A002              02192 	LDY #2
4A68  850C              02193 	STA CURSOR
4A6A  840D              02194 	STY CURSOR+1
4A6C  A978              02195 	LDA #CV1
4A6E  A04A              02196 	LDY #CV1>>8
4A70  A207              02197 	LDX #7
4A72  202541            02198 	JSR PRINT_STRING
4A75  4C7F4A            02199 	JMP CV2
4A78                    02200 CV1:
4A78  4C697665733A20    02201 	DB $4C,$69,$76,$65,$73,$3A,$20
4A7F                    02202 CV2:
4A7F  A558              02203 	LDA CVB_LIVES
4A81  A000              02204 	LDY #0
4A83  204D41            02205 	JSR PRINT_NUMBER
4A86                    02206 	; 	PRINT AT 745,"nanochess 1990"
4A86  A9E9              02207 	LDA #233
4A88  A002              02208 	LDY #2
4A8A  850C              02209 	STA CURSOR
4A8C  840D              02210 	STY CURSOR+1
4A8E  A99A              02211 	LDA #CV3
4A90  A04A              02212 	LDY #CV3>>8
4A92  A20E              02213 	LDX #14
4A94  202541            02214 	JSR PRINT_STRING
4A97  4CA84A            02215 	JMP CV4
4A9A                    02216 CV3:
4A9A  6E616E6F63686573  02217 	DB $6E,$61,$6E,$6F,$63,$68,$65,$73
4AA2  732031393930      02218 	DB $73,$20,$31,$39,$39,$30
4AA8                    02219 CV4:
4AA8                    02220 	; 	
4AA8                    02221 	; next_level:
4AA8                    02222 CVB_NEXT_LEVEL:
4AA8                    02223 	; 	GOSUB draw_level
4AA8  206F4F            02224 	JSR CVB_DRAW_LEVEL
4AAB                    02225 	; 
4AAB                    02226 	; 	x_player = 8
4AAB  A908              02227 	LDA #8
4AAD  8564              02228 	STA CVB_X_PLAYER
4AAF                    02229 	; 	y_player = 16
4AAF  A910              02230 	LDA #16
4AB1  856C              02231 	STA CVB_Y_PLAYER
4AB3                    02232 	; 	player_frame = 0
4AB3  A900              02233 	LDA #0
4AB5  8556              02234 	STA CVB_PLAYER_FRAME
4AB7                    02235 	; 
4AB7                    02236 	; 	x_enemy1 = random(128) + 64
4AB7  201244            02237 	JSR RANDOM
4ABA  297F              02238 	AND #127
4ABC  18                02239 	CLC
4ABD  6940              02240 	ADC #64
4ABF  8566              02241 	STA CVB_X_ENEMY1
4AC1                    02242 	; 	y_enemy1 = 56
4AC1  A938              02243 	LDA #56
4AC3  8550              02244 	STA CVB_Y_ENEMY1
4AC5                    02245 	; 	enemy1_frame = 24
4AC5  A918              02246 	LDA #24
4AC7  855A              02247 	STA CVB_ENEMY1_FRAME
4AC9                    02248 	; 	x_enemy2 = random(128) + 80
4AC9  201244            02249 	JSR RANDOM
4ACC  297F              02250 	AND #127
4ACE  18                02251 	CLC
4ACF  6950              02252 	ADC #80
4AD1  8567              02253 	STA CVB_X_ENEMY2
4AD3                    02254 	; 	y_enemy2 = 96
4AD3  A960              02255 	LDA #96
4AD5  8551              02256 	STA CVB_Y_ENEMY2
4AD7                    02257 	; 	enemy2_frame = 32
4AD7  A920              02258 	LDA #32
4AD9  855E              02259 	STA CVB_ENEMY2_FRAME
4ADB                    02260 	; 	x_enemy3 = random(128) + 48
4ADB  201244            02261 	JSR RANDOM
4ADE  297F              02262 	AND #127
4AE0  18                02263 	CLC
4AE1  6930              02264 	ADC #48
4AE3  8568              02265 	STA CVB_X_ENEMY3
4AE5                    02266 	; 	y_enemy3 = 136
4AE5  A988              02267 	LDA #136
4AE7  8552              02268 	STA CVB_Y_ENEMY3
4AE9                    02269 	; 	enemy3_frame = 24
4AE9  A918              02270 	LDA #24
4AEB  8565              02271 	STA CVB_ENEMY3_FRAME
4AED                    02272 	; 
4AED                    02273 	; 	enemy_speed = 0
4AED  A900              02274 	LDA #0
4AEF  855C              02275 	STA CVB_ENEMY_SPEED
4AF1                    02276 	; 
4AF1                    02277 	; 	GOSUB start_song
4AF1  20BE58            02278 	JSR CVB_START_SONG
4AF4                    02279 	; 
4AF4                    02280 	; game_loop:
4AF4                    02281 CVB_GAME_LOOP:
4AF4                    02282 	; 	WHILE 1
4AF4                    02283 CV5:
4AF4                    02284 	; 		WAIT
4AF4  20D646            02285 	JSR WAIT
4AF7                    02286 	; 		GOSUB play_song
4AF7  20C758            02287 	JSR CVB_PLAY_SONG
4AFA                    02288 	; 
4AFA                    02289 	; 		SPRITE 0, y_player - 1, x_player, player_frame, 15
4AFA  A900              02290 	LDA #0
4AFC  48                02291 	PHA
4AFD  A56C              02292 	LDA CVB_Y_PLAYER
4AFF  38                02293 	SEC
4B00  E901              02294 	SBC #1
4B02  852A              02295 	STA SPRITE_DATA
4B04  A564              02296 	LDA CVB_X_PLAYER
4B06  852B              02297 	STA SPRITE_DATA+1
4B08  A556              02298 	LDA CVB_PLAYER_FRAME
4B0A  852C              02299 	STA SPRITE_DATA+2
4B0C  A90F              02300 	LDA #15
4B0E  852D              02301 	STA SPRITE_DATA+3
4B10  68                02302 	PLA
4B11  206442            02303 	JSR UPDATE_SPRITE
4B14                    02304 	; 		SPRITE 1, y_enemy1 - 1, x_enemy1, enemy1_frame, 14
4B14  A901              02305 	LDA #1
4B16  48                02306 	PHA
4B17  A550              02307 	LDA CVB_Y_ENEMY1
4B19  38                02308 	SEC
4B1A  E901              02309 	SBC #1
4B1C  852A              02310 	STA SPRITE_DATA
4B1E  A566              02311 	LDA CVB_X_ENEMY1
4B20  852B              02312 	STA SPRITE_DATA+1
4B22  A55A              02313 	LDA CVB_ENEMY1_FRAME
4B24  852C              02314 	STA SPRITE_DATA+2
4B26  A90E              02315 	LDA #14
4B28  852D              02316 	STA SPRITE_DATA+3
4B2A  68                02317 	PLA
4B2B  206442            02318 	JSR UPDATE_SPRITE
4B2E                    02319 	; 		SPRITE 2, y_enemy2 - 1, x_enemy2, enemy2_frame, 14
4B2E  A902              02320 	LDA #2
4B30  48                02321 	PHA
4B31  A551              02322 	LDA CVB_Y_ENEMY2
4B33  38                02323 	SEC
4B34  E901              02324 	SBC #1
4B36  852A              02325 	STA SPRITE_DATA
4B38  A567              02326 	LDA CVB_X_ENEMY2
4B3A  852B              02327 	STA SPRITE_DATA+1
4B3C  A55E              02328 	LDA CVB_ENEMY2_FRAME
4B3E  852C              02329 	STA SPRITE_DATA+2
4B40  A90E              02330 	LDA #14
4B42  852D              02331 	STA SPRITE_DATA+3
4B44  68                02332 	PLA
4B45  206442            02333 	JSR UPDATE_SPRITE
4B48                    02334 	; 		SPRITE 3, y_enemy3 - 1, x_enemy3, enemy3_frame, 14
4B48  A903              02335 	LDA #3
4B4A  48                02336 	PHA
4B4B  A552              02337 	LDA CVB_Y_ENEMY3
4B4D  38                02338 	SEC
4B4E  E901              02339 	SBC #1
4B50  852A              02340 	STA SPRITE_DATA
4B52  A568              02341 	LDA CVB_X_ENEMY3
4B54  852B              02342 	STA SPRITE_DATA+1
4B56  A565              02343 	LDA CVB_ENEMY3_FRAME
4B58  852C              02344 	STA SPRITE_DATA+2
4B5A  A90E              02345 	LDA #14
4B5C  852D              02346 	STA SPRITE_DATA+3
4B5E  68                02347 	PLA
4B5F  206442            02348 	JSR UPDATE_SPRITE
4B62                    02349 	; 
4B62                    02350 	; 		GOSUB move_player
4B62  204D52            02351 	JSR CVB_MOVE_PLAYER
4B65                    02352 	; 
4B65                    02353 	; 		c = $50 + level * 4
4B65  A559              02354 	LDA CVB_LEVEL
4B67  0A                02355 	ASL A
4B68  0A                02356 	ASL A
4B69  18                02357 	CLC
4B6A  6950              02358 	ADC #80
4B6C  8553              02359 	STA CVB_C
4B6E                    02360 	; 		enemy_speed = enemy_speed + c
4B6E  A55C              02361 	LDA CVB_ENEMY_SPEED
4B70  48                02362 	PHA
4B71  A553              02363 	LDA CVB_C
4B73  8502              02364 	STA TEMP
4B75  68                02365 	PLA
4B76  18                02366 	CLC
4B77  6502              02367 	ADC TEMP
4B79  855C              02368 	STA CVB_ENEMY_SPEED
4B7B                    02369 	; 		WHILE enemy_speed >= $40
4B7B                    02370 CV7:
4B7B  A55C              02371 	LDA CVB_ENEMY_SPEED
4B7D  C940              02372 	CMP #64
4B7F  B003              02373 	BCS CV9
4B81  4C914B            02374 	JMP CV8
4B84                    02375 CV9:
4B84                    02376 	; 			enemy_speed = enemy_speed - $40
4B84  A55C              02377 	LDA CVB_ENEMY_SPEED
4B86  38                02378 	SEC
4B87  E940              02379 	SBC #64
4B89  855C              02380 	STA CVB_ENEMY_SPEED
4B8B                    02381 	; 			GOSUB move_enemies
4B8B  202855            02382 	JSR CVB_MOVE_ENEMIES
4B8E                    02383 	; 		WEND
4B8E  4C7B4B            02384 	JMP CV7
4B91                    02385 CV8:
4B91                    02386 	; 		IF cont1.button THEN
4B91  A520              02387 	LDA JOY1_DATA
4B93  2940              02388 	AND #64
4B95  D003              02389 	BNE CV11
4B97  4C984C            02390 	JMP CV10
4B9A                    02391 CV11:
4B9A                    02392 	; 			IF x_player > 232 AND x_player < 248 AND y_player = 136 THEN
4B9A  A564              02393 	LDA CVB_X_PLAYER
4B9C  C9E9              02394 	CMP #233
4B9E  B003              02395 	BCS CV13
4BA0  A900              02396 	LDA #0
4BA2  2C                02397 	DB $2C
4BA3                    02398 CV13:
4BA3  A9FF              02399 	LDA #255
4BA5  48                02400 	PHA
4BA6  A564              02401 	LDA CVB_X_PLAYER
4BA8  C9F8              02402 	CMP #248
4BAA  9003              02403 	BCC CV14
4BAC  A900              02404 	LDA #0
4BAE  2C                02405 	DB $2C
4BAF                    02406 CV14:
4BAF  A9FF              02407 	LDA #255
4BB1  8502              02408 	STA TEMP
4BB3  68                02409 	PLA
4BB4  2502              02410 	AND TEMP
4BB6  48                02411 	PHA
4BB7  A56C              02412 	LDA CVB_Y_PLAYER
4BB9  C988              02413 	CMP #136
4BBB  F003              02414 	BEQ CV15
4BBD  A900              02415 	LDA #0
4BBF  2C                02416 	DB $2C
4BC0                    02417 CV15:
4BC0  A9FF              02418 	LDA #255
4BC2  8502              02419 	STA TEMP
4BC4  68                02420 	PLA
4BC5  2502              02421 	AND TEMP
4BC7  D003              02422 	BNE CV16
4BC9  4C984C            02423 	JMP CV12
4BCC                    02424 CV16:
4BCC                    02425 	; 				GOSUB sound_off
4BCC  203C59            02426 	JSR CVB_SOUND_OFF
4BCF                    02427 	; 
4BCF                    02428 	; 				FOR c = 1 to 10
4BCF  A901              02429 	LDA #1
4BD1  8553              02430 	STA CVB_C
4BD3                    02431 CV17:
4BD3                    02432 	; 					WAIT
4BD3  20D646            02433 	JSR WAIT
4BD6                    02434 	; 					SOUND 0, 200 - c * 10, 13
4BD6  A9C8              02435 	LDA #200
4BD8  A000              02436 	LDY #0
4BDA  48                02437 	PHA
4BDB  98                02438 	TYA
4BDC  48                02439 	PHA
4BDD  A553              02440 	LDA CVB_C
4BDF  A000              02441 	LDY #0
4BE1  48                02442 	PHA
4BE2  98                02443 	TYA
4BE3  48                02444 	PHA
4BE4  A90A              02445 	LDA #10
4BE6  A000              02446 	LDY #0
4BE8  8502              02447 	STA TEMP
4BEA  8403              02448 	STY TEMP+1
4BEC  20D742            02449 	JSR _MUL16
4BEF  8502              02450 	STA TEMP
4BF1  8403              02451 	STY TEMP+1
4BF3  68                02452 	PLA
4BF4  A8                02453 	TAY
4BF5  68                02454 	PLA
4BF6  38                02455 	SEC
4BF7  E502              02456 	SBC TEMP
4BF9  AA                02457 	TAX
4BFA  98                02458 	TYA
4BFB  E503              02459 	SBC TEMP+1
4BFD  A8                02460 	TAY
4BFE  8A                02461 	TXA
4BFF  A280              02462 	LDX #$80
4C01  204144            02463 	JSR SN76489_FREQ
4C04  A90D              02464 	LDA #13
4C06  A290              02465 	LDX #$90
4C08  206144            02466 	JSR SN76489_VOL
4C0B                    02467 	; 				NEXT c
4C0B  A553              02468 	LDA CVB_C
4C0D  18                02469 	CLC
4C0E  6901              02470 	ADC #1
4C10  8553              02471 	STA CVB_C
4C12  A553              02472 	LDA CVB_C
4C14  C90B              02473 	CMP #11
4C16  B003              02474 	BCS CV18
4C18  4CD34B            02475 	JMP CV17
4C1B                    02476 CV18:
4C1B                    02477 	; 
4C1B                    02478 	; 				level = level + 1
4C1B  A559              02479 	LDA CVB_LEVEL
4C1D  18                02480 	CLC
4C1E  6901              02481 	ADC #1
4C20  8559              02482 	STA CVB_LEVEL
4C22                    02483 	; 				IF level = 6 THEN
4C22  A559              02484 	LDA CVB_LEVEL
4C24  C906              02485 	CMP #6
4C26  F003              02486 	BEQ CV20
4C28  4C954C            02487 	JMP CV19
4C2B                    02488 CV20:
4C2B                    02489 	; 					GOSUB sound_off
4C2B  203C59            02490 	JSR CVB_SOUND_OFF
4C2E                    02491 	; 					PRINT AT 267," YOU WIN! "
4C2E  A90B              02492 	LDA #11
4C30  A001              02493 	LDY #1
4C32  850C              02494 	STA CURSOR
4C34  840D              02495 	STY CURSOR+1
4C36  A942              02496 	LDA #CV21
4C38  A04C              02497 	LDY #CV21>>8
4C3A  A20A              02498 	LDX #10
4C3C  202541            02499 	JSR PRINT_STRING
4C3F  4C4C4C            02500 	JMP CV22
4C42                    02501 CV21:
4C42  20594F552057494E  02502 	DB $20,$59,$4F,$55,$20,$57,$49,$4E
4C4A  2120              02503 	DB $21,$20
4C4C                    02504 CV22:
4C4C                    02505 	; 					#c = FRAME
4C4C  A524              02506 	LDA FRAME
4C4E  A425              02507 	LDY FRAME+1
4C50  855F              02508 	STA CVB_#C
4C52  8460              02509 	STY CVB_#C+1
4C54                    02510 	; 					DO
4C54                    02511 CV23:
4C54                    02512 	; 						WAIT
4C54  20D646            02513 	JSR WAIT
4C57                    02514 	; 					LOOP WHILE FRAME - #c < 300
4C57  A524              02515 	LDA FRAME
4C59  A425              02516 	LDY FRAME+1
4C5B  48                02517 	PHA
4C5C  98                02518 	TYA
4C5D  48                02519 	PHA
4C5E  A55F              02520 	LDA CVB_#C
4C60  A460              02521 	LDY CVB_#C+1
4C62  8502              02522 	STA TEMP
4C64  8403              02523 	STY TEMP+1
4C66  68                02524 	PLA
4C67  A8                02525 	TAY
4C68  68                02526 	PLA
4C69  38                02527 	SEC
4C6A  E502              02528 	SBC TEMP
4C6C  AA                02529 	TAX
4C6D  98                02530 	TYA
4C6E  E503              02531 	SBC TEMP+1
4C70  A8                02532 	TAY
4C71  8A                02533 	TXA
4C72  48                02534 	PHA
4C73  98                02535 	TYA
4C74  48                02536 	PHA
4C75  A92C              02537 	LDA #44
4C77  A001              02538 	LDY #1
4C79  8502              02539 	STA TEMP
4C7B  8403              02540 	STY TEMP+1
4C7D  68                02541 	PLA
4C7E  A8                02542 	TAY
4C7F  68                02543 	PLA
4C80  38                02544 	SEC
4C81  E502              02545 	SBC TEMP
4C83  98                02546 	TYA
4C84  E503              02547 	SBC TEMP+1
4C86  9003              02548 	BCC CV26
4C88  4C8E4C            02549 	JMP CV25
4C8B                    02550 CV26:
4C8B  4C544C            02551 	JMP CV23
4C8E                    02552 CV25:
4C8E                    02553 	; 					level = 1
4C8E  A901              02554 	LDA #1
4C90  8559              02555 	STA CVB_LEVEL
4C92                    02556 	; 					GOTO restart_level
4C92  4C644A            02557 	JMP CVB_RESTART_LEVEL
4C95                    02558 	; 				END IF
4C95                    02559 CV19:
4C95                    02560 	; 				GOTO next_level	
4C95  4CA84A            02561 	JMP CVB_NEXT_LEVEL
4C98                    02562 	; 			END IF
4C98                    02563 CV12:
4C98                    02564 	; 		END IF
4C98                    02565 CV10:
4C98                    02566 	; 		IF ABS(y_player + 1 - y_enemy1) < 8 THEN
4C98  A56C              02567 	LDA CVB_Y_PLAYER
4C9A  A000              02568 	LDY #0
4C9C  18                02569 	CLC
4C9D  6901              02570 	ADC #1
4C9F  48                02571 	PHA
4CA0  98                02572 	TYA
4CA1  6900              02573 	ADC #0
4CA3  A8                02574 	TAY
4CA4  68                02575 	PLA
4CA5  48                02576 	PHA
4CA6  98                02577 	TYA
4CA7  48                02578 	PHA
4CA8  A550              02579 	LDA CVB_Y_ENEMY1
4CAA  A000              02580 	LDY #0
4CAC  8502              02581 	STA TEMP
4CAE  8403              02582 	STY TEMP+1
4CB0  68                02583 	PLA
4CB1  A8                02584 	TAY
4CB2  68                02585 	PLA
4CB3  38                02586 	SEC
4CB4  E502              02587 	SBC TEMP
4CB6  AA                02588 	TAX
4CB7  98                02589 	TYA
4CB8  E503              02590 	SBC TEMP+1
4CBA  A8                02591 	TAY
4CBB  8A                02592 	TXA
4CBC  208442            02593 	JSR _ABS16
4CBF  48                02594 	PHA
4CC0  98                02595 	TYA
4CC1  48                02596 	PHA
4CC2  A908              02597 	LDA #8
4CC4  A000              02598 	LDY #0
4CC6  8502              02599 	STA TEMP
4CC8  8403              02600 	STY TEMP+1
4CCA  68                02601 	PLA
4CCB  A8                02602 	TAY
4CCC  68                02603 	PLA
4CCD  38                02604 	SEC
4CCE  E502              02605 	SBC TEMP
4CD0  98                02606 	TYA
4CD1  E503              02607 	SBC TEMP+1
4CD3  9003              02608 	BCC CV28
4CD5  4C1B4D            02609 	JMP CV27
4CD8                    02610 CV28:
4CD8                    02611 	; 			IF ABS(x_player + 1 - x_enemy1) < 8 THEN GOTO player_dies
4CD8  A564              02612 	LDA CVB_X_PLAYER
4CDA  A000              02613 	LDY #0
4CDC  18                02614 	CLC
4CDD  6901              02615 	ADC #1
4CDF  48                02616 	PHA
4CE0  98                02617 	TYA
4CE1  6900              02618 	ADC #0
4CE3  A8                02619 	TAY
4CE4  68                02620 	PLA
4CE5  48                02621 	PHA
4CE6  98                02622 	TYA
4CE7  48                02623 	PHA
4CE8  A566              02624 	LDA CVB_X_ENEMY1
4CEA  A000              02625 	LDY #0
4CEC  8502              02626 	STA TEMP
4CEE  8403              02627 	STY TEMP+1
4CF0  68                02628 	PLA
4CF1  A8                02629 	TAY
4CF2  68                02630 	PLA
4CF3  38                02631 	SEC
4CF4  E502              02632 	SBC TEMP
4CF6  AA                02633 	TAX
4CF7  98                02634 	TYA
4CF8  E503              02635 	SBC TEMP+1
4CFA  A8                02636 	TAY
4CFB  8A                02637 	TXA
4CFC  208442            02638 	JSR _ABS16
4CFF  48                02639 	PHA
4D00  98                02640 	TYA
4D01  48                02641 	PHA
4D02  A908              02642 	LDA #8
4D04  A000              02643 	LDY #0
4D06  8502              02644 	STA TEMP
4D08  8403              02645 	STY TEMP+1
4D0A  68                02646 	PLA
4D0B  A8                02647 	TAY
4D0C  68                02648 	PLA
4D0D  38                02649 	SEC
4D0E  E502              02650 	SBC TEMP
4D10  98                02651 	TYA
4D11  E503              02652 	SBC TEMP+1
4D13  9003              02653 	BCC CV30
4D15  4C1B4D            02654 	JMP CV29
4D18                    02655 CV30:
4D18  4C244E            02656 	JMP CVB_PLAYER_DIES
4D1B                    02657 CV29:
4D1B                    02658 	; 		END IF
4D1B                    02659 CV27:
4D1B                    02660 	; 		IF ABS(y_player + 1 - y_enemy2) < 8 THEN
4D1B  A56C              02661 	LDA CVB_Y_PLAYER
4D1D  A000              02662 	LDY #0
4D1F  18                02663 	CLC
4D20  6901              02664 	ADC #1
4D22  48                02665 	PHA
4D23  98                02666 	TYA
4D24  6900              02667 	ADC #0
4D26  A8                02668 	TAY
4D27  68                02669 	PLA
4D28  48                02670 	PHA
4D29  98                02671 	TYA
4D2A  48                02672 	PHA
4D2B  A551              02673 	LDA CVB_Y_ENEMY2
4D2D  A000              02674 	LDY #0
4D2F  8502              02675 	STA TEMP
4D31  8403              02676 	STY TEMP+1
4D33  68                02677 	PLA
4D34  A8                02678 	TAY
4D35  68                02679 	PLA
4D36  38                02680 	SEC
4D37  E502              02681 	SBC TEMP
4D39  AA                02682 	TAX
4D3A  98                02683 	TYA
4D3B  E503              02684 	SBC TEMP+1
4D3D  A8                02685 	TAY
4D3E  8A                02686 	TXA
4D3F  208442            02687 	JSR _ABS16
4D42  48                02688 	PHA
4D43  98                02689 	TYA
4D44  48                02690 	PHA
4D45  A908              02691 	LDA #8
4D47  A000              02692 	LDY #0
4D49  8502              02693 	STA TEMP
4D4B  8403              02694 	STY TEMP+1
4D4D  68                02695 	PLA
4D4E  A8                02696 	TAY
4D4F  68                02697 	PLA
4D50  38                02698 	SEC
4D51  E502              02699 	SBC TEMP
4D53  98                02700 	TYA
4D54  E503              02701 	SBC TEMP+1
4D56  9003              02702 	BCC CV32
4D58  4C9E4D            02703 	JMP CV31
4D5B                    02704 CV32:
4D5B                    02705 	; 			IF ABS(x_player + 1 - x_enemy2) < 8 THEN GOTO player_dies
4D5B  A564              02706 	LDA CVB_X_PLAYER
4D5D  A000              02707 	LDY #0
4D5F  18                02708 	CLC
4D60  6901              02709 	ADC #1
4D62  48                02710 	PHA
4D63  98                02711 	TYA
4D64  6900              02712 	ADC #0
4D66  A8                02713 	TAY
4D67  68                02714 	PLA
4D68  48                02715 	PHA
4D69  98                02716 	TYA
4D6A  48                02717 	PHA
4D6B  A567              02718 	LDA CVB_X_ENEMY2
4D6D  A000              02719 	LDY #0
4D6F  8502              02720 	STA TEMP
4D71  8403              02721 	STY TEMP+1
4D73  68                02722 	PLA
4D74  A8                02723 	TAY
4D75  68                02724 	PLA
4D76  38                02725 	SEC
4D77  E502              02726 	SBC TEMP
4D79  AA                02727 	TAX
4D7A  98                02728 	TYA
4D7B  E503              02729 	SBC TEMP+1
4D7D  A8                02730 	TAY
4D7E  8A                02731 	TXA
4D7F  208442            02732 	JSR _ABS16
4D82  48                02733 	PHA
4D83  98                02734 	TYA
4D84  48                02735 	PHA
4D85  A908              02736 	LDA #8
4D87  A000              02737 	LDY #0
4D89  8502              02738 	STA TEMP
4D8B  8403              02739 	STY TEMP+1
4D8D  68                02740 	PLA
4D8E  A8                02741 	TAY
4D8F  68                02742 	PLA
4D90  38                02743 	SEC
4D91  E502              02744 	SBC TEMP
4D93  98                02745 	TYA
4D94  E503              02746 	SBC TEMP+1
4D96  9003              02747 	BCC CV34
4D98  4C9E4D            02748 	JMP CV33
4D9B                    02749 CV34:
4D9B  4C244E            02750 	JMP CVB_PLAYER_DIES
4D9E                    02751 CV33:
4D9E                    02752 	; 		END IF
4D9E                    02753 CV31:
4D9E                    02754 	; 		IF ABS(y_player + 1 - y_enemy3) < 8 THEN
4D9E  A56C              02755 	LDA CVB_Y_PLAYER
4DA0  A000              02756 	LDY #0
4DA2  18                02757 	CLC
4DA3  6901              02758 	ADC #1
4DA5  48                02759 	PHA
4DA6  98                02760 	TYA
4DA7  6900              02761 	ADC #0
4DA9  A8                02762 	TAY
4DAA  68                02763 	PLA
4DAB  48                02764 	PHA
4DAC  98                02765 	TYA
4DAD  48                02766 	PHA
4DAE  A552              02767 	LDA CVB_Y_ENEMY3
4DB0  A000              02768 	LDY #0
4DB2  8502              02769 	STA TEMP
4DB4  8403              02770 	STY TEMP+1
4DB6  68                02771 	PLA
4DB7  A8                02772 	TAY
4DB8  68                02773 	PLA
4DB9  38                02774 	SEC
4DBA  E502              02775 	SBC TEMP
4DBC  AA                02776 	TAX
4DBD  98                02777 	TYA
4DBE  E503              02778 	SBC TEMP+1
4DC0  A8                02779 	TAY
4DC1  8A                02780 	TXA
4DC2  208442            02781 	JSR _ABS16
4DC5  48                02782 	PHA
4DC6  98                02783 	TYA
4DC7  48                02784 	PHA
4DC8  A908              02785 	LDA #8
4DCA  A000              02786 	LDY #0
4DCC  8502              02787 	STA TEMP
4DCE  8403              02788 	STY TEMP+1
4DD0  68                02789 	PLA
4DD1  A8                02790 	TAY
4DD2  68                02791 	PLA
4DD3  38                02792 	SEC
4DD4  E502              02793 	SBC TEMP
4DD6  98                02794 	TYA
4DD7  E503              02795 	SBC TEMP+1
4DD9  9003              02796 	BCC CV36
4DDB  4C214E            02797 	JMP CV35
4DDE                    02798 CV36:
4DDE                    02799 	; 			IF ABS(x_player + 1 - x_enemy3) < 8 THEN GOTO player_dies
4DDE  A564              02800 	LDA CVB_X_PLAYER
4DE0  A000              02801 	LDY #0
4DE2  18                02802 	CLC
4DE3  6901              02803 	ADC #1
4DE5  48                02804 	PHA
4DE6  98                02805 	TYA
4DE7  6900              02806 	ADC #0
4DE9  A8                02807 	TAY
4DEA  68                02808 	PLA
4DEB  48                02809 	PHA
4DEC  98                02810 	TYA
4DED  48                02811 	PHA
4DEE  A568              02812 	LDA CVB_X_ENEMY3
4DF0  A000              02813 	LDY #0
4DF2  8502              02814 	STA TEMP
4DF4  8403              02815 	STY TEMP+1
4DF6  68                02816 	PLA
4DF7  A8                02817 	TAY
4DF8  68                02818 	PLA
4DF9  38                02819 	SEC
4DFA  E502              02820 	SBC TEMP
4DFC  AA                02821 	TAX
4DFD  98                02822 	TYA
4DFE  E503              02823 	SBC TEMP+1
4E00  A8                02824 	TAY
4E01  8A                02825 	TXA
4E02  208442            02826 	JSR _ABS16
4E05  48                02827 	PHA
4E06  98                02828 	TYA
4E07  48                02829 	PHA
4E08  A908              02830 	LDA #8
4E0A  A000              02831 	LDY #0
4E0C  8502              02832 	STA TEMP
4E0E  8403              02833 	STY TEMP+1
4E10  68                02834 	PLA
4E11  A8                02835 	TAY
4E12  68                02836 	PLA
4E13  38                02837 	SEC
4E14  E502              02838 	SBC TEMP
4E16  98                02839 	TYA
4E17  E503              02840 	SBC TEMP+1
4E19  9003              02841 	BCC CV38
4E1B  4C214E            02842 	JMP CV37
4E1E                    02843 CV38:
4E1E  4C244E            02844 	JMP CVB_PLAYER_DIES
4E21                    02845 CV37:
4E21                    02846 	; 		END IF
4E21                    02847 CV35:
4E21                    02848 	; 	WEND
4E21  4CF44A            02849 	JMP CV5
4E24                    02850 CV6:
4E24                    02851 	; 
4E24                    02852 	; player_dies:
4E24                    02853 CVB_PLAYER_DIES:
4E24                    02854 	; 	GOSUB sound_off
4E24  203C59            02855 	JSR CVB_SOUND_OFF
4E27                    02856 	; 
4E27                    02857 	; 	SOUND 0,640,13
4E27  A980              02858 	LDA #128
4E29  A002              02859 	LDY #2
4E2B  A280              02860 	LDX #$80
4E2D  204144            02861 	JSR SN76489_FREQ
4E30  A90D              02862 	LDA #13
4E32  A290              02863 	LDX #$90
4E34  206144            02864 	JSR SN76489_VOL
4E37                    02865 	; 	SOUND 1,320,13
4E37  A940              02866 	LDA #64
4E39  A001              02867 	LDY #1
4E3B  A2A0              02868 	LDX #$A0
4E3D  204144            02869 	JSR SN76489_FREQ
4E40  A90D              02870 	LDA #13
4E42  A2B0              02871 	LDX #$B0
4E44  206144            02872 	JSR SN76489_VOL
4E47                    02873 	; 	SOUND 2,160,13
4E47  A9A0              02874 	LDA #160
4E49  A000              02875 	LDY #0
4E4B  A2C0              02876 	LDX #$C0
4E4D  204144            02877 	JSR SN76489_FREQ
4E50  A90D              02878 	LDA #13
4E52  A2D0              02879 	LDX #$D0
4E54  206144            02880 	JSR SN76489_VOL
4E57                    02881 	; 
4E57                    02882 	; 	player_frame = 0
4E57  A900              02883 	LDA #0
4E59  8556              02884 	STA CVB_PLAYER_FRAME
4E5B                    02885 	; 	FOR c = 0 TO 30
4E5B  A900              02886 	LDA #0
4E5D  8553              02887 	STA CVB_C
4E5F                    02888 CV39:
4E5F                    02889 	; 		WAIT
4E5F  20D646            02890 	JSR WAIT
4E62                    02891 	; 		WAIT
4E62  20D646            02892 	JSR WAIT
4E65                    02893 	; 		player_frame = player_frame XOR 8
4E65  A556              02894 	LDA CVB_PLAYER_FRAME
4E67  4908              02895 	EOR #8
4E69  8556              02896 	STA CVB_PLAYER_FRAME
4E6B                    02897 	; 		SPRITE 0, y_player - 1, x_player, player_frame, 15
4E6B  A900              02898 	LDA #0
4E6D  48                02899 	PHA
4E6E  A56C              02900 	LDA CVB_Y_PLAYER
4E70  38                02901 	SEC
4E71  E901              02902 	SBC #1
4E73  852A              02903 	STA SPRITE_DATA
4E75  A564              02904 	LDA CVB_X_PLAYER
4E77  852B              02905 	STA SPRITE_DATA+1
4E79  A556              02906 	LDA CVB_PLAYER_FRAME
4E7B  852C              02907 	STA SPRITE_DATA+2
4E7D  A90F              02908 	LDA #15
4E7F  852D              02909 	STA SPRITE_DATA+3
4E81  68                02910 	PLA
4E82  206442            02911 	JSR UPDATE_SPRITE
4E85                    02912 	; 	NEXT c
4E85  A553              02913 	LDA CVB_C
4E87  18                02914 	CLC
4E88  6901              02915 	ADC #1
4E8A  8553              02916 	STA CVB_C
4E8C  A553              02917 	LDA CVB_C
4E8E  C91F              02918 	CMP #31
4E90  B003              02919 	BCS CV40
4E92  4C5F4E            02920 	JMP CV39
4E95                    02921 CV40:
4E95                    02922 	; 
4E95                    02923 	; 	GOSUB sound_off
4E95  203C59            02924 	JSR CVB_SOUND_OFF
4E98                    02925 	; 
4E98                    02926 	; 	DO
4E98                    02927 CV41:
4E98                    02928 	; 		WAIT
4E98  20D646            02929 	JSR WAIT
4E9B                    02930 	; 		SOUND 0,200 - y_player,13
4E9B  A9C8              02931 	LDA #200
4E9D  A000              02932 	LDY #0
4E9F  48                02933 	PHA
4EA0  98                02934 	TYA
4EA1  48                02935 	PHA
4EA2  A56C              02936 	LDA CVB_Y_PLAYER
4EA4  A000              02937 	LDY #0
4EA6  8502              02938 	STA TEMP
4EA8  8403              02939 	STY TEMP+1
4EAA  68                02940 	PLA
4EAB  A8                02941 	TAY
4EAC  68                02942 	PLA
4EAD  38                02943 	SEC
4EAE  E502              02944 	SBC TEMP
4EB0  AA                02945 	TAX
4EB1  98                02946 	TYA
4EB2  E503              02947 	SBC TEMP+1
4EB4  A8                02948 	TAY
4EB5  8A                02949 	TXA
4EB6  A280              02950 	LDX #$80
4EB8  204144            02951 	JSR SN76489_FREQ
4EBB  A90D              02952 	LDA #13
4EBD  A290              02953 	LDX #$90
4EBF  206144            02954 	JSR SN76489_VOL
4EC2                    02955 	; 		player_frame = player_frame XOR 8
4EC2  A556              02956 	LDA CVB_PLAYER_FRAME
4EC4  4908              02957 	EOR #8
4EC6  8556              02958 	STA CVB_PLAYER_FRAME
4EC8                    02959 	; 		SPRITE 0, y_player - 1, x_player, player_frame, 15
4EC8  A900              02960 	LDA #0
4ECA  48                02961 	PHA
4ECB  A56C              02962 	LDA CVB_Y_PLAYER
4ECD  38                02963 	SEC
4ECE  E901              02964 	SBC #1
4ED0  852A              02965 	STA SPRITE_DATA
4ED2  A564              02966 	LDA CVB_X_PLAYER
4ED4  852B              02967 	STA SPRITE_DATA+1
4ED6  A556              02968 	LDA CVB_PLAYER_FRAME
4ED8  852C              02969 	STA SPRITE_DATA+2
4EDA  A90F              02970 	LDA #15
4EDC  852D              02971 	STA SPRITE_DATA+3
4EDE  68                02972 	PLA
4EDF  206442            02973 	JSR UPDATE_SPRITE
4EE2                    02974 	; 		y_player = y_player + 2
4EE2  A56C              02975 	LDA CVB_Y_PLAYER
4EE4  18                02976 	CLC
4EE5  6902              02977 	ADC #2
4EE7  856C              02978 	STA CVB_Y_PLAYER
4EE9                    02979 	; 	LOOP WHILE y_player < 160
4EE9  A56C              02980 	LDA CVB_Y_PLAYER
4EEB  C9A0              02981 	CMP #160
4EED  9003              02982 	BCC CV44
4EEF  4CF54E            02983 	JMP CV43
4EF2                    02984 CV44:
4EF2  4C984E            02985 	JMP CV41
4EF5                    02986 CV43:
4EF5                    02987 	; 
4EF5                    02988 	; 	GOSUB sound_off
4EF5  203C59            02989 	JSR CVB_SOUND_OFF
4EF8                    02990 	; 
4EF8                    02991 	; 	IF lives = 0 THEN
4EF8  A558              02992 	LDA CVB_LIVES
4EFA  C900              02993 	CMP #0
4EFC  F003              02994 	BEQ CV46
4EFE  4C654F            02995 	JMP CV45
4F01                    02996 CV46:
4F01                    02997 	; 		PRINT AT 267," GAME OVER "
4F01  A90B              02998 	LDA #11
4F03  A001              02999 	LDY #1
4F05  850C              03000 	STA CURSOR
4F07  840D              03001 	STY CURSOR+1
4F09  A915              03002 	LDA #CV47
4F0B  A04F              03003 	LDY #CV47>>8
4F0D  A20B              03004 	LDX #11
4F0F  202541            03005 	JSR PRINT_STRING
4F12  4C204F            03006 	JMP CV48
4F15                    03007 CV47:
4F15  2047414D45204F56  03008 	DB $20,$47,$41,$4D,$45,$20,$4F,$56
4F1D  455220            03009 	DB $45,$52,$20
4F20                    03010 CV48:
4F20                    03011 	; 		#c = FRAME
4F20  A524              03012 	LDA FRAME
4F22  A425              03013 	LDY FRAME+1
4F24  855F              03014 	STA CVB_#C
4F26  8460              03015 	STY CVB_#C+1
4F28                    03016 	; 		DO
4F28                    03017 CV49:
4F28                    03018 	; 			WAIT
4F28  20D646            03019 	JSR WAIT
4F2B                    03020 	; 		LOOP WHILE FRAME - #c < 300
4F2B  A524              03021 	LDA FRAME
4F2D  A425              03022 	LDY FRAME+1
4F2F  48                03023 	PHA
4F30  98                03024 	TYA
4F31  48                03025 	PHA
4F32  A55F              03026 	LDA CVB_#C
4F34  A460              03027 	LDY CVB_#C+1
4F36  8502              03028 	STA TEMP
4F38  8403              03029 	STY TEMP+1
4F3A  68                03030 	PLA
4F3B  A8                03031 	TAY
4F3C  68                03032 	PLA
4F3D  38                03033 	SEC
4F3E  E502              03034 	SBC TEMP
4F40  AA                03035 	TAX
4F41  98                03036 	TYA
4F42  E503              03037 	SBC TEMP+1
4F44  A8                03038 	TAY
4F45  8A                03039 	TXA
4F46  48                03040 	PHA
4F47  98                03041 	TYA
4F48  48                03042 	PHA
4F49  A92C              03043 	LDA #44
4F4B  A001              03044 	LDY #1
4F4D  8502              03045 	STA TEMP
4F4F  8403              03046 	STY TEMP+1
4F51  68                03047 	PLA
4F52  A8                03048 	TAY
4F53  68                03049 	PLA
4F54  38                03050 	SEC
4F55  E502              03051 	SBC TEMP
4F57  98                03052 	TYA
4F58  E503              03053 	SBC TEMP+1
4F5A  9003              03054 	BCC CV52
4F5C  4C624F            03055 	JMP CV51
4F5F                    03056 CV52:
4F5F  4C284F            03057 	JMP CV49
4F62                    03058 CV51:
4F62                    03059 	; 		GOTO restart_game
4F62  4C5C4A            03060 	JMP CVB_RESTART_GAME
4F65                    03061 	; 	END IF
4F65                    03062 CV45:
4F65                    03063 	; 	lives = lives - 1
4F65  A558              03064 	LDA CVB_LIVES
4F67  38                03065 	SEC
4F68  E901              03066 	SBC #1
4F6A  8558              03067 	STA CVB_LIVES
4F6C                    03068 	; 	GOTO restart_level
4F6C  4C644A            03069 	JMP CVB_RESTART_LEVEL
4F6F                    03070 	; 
4F6F                    03071 	; 	'
4F6F                    03072 	; 	' Draw the current level.
4F6F                    03073 	; 	'
4F6F                    03074 	; draw_level:	PROCEDURE
4F6F                    03075 CVB_DRAW_LEVEL:
4F6F                    03076 	; 
4F6F                    03077 	; 	' Get the base character to draw the level.
4F6F                    03078 	; 	base_character = 128 + (level - 1) * 4
4F6F  A559              03079 	LDA CVB_LEVEL
4F71  38                03080 	SEC
4F72  E901              03081 	SBC #1
4F74  0A                03082 	ASL A
4F75  0A                03083 	ASL A
4F76  18                03084 	CLC
4F77  6980              03085 	ADC #128
4F79  8563              03086 	STA CVB_BASE_CHARACTER
4F7B                    03087 	; 
4F7B                    03088 	; 	' Draw the background.
4F7B                    03089 	; 	FOR #c = $1800 TO $1a7c STEP 4
4F7B  A900              03090 	LDA #0
4F7D  A018              03091 	LDY #24
4F7F  855F              03092 	STA CVB_#C
4F81  8460              03093 	STY CVB_#C+1
4F83                    03094 CV53:
4F83                    03095 	; 		VPOKE #c, base_character
4F83  A563              03096 	LDA CVB_BASE_CHARACTER
4F85  48                03097 	PHA
4F86  A55F              03098 	LDA CVB_#C
4F88  A460              03099 	LDY CVB_#C+1
4F8A  8502              03100 	STA TEMP
4F8C  8403              03101 	STY TEMP+1
4F8E  68                03102 	PLA
4F8F  AA                03103 	TAX
4F90  A502              03104 	LDA TEMP
4F92  78                03105 	SEI
4F93  201E40            03106 	JSR WRTVRM
4F96  58                03107 	CLI
4F97                    03108 	; 		VPOKE #c + 1, base_character
4F97  A563              03109 	LDA CVB_BASE_CHARACTER
4F99  48                03110 	PHA
4F9A  A55F              03111 	LDA CVB_#C
4F9C  A460              03112 	LDY CVB_#C+1
4F9E  18                03113 	CLC
4F9F  6901              03114 	ADC #1
4FA1  48                03115 	PHA
4FA2  98                03116 	TYA
4FA3  6900              03117 	ADC #0
4FA5  A8                03118 	TAY
4FA6  68                03119 	PLA
4FA7  8502              03120 	STA TEMP
4FA9  8403              03121 	STY TEMP+1
4FAB  68                03122 	PLA
4FAC  AA                03123 	TAX
4FAD  A502              03124 	LDA TEMP
4FAF  78                03125 	SEI
4FB0  201E40            03126 	JSR WRTVRM
4FB3  58                03127 	CLI
4FB4                    03128 	; 		VPOKE #c + 2, base_character
4FB4  A563              03129 	LDA CVB_BASE_CHARACTER
4FB6  48                03130 	PHA
4FB7  A55F              03131 	LDA CVB_#C
4FB9  A460              03132 	LDY CVB_#C+1
4FBB  18                03133 	CLC
4FBC  6902              03134 	ADC #2
4FBE  48                03135 	PHA
4FBF  98                03136 	TYA
4FC0  6900              03137 	ADC #0
4FC2  A8                03138 	TAY
4FC3  68                03139 	PLA
4FC4  8502              03140 	STA TEMP
4FC6  8403              03141 	STY TEMP+1
4FC8  68                03142 	PLA
4FC9  AA                03143 	TAX
4FCA  A502              03144 	LDA TEMP
4FCC  78                03145 	SEI
4FCD  201E40            03146 	JSR WRTVRM
4FD0  58                03147 	CLI
4FD1                    03148 	; 		VPOKE #c + 3, base_character + 1.
4FD1  A563              03149 	LDA CVB_BASE_CHARACTER
4FD3  18                03150 	CLC
4FD4  6901              03151 	ADC #1
4FD6  48                03152 	PHA
4FD7  A55F              03153 	LDA CVB_#C
4FD9  A460              03154 	LDY CVB_#C+1
4FDB  18                03155 	CLC
4FDC  6903              03156 	ADC #3
4FDE  48                03157 	PHA
4FDF  98                03158 	TYA
4FE0  6900              03159 	ADC #0
4FE2  A8                03160 	TAY
4FE3  68                03161 	PLA
4FE4  8502              03162 	STA TEMP
4FE6  8403              03163 	STY TEMP+1
4FE8  68                03164 	PLA
4FE9  AA                03165 	TAX
4FEA  A502              03166 	LDA TEMP
4FEC  78                03167 	SEI
4FED  201E40            03168 	JSR WRTVRM
4FF0  58                03169 	CLI
4FF1                    03170 	; 	NEXT #c
4FF1  A55F              03171 	LDA CVB_#C
4FF3  A460              03172 	LDY CVB_#C+1
4FF5  18                03173 	CLC
4FF6  6904              03174 	ADC #4
4FF8  48                03175 	PHA
4FF9  98                03176 	TYA
4FFA  6900              03177 	ADC #0
4FFC  A8                03178 	TAY
4FFD  68                03179 	PLA
4FFE  855F              03180 	STA CVB_#C
5000  8460              03181 	STY CVB_#C+1
5002  A55F              03182 	LDA CVB_#C
5004  A460              03183 	LDY CVB_#C+1
5006  48                03184 	PHA
5007  98                03185 	TYA
5008  48                03186 	PHA
5009  A97D              03187 	LDA #125
500B  A01A              03188 	LDY #26
500D  8502              03189 	STA TEMP
500F  8403              03190 	STY TEMP+1
5011  68                03191 	PLA
5012  A8                03192 	TAY
5013  68                03193 	PLA
5014  38                03194 	SEC
5015  E502              03195 	SBC TEMP
5017  98                03196 	TYA
5018  E503              03197 	SBC TEMP+1
501A  B003              03198 	BCS CV54
501C  4C834F            03199 	JMP CV53
501F                    03200 CV54:
501F                    03201 	; 
501F                    03202 	; 	' Draw over the floors.
501F                    03203 	; 	FOR #c = $1880 TO $1A60 STEP 160
501F  A980              03204 	LDA #128
5021  A018              03205 	LDY #24
5023  855F              03206 	STA CVB_#C
5025  8460              03207 	STY CVB_#C+1
5027                    03208 CV55:
5027                    03209 	; 		FOR #d = #c TO #c + 31
5027  A55F              03210 	LDA CVB_#C
5029  A460              03211 	LDY CVB_#C+1
502B  8561              03212 	STA CVB_#D
502D  8462              03213 	STY CVB_#D+1
502F                    03214 CV56:
502F                    03215 	; 			VPOKE #d, base_character + 2.
502F  A563              03216 	LDA CVB_BASE_CHARACTER
5031  18                03217 	CLC
5032  6902              03218 	ADC #2
5034  48                03219 	PHA
5035  A561              03220 	LDA CVB_#D
5037  A462              03221 	LDY CVB_#D+1
5039  8502              03222 	STA TEMP
503B  8403              03223 	STY TEMP+1
503D  68                03224 	PLA
503E  AA                03225 	TAX
503F  A502              03226 	LDA TEMP
5041  78                03227 	SEI
5042  201E40            03228 	JSR WRTVRM
5045  58                03229 	CLI
5046                    03230 	; 		NEXT #d
5046  A561              03231 	LDA CVB_#D
5048  A462              03232 	LDY CVB_#D+1
504A  18                03233 	CLC
504B  6901              03234 	ADC #1
504D  48                03235 	PHA
504E  98                03236 	TYA
504F  6900              03237 	ADC #0
5051  A8                03238 	TAY
5052  68                03239 	PLA
5053  8561              03240 	STA CVB_#D
5055  8462              03241 	STY CVB_#D+1
5057  A55F              03242 	LDA CVB_#C
5059  A460              03243 	LDY CVB_#C+1
505B  18                03244 	CLC
505C  691F              03245 	ADC #31
505E  48                03246 	PHA
505F  98                03247 	TYA
5060  6900              03248 	ADC #0
5062  A8                03249 	TAY
5063  68                03250 	PLA
5064  48                03251 	PHA
5065  98                03252 	TYA
5066  48                03253 	PHA
5067  A561              03254 	LDA CVB_#D
5069  A462              03255 	LDY CVB_#D+1
506B  8502              03256 	STA TEMP
506D  8403              03257 	STY TEMP+1
506F  68                03258 	PLA
5070  A8                03259 	TAY
5071  68                03260 	PLA
5072  38                03261 	SEC
5073  E502              03262 	SBC TEMP
5075  98                03263 	TYA
5076  E503              03264 	SBC TEMP+1
5078  9003              03265 	BCC CV57
507A  4C2F50            03266 	JMP CV56
507D                    03267 CV57:
507D                    03268 	; 	NEXT #c
507D  A55F              03269 	LDA CVB_#C
507F  A460              03270 	LDY CVB_#C+1
5081  18                03271 	CLC
5082  69A0              03272 	ADC #160
5084  48                03273 	PHA
5085  98                03274 	TYA
5086  6900              03275 	ADC #0
5088  A8                03276 	TAY
5089  68                03277 	PLA
508A  855F              03278 	STA CVB_#C
508C  8460              03279 	STY CVB_#C+1
508E  A55F              03280 	LDA CVB_#C
5090  A460              03281 	LDY CVB_#C+1
5092  48                03282 	PHA
5093  98                03283 	TYA
5094  48                03284 	PHA
5095  A961              03285 	LDA #97
5097  A01A              03286 	LDY #26
5099  8502              03287 	STA TEMP
509B  8403              03288 	STY TEMP+1
509D  68                03289 	PLA
509E  A8                03290 	TAY
509F  68                03291 	PLA
50A0  38                03292 	SEC
50A1  E502              03293 	SBC TEMP
50A3  98                03294 	TYA
50A4  E503              03295 	SBC TEMP+1
50A6  B003              03296 	BCS CV58
50A8  4C2750            03297 	JMP CV55
50AB                    03298 CV58:
50AB                    03299 	; 
50AB                    03300 	; 	' Draw the ladders.
50AB                    03301 	; 	ladders = 6 - level
50AB  A906              03302 	LDA #6
50AD  A000              03303 	LDY #0
50AF  48                03304 	PHA
50B0  98                03305 	TYA
50B1  48                03306 	PHA
50B2  A559              03307 	LDA CVB_LEVEL
50B4  A000              03308 	LDY #0
50B6  8502              03309 	STA TEMP
50B8  8403              03310 	STY TEMP+1
50BA  68                03311 	PLA
50BB  A8                03312 	TAY
50BC  68                03313 	PLA
50BD  38                03314 	SEC
50BE  E502              03315 	SBC TEMP
50C0  AA                03316 	TAX
50C1  98                03317 	TYA
50C2  E503              03318 	SBC TEMP+1
50C4  A8                03319 	TAY
50C5  8A                03320 	TXA
50C6  856A              03321 	STA CVB_LADDERS
50C8                    03322 	; 
50C8                    03323 	; 	FOR #c = $1880 TO $19C0 STEP 160
50C8  A980              03324 	LDA #128
50CA  A018              03325 	LDY #24
50CC  855F              03326 	STA CVB_#C
50CE  8460              03327 	STY CVB_#C+1
50D0                    03328 CV59:
50D0                    03329 	; 		FOR d = 1 TO ladders
50D0  A901              03330 	LDA #1
50D2  8554              03331 	STA CVB_D
50D4                    03332 CV60:
50D4                    03333 	; 			e = RANDOM(28) + 2
50D4  201244            03334 	JSR RANDOM
50D7  48                03335 	PHA
50D8  98                03336 	TYA
50D9  48                03337 	PHA
50DA  A91C              03338 	LDA #28
50DC  A000              03339 	LDY #0
50DE  8502              03340 	STA TEMP
50E0  8403              03341 	STY TEMP+1
50E2  20CC43            03342 	JSR _MOD16
50E5  18                03343 	CLC
50E6  6902              03344 	ADC #2
50E8  8555              03345 	STA CVB_E
50EA                    03346 	; 			VPOKE #c + e, base_character + 3.
50EA  A563              03347 	LDA CVB_BASE_CHARACTER
50EC  18                03348 	CLC
50ED  6903              03349 	ADC #3
50EF  48                03350 	PHA
50F0  A55F              03351 	LDA CVB_#C
50F2  A460              03352 	LDY CVB_#C+1
50F4  48                03353 	PHA
50F5  98                03354 	TYA
50F6  48                03355 	PHA
50F7  A555              03356 	LDA CVB_E
50F9  A000              03357 	LDY #0
50FB  8502              03358 	STA TEMP
50FD  8403              03359 	STY TEMP+1
50FF  68                03360 	PLA
5100  A8                03361 	TAY
5101  68                03362 	PLA
5102  18                03363 	CLC
5103  6502              03364 	ADC TEMP
5105  AA                03365 	TAX
5106  98                03366 	TYA
5107  6503              03367 	ADC TEMP+1
5109  A8                03368 	TAY
510A  8A                03369 	TXA
510B  8502              03370 	STA TEMP
510D  8403              03371 	STY TEMP+1
510F  68                03372 	PLA
5110  AA                03373 	TAX
5111  A502              03374 	LDA TEMP
5113  78                03375 	SEI
5114  201E40            03376 	JSR WRTVRM
5117  58                03377 	CLI
5118                    03378 	; 			VPOKE #c + e + 32, base_character + 3.
5118  A563              03379 	LDA CVB_BASE_CHARACTER
511A  18                03380 	CLC
511B  6903              03381 	ADC #3
511D  48                03382 	PHA
511E  A55F              03383 	LDA CVB_#C
5120  A460              03384 	LDY CVB_#C+1
5122  48                03385 	PHA
5123  98                03386 	TYA
5124  48                03387 	PHA
5125  A555              03388 	LDA CVB_E
5127  A000              03389 	LDY #0
5129  8502              03390 	STA TEMP
512B  8403              03391 	STY TEMP+1
512D  68                03392 	PLA
512E  A8                03393 	TAY
512F  68                03394 	PLA
5130  18                03395 	CLC
5131  6502              03396 	ADC TEMP
5133  AA                03397 	TAX
5134  98                03398 	TYA
5135  6503              03399 	ADC TEMP+1
5137  A8                03400 	TAY
5138  8A                03401 	TXA
5139  18                03402 	CLC
513A  6920              03403 	ADC #32
513C  48                03404 	PHA
513D  98                03405 	TYA
513E  6900              03406 	ADC #0
5140  A8                03407 	TAY
5141  68                03408 	PLA
5142  8502              03409 	STA TEMP
5144  8403              03410 	STY TEMP+1
5146  68                03411 	PLA
5147  AA                03412 	TAX
5148  A502              03413 	LDA TEMP
514A  78                03414 	SEI
514B  201E40            03415 	JSR WRTVRM
514E  58                03416 	CLI
514F                    03417 	; 			VPOKE #c + e + 64, base_character + 3.
514F  A563              03418 	LDA CVB_BASE_CHARACTER
5151  18                03419 	CLC
5152  6903              03420 	ADC #3
5154  48                03421 	PHA
5155  A55F              03422 	LDA CVB_#C
5157  A460              03423 	LDY CVB_#C+1
5159  48                03424 	PHA
515A  98                03425 	TYA
515B  48                03426 	PHA
515C  A555              03427 	LDA CVB_E
515E  A000              03428 	LDY #0
5160  8502              03429 	STA TEMP
5162  8403              03430 	STY TEMP+1
5164  68                03431 	PLA
5165  A8                03432 	TAY
5166  68                03433 	PLA
5167  18                03434 	CLC
5168  6502              03435 	ADC TEMP
516A  AA                03436 	TAX
516B  98                03437 	TYA
516C  6503              03438 	ADC TEMP+1
516E  A8                03439 	TAY
516F  8A                03440 	TXA
5170  18                03441 	CLC
5171  6940              03442 	ADC #64
5173  48                03443 	PHA
5174  98                03444 	TYA
5175  6900              03445 	ADC #0
5177  A8                03446 	TAY
5178  68                03447 	PLA
5179  8502              03448 	STA TEMP
517B  8403              03449 	STY TEMP+1
517D  68                03450 	PLA
517E  AA                03451 	TAX
517F  A502              03452 	LDA TEMP
5181  78                03453 	SEI
5182  201E40            03454 	JSR WRTVRM
5185  58                03455 	CLI
5186                    03456 	; 			VPOKE #c + e + 96, base_character + 3.
5186  A563              03457 	LDA CVB_BASE_CHARACTER
5188  18                03458 	CLC
5189  6903              03459 	ADC #3
518B  48                03460 	PHA
518C  A55F              03461 	LDA CVB_#C
518E  A460              03462 	LDY CVB_#C+1
5190  48                03463 	PHA
5191  98                03464 	TYA
5192  48                03465 	PHA
5193  A555              03466 	LDA CVB_E
5195  A000              03467 	LDY #0
5197  8502              03468 	STA TEMP
5199  8403              03469 	STY TEMP+1
519B  68                03470 	PLA
519C  A8                03471 	TAY
519D  68                03472 	PLA
519E  18                03473 	CLC
519F  6502              03474 	ADC TEMP
51A1  AA                03475 	TAX
51A2  98                03476 	TYA
51A3  6503              03477 	ADC TEMP+1
51A5  A8                03478 	TAY
51A6  8A                03479 	TXA
51A7  18                03480 	CLC
51A8  6960              03481 	ADC #96
51AA  48                03482 	PHA
51AB  98                03483 	TYA
51AC  6900              03484 	ADC #0
51AE  A8                03485 	TAY
51AF  68                03486 	PLA
51B0  8502              03487 	STA TEMP
51B2  8403              03488 	STY TEMP+1
51B4  68                03489 	PLA
51B5  AA                03490 	TAX
51B6  A502              03491 	LDA TEMP
51B8  78                03492 	SEI
51B9  201E40            03493 	JSR WRTVRM
51BC  58                03494 	CLI
51BD                    03495 	; 			VPOKE #c + e + 128, base_character + 3.
51BD  A563              03496 	LDA CVB_BASE_CHARACTER
51BF  18                03497 	CLC
51C0  6903              03498 	ADC #3
51C2  48                03499 	PHA
51C3  A55F              03500 	LDA CVB_#C
51C5  A460              03501 	LDY CVB_#C+1
51C7  48                03502 	PHA
51C8  98                03503 	TYA
51C9  48                03504 	PHA
51CA  A555              03505 	LDA CVB_E
51CC  A000              03506 	LDY #0
51CE  8502              03507 	STA TEMP
51D0  8403              03508 	STY TEMP+1
51D2  68                03509 	PLA
51D3  A8                03510 	TAY
51D4  68                03511 	PLA
51D5  18                03512 	CLC
51D6  6502              03513 	ADC TEMP
51D8  AA                03514 	TAX
51D9  98                03515 	TYA
51DA  6503              03516 	ADC TEMP+1
51DC  A8                03517 	TAY
51DD  8A                03518 	TXA
51DE  18                03519 	CLC
51DF  6980              03520 	ADC #128
51E1  48                03521 	PHA
51E2  98                03522 	TYA
51E3  6900              03523 	ADC #0
51E5  A8                03524 	TAY
51E6  68                03525 	PLA
51E7  8502              03526 	STA TEMP
51E9  8403              03527 	STY TEMP+1
51EB  68                03528 	PLA
51EC  AA                03529 	TAX
51ED  A502              03530 	LDA TEMP
51EF  78                03531 	SEI
51F0  201E40            03532 	JSR WRTVRM
51F3  58                03533 	CLI
51F4                    03534 	; 		NEXT d
51F4  A554              03535 	LDA CVB_D
51F6  18                03536 	CLC
51F7  6901              03537 	ADC #1
51F9  8554              03538 	STA CVB_D
51FB  A56A              03539 	LDA CVB_LADDERS
51FD  48                03540 	PHA
51FE  A554              03541 	LDA CVB_D
5200  8502              03542 	STA TEMP
5202  68                03543 	PLA
5203  C502              03544 	CMP TEMP
5205  9003              03545 	BCC CV61
5207  4CD450            03546 	JMP CV60
520A                    03547 CV61:
520A                    03548 	; 	NEXT #c
520A  A55F              03549 	LDA CVB_#C
520C  A460              03550 	LDY CVB_#C+1
520E  18                03551 	CLC
520F  69A0              03552 	ADC #160
5211  48                03553 	PHA
5212  98                03554 	TYA
5213  6900              03555 	ADC #0
5215  A8                03556 	TAY
5216  68                03557 	PLA
5217  855F              03558 	STA CVB_#C
5219  8460              03559 	STY CVB_#C+1
521B  A55F              03560 	LDA CVB_#C
521D  A460              03561 	LDY CVB_#C+1
521F  48                03562 	PHA
5220  98                03563 	TYA
5221  48                03564 	PHA
5222  A9C1              03565 	LDA #193
5224  A019              03566 	LDY #25
5226  8502              03567 	STA TEMP
5228  8403              03568 	STY TEMP+1
522A  68                03569 	PLA
522B  A8                03570 	TAY
522C  68                03571 	PLA
522D  38                03572 	SEC
522E  E502              03573 	SBC TEMP
5230  98                03574 	TYA
5231  E503              03575 	SBC TEMP+1
5233  B003              03576 	BCS CV62
5235  4CD050            03577 	JMP CV59
5238                    03578 CV62:
5238                    03579 	; 
5238                    03580 	; 	' Draw the "exit".
5238                    03581 	; 	VPOKE $1A5E, 148
5238  A994              03582 	LDA #148
523A  48                03583 	PHA
523B  A95E              03584 	LDA #94
523D  A01A              03585 	LDY #26
523F  8502              03586 	STA TEMP
5241  8403              03587 	STY TEMP+1
5243  68                03588 	PLA
5244  AA                03589 	TAX
5245  A502              03590 	LDA TEMP
5247  78                03591 	SEI
5248  201E40            03592 	JSR WRTVRM
524B  58                03593 	CLI
524C                    03594 	; 
524C                    03595 	; 	END
524C  60                03596 	RTS
524D                    03597 	; 
524D                    03598 	; 	'
524D                    03599 	; 	' Move the player
524D                    03600 	; 	'
524D                    03601 	; move_player:	PROCEDURE
524D                    03602 CVB_MOVE_PLAYER:
524D                    03603 	; 	IF cont1.left THEN
524D  A520              03604 	LDA JOY1_DATA
524F  2908              03605 	AND #8
5251  D003              03606 	BNE CV64
5253  4CB152            03607 	JMP CV63
5256                    03608 CV64:
5256                    03609 	; 		IF y_player % 40 = 16 THEN	' Player aligned on floor
5256  A56C              03610 	LDA CVB_Y_PLAYER
5258  A000              03611 	LDY #0
525A  48                03612 	PHA
525B  98                03613 	TYA
525C  48                03614 	PHA
525D  A928              03615 	LDA #40
525F  A000              03616 	LDY #0
5261  8502              03617 	STA TEMP
5263  8403              03618 	STY TEMP+1
5265  20CC43            03619 	JSR _MOD16
5268  48                03620 	PHA
5269  98                03621 	TYA
526A  48                03622 	PHA
526B  A910              03623 	LDA #16
526D  A000              03624 	LDY #0
526F  8502              03625 	STA TEMP
5271  8403              03626 	STY TEMP+1
5273  68                03627 	PLA
5274  A8                03628 	TAY
5275  68                03629 	PLA
5276  38                03630 	SEC
5277  E502              03631 	SBC TEMP
5279  8502              03632 	STA TEMP
527B  98                03633 	TYA
527C  E503              03634 	SBC TEMP+1
527E  0502              03635 	ORA TEMP
5280  F003              03636 	BEQ CV66
5282  4CB152            03637 	JMP CV65
5285                    03638 CV66:
5285                    03639 	; 			IF x_player > 0 THEN x_player = x_player - 1
5285  A564              03640 	LDA CVB_X_PLAYER
5287  C901              03641 	CMP #1
5289  B003              03642 	BCS CV68
528B  4C9552            03643 	JMP CV67
528E                    03644 CV68:
528E  A564              03645 	LDA CVB_X_PLAYER
5290  38                03646 	SEC
5291  E901              03647 	SBC #1
5293  8564              03648 	STA CVB_X_PLAYER
5295                    03649 CV67:
5295                    03650 	; 			IF FRAME AND 4 THEN player_frame = 8 ELSE player_frame = 12
5295  A524              03651 	LDA FRAME
5297  A425              03652 	LDY FRAME+1
5299  2904              03653 	AND #4
529B  A000              03654 	LDY #0
529D  8402              03655 	STY TEMP
529F  0502              03656 	ORA TEMP
52A1  D003              03657 	BNE CV70
52A3  4CAD52            03658 	JMP CV69
52A6                    03659 CV70:
52A6  A908              03660 	LDA #8
52A8  8556              03661 	STA CVB_PLAYER_FRAME
52AA  4CB152            03662 	JMP CV71
52AD                    03663 CV69:
52AD  A90C              03664 	LDA #12
52AF  8556              03665 	STA CVB_PLAYER_FRAME
52B1                    03666 CV71:
52B1                    03667 	; 		END IF
52B1                    03668 CV65:
52B1                    03669 	; 	END IF
52B1                    03670 CV63:
52B1                    03671 	; 	IF cont1.right THEN
52B1  A520              03672 	LDA JOY1_DATA
52B3  2902              03673 	AND #2
52B5  D003              03674 	BNE CV73
52B7  4C1553            03675 	JMP CV72
52BA                    03676 CV73:
52BA                    03677 	; 		IF y_player % 40 = 16 THEN	' Player aligned on floor
52BA  A56C              03678 	LDA CVB_Y_PLAYER
52BC  A000              03679 	LDY #0
52BE  48                03680 	PHA
52BF  98                03681 	TYA
52C0  48                03682 	PHA
52C1  A928              03683 	LDA #40
52C3  A000              03684 	LDY #0
52C5  8502              03685 	STA TEMP
52C7  8403              03686 	STY TEMP+1
52C9  20CC43            03687 	JSR _MOD16
52CC  48                03688 	PHA
52CD  98                03689 	TYA
52CE  48                03690 	PHA
52CF  A910              03691 	LDA #16
52D1  A000              03692 	LDY #0
52D3  8502              03693 	STA TEMP
52D5  8403              03694 	STY TEMP+1
52D7  68                03695 	PLA
52D8  A8                03696 	TAY
52D9  68                03697 	PLA
52DA  38                03698 	SEC
52DB  E502              03699 	SBC TEMP
52DD  8502              03700 	STA TEMP
52DF  98                03701 	TYA
52E0  E503              03702 	SBC TEMP+1
52E2  0502              03703 	ORA TEMP
52E4  F003              03704 	BEQ CV75
52E6  4C1553            03705 	JMP CV74
52E9                    03706 CV75:
52E9                    03707 	; 			IF x_player < 240 THEN x_player = x_player + 1
52E9  A564              03708 	LDA CVB_X_PLAYER
52EB  C9F0              03709 	CMP #240
52ED  9003              03710 	BCC CV77
52EF  4CF952            03711 	JMP CV76
52F2                    03712 CV77:
52F2  A564              03713 	LDA CVB_X_PLAYER
52F4  18                03714 	CLC
52F5  6901              03715 	ADC #1
52F7  8564              03716 	STA CVB_X_PLAYER
52F9                    03717 CV76:
52F9                    03718 	; 			IF FRAME AND 4 THEN player_frame = 0 ELSE player_frame = 4
52F9  A524              03719 	LDA FRAME
52FB  A425              03720 	LDY FRAME+1
52FD  2904              03721 	AND #4
52FF  A000              03722 	LDY #0
5301  8402              03723 	STY TEMP
5303  0502              03724 	ORA TEMP
5305  D003              03725 	BNE CV79
5307  4C1153            03726 	JMP CV78
530A                    03727 CV79:
530A  A900              03728 	LDA #0
530C  8556              03729 	STA CVB_PLAYER_FRAME
530E  4C1553            03730 	JMP CV80
5311                    03731 CV78:
5311  A904              03732 	LDA #4
5313  8556              03733 	STA CVB_PLAYER_FRAME
5315                    03734 CV80:
5315                    03735 	; 		END IF
5315                    03736 CV74:
5315                    03737 	; 	END IF
5315                    03738 CV72:
5315                    03739 	; 	IF cont1.up THEN
5315  A520              03740 	LDA JOY1_DATA
5317  2901              03741 	AND #1
5319  D003              03742 	BNE CV82
531B  4C1E54            03743 	JMP CV81
531E                    03744 CV82:
531E                    03745 	; 		IF y_player % 40 = 16 THEN	' Player aligned on floor.
531E  A56C              03746 	LDA CVB_Y_PLAYER
5320  A000              03747 	LDY #0
5322  48                03748 	PHA
5323  98                03749 	TYA
5324  48                03750 	PHA
5325  A928              03751 	LDA #40
5327  A000              03752 	LDY #0
5329  8502              03753 	STA TEMP
532B  8403              03754 	STY TEMP+1
532D  20CC43            03755 	JSR _MOD16
5330  48                03756 	PHA
5331  98                03757 	TYA
5332  48                03758 	PHA
5333  A910              03759 	LDA #16
5335  A000              03760 	LDY #0
5337  8502              03761 	STA TEMP
5339  8403              03762 	STY TEMP+1
533B  68                03763 	PLA
533C  A8                03764 	TAY
533D  68                03765 	PLA
533E  38                03766 	SEC
533F  E502              03767 	SBC TEMP
5341  8502              03768 	STA TEMP
5343  98                03769 	TYA
5344  E503              03770 	SBC TEMP+1
5346  0502              03771 	ORA TEMP
5348  F003              03772 	BEQ CV84
534A  4CFB53            03773 	JMP CV83
534D                    03774 CV84:
534D                    03775 	; 			column = (x_player + 7) /8
534D  A564              03776 	LDA CVB_X_PLAYER
534F  A000              03777 	LDY #0
5351  18                03778 	CLC
5352  6907              03779 	ADC #7
5354  48                03780 	PHA
5355  98                03781 	TYA
5356  6900              03782 	ADC #0
5358  A8                03783 	TAY
5359  68                03784 	PLA
535A  8402              03785 	STY TEMP
535C  4602              03786 	LSR TEMP
535E  6A                03787 	ROR A
535F  4602              03788 	LSR TEMP
5361  6A                03789 	ROR A
5362  4602              03790 	LSR TEMP
5364  6A                03791 	ROR A
5365  A402              03792 	LDY TEMP
5367  855B              03793 	STA CVB_COLUMN
5369                    03794 	; 			row = (y_player + 8) / 8
5369  A56C              03795 	LDA CVB_Y_PLAYER
536B  A000              03796 	LDY #0
536D  18                03797 	CLC
536E  6908              03798 	ADC #8
5370  48                03799 	PHA
5371  98                03800 	TYA
5372  6900              03801 	ADC #0
5374  A8                03802 	TAY
5375  68                03803 	PLA
5376  8402              03804 	STY TEMP
5378  4602              03805 	LSR TEMP
537A  6A                03806 	ROR A
537B  4602              03807 	LSR TEMP
537D  6A                03808 	ROR A
537E  4602              03809 	LSR TEMP
5380  6A                03810 	ROR A
5381  A402              03811 	LDY TEMP
5383  856B              03812 	STA CVB_ROW
5385                    03813 	; 			#c = $1800 + row * 32 + column
5385  A56B              03814 	LDA CVB_ROW
5387  A000              03815 	LDY #0
5389  8402              03816 	STY TEMP
538B  0A                03817 	ASL A
538C  2602              03818 	ROL TEMP
538E  0A                03819 	ASL A
538F  2602              03820 	ROL TEMP
5391  0A                03821 	ASL A
5392  2602              03822 	ROL TEMP
5394  0A                03823 	ASL A
5395  2602              03824 	ROL TEMP
5397  0A                03825 	ASL A
5398  2602              03826 	ROL TEMP
539A  A402              03827 	LDY TEMP
539C  18                03828 	CLC
539D  6900              03829 	ADC #0
539F  48                03830 	PHA
53A0  98                03831 	TYA
53A1  6918              03832 	ADC #24
53A3  A8                03833 	TAY
53A4  68                03834 	PLA
53A5  48                03835 	PHA
53A6  98                03836 	TYA
53A7  48                03837 	PHA
53A8  A55B              03838 	LDA CVB_COLUMN
53AA  A000              03839 	LDY #0
53AC  8502              03840 	STA TEMP
53AE  8403              03841 	STY TEMP+1
53B0  68                03842 	PLA
53B1  A8                03843 	TAY
53B2  68                03844 	PLA
53B3  18                03845 	CLC
53B4  6502              03846 	ADC TEMP
53B6  AA                03847 	TAX
53B7  98                03848 	TYA
53B8  6503              03849 	ADC TEMP+1
53BA  A8                03850 	TAY
53BB  8A                03851 	TXA
53BC  855F              03852 	STA CVB_#C
53BE  8460              03853 	STY CVB_#C+1
53C0                    03854 	; 			IF VPEEK(#c) = base_character + 3 THEN	' Ladder?
53C0  A55F              03855 	LDA CVB_#C
53C2  A460              03856 	LDY CVB_#C+1
53C4  78                03857 	SEI
53C5  202A40            03858 	JSR RDVRM
53C8  58                03859 	CLI
53C9  A000              03860 	LDY #0
53CB  48                03861 	PHA
53CC  98                03862 	TYA
53CD  48                03863 	PHA
53CE  A563              03864 	LDA CVB_BASE_CHARACTER
53D0  A000              03865 	LDY #0
53D2  18                03866 	CLC
53D3  6903              03867 	ADC #3
53D5  48                03868 	PHA
53D6  98                03869 	TYA
53D7  6900              03870 	ADC #0
53D9  A8                03871 	TAY
53DA  68                03872 	PLA
53DB  8502              03873 	STA TEMP
53DD  8403              03874 	STY TEMP+1
53DF  68                03875 	PLA
53E0  A8                03876 	TAY
53E1  68                03877 	PLA
53E2  38                03878 	SEC
53E3  E502              03879 	SBC TEMP
53E5  8502              03880 	STA TEMP
53E7  98                03881 	TYA
53E8  E503              03882 	SBC TEMP+1
53EA  0502              03883 	ORA TEMP
53EC  F003              03884 	BEQ CV86
53EE  4CF853            03885 	JMP CV85
53F1                    03886 CV86:
53F1                    03887 	; 				y_player = y_player - 1
53F1  A56C              03888 	LDA CVB_Y_PLAYER
53F3  38                03889 	SEC
53F4  E901              03890 	SBC #1
53F6  856C              03891 	STA CVB_Y_PLAYER
53F8                    03892 	; 			END IF
53F8                    03893 CV85:
53F8                    03894 	; 		ELSE
53F8  4C1E54            03895 	JMP CV87
53FB                    03896 CV83:
53FB                    03897 	; 			IF FRAME AND 4 THEN player_frame = 16 ELSE player_frame = 20
53FB  A524              03898 	LDA FRAME
53FD  A425              03899 	LDY FRAME+1
53FF  2904              03900 	AND #4
5401  A000              03901 	LDY #0
5403  8402              03902 	STY TEMP
5405  0502              03903 	ORA TEMP
5407  D003              03904 	BNE CV89
5409  4C1354            03905 	JMP CV88
540C                    03906 CV89:
540C  A910              03907 	LDA #16
540E  8556              03908 	STA CVB_PLAYER_FRAME
5410  4C1754            03909 	JMP CV90
5413                    03910 CV88:
5413  A914              03911 	LDA #20
5415  8556              03912 	STA CVB_PLAYER_FRAME
5417                    03913 CV90:
5417                    03914 	; 			y_player = y_player - 1
5417  A56C              03915 	LDA CVB_Y_PLAYER
5419  38                03916 	SEC
541A  E901              03917 	SBC #1
541C  856C              03918 	STA CVB_Y_PLAYER
541E                    03919 	; 		END IF
541E                    03920 CV87:
541E                    03921 	; 	END IF
541E                    03922 CV81:
541E                    03923 	; 	IF cont1.down THEN
541E  A520              03924 	LDA JOY1_DATA
5420  2904              03925 	AND #4
5422  D003              03926 	BNE CV92
5424  4C2755            03927 	JMP CV91
5427                    03928 CV92:
5427                    03929 	; 		IF y_player % 40 = 16 THEN	' Player aligned on floor.
5427  A56C              03930 	LDA CVB_Y_PLAYER
5429  A000              03931 	LDY #0
542B  48                03932 	PHA
542C  98                03933 	TYA
542D  48                03934 	PHA
542E  A928              03935 	LDA #40
5430  A000              03936 	LDY #0
5432  8502              03937 	STA TEMP
5434  8403              03938 	STY TEMP+1
5436  20CC43            03939 	JSR _MOD16
5439  48                03940 	PHA
543A  98                03941 	TYA
543B  48                03942 	PHA
543C  A910              03943 	LDA #16
543E  A000              03944 	LDY #0
5440  8502              03945 	STA TEMP
5442  8403              03946 	STY TEMP+1
5444  68                03947 	PLA
5445  A8                03948 	TAY
5446  68                03949 	PLA
5447  38                03950 	SEC
5448  E502              03951 	SBC TEMP
544A  8502              03952 	STA TEMP
544C  98                03953 	TYA
544D  E503              03954 	SBC TEMP+1
544F  0502              03955 	ORA TEMP
5451  F003              03956 	BEQ CV94
5453  4C0455            03957 	JMP CV93
5456                    03958 CV94:
5456                    03959 	; 			column = (x_player + 7) /8
5456  A564              03960 	LDA CVB_X_PLAYER
5458  A000              03961 	LDY #0
545A  18                03962 	CLC
545B  6907              03963 	ADC #7
545D  48                03964 	PHA
545E  98                03965 	TYA
545F  6900              03966 	ADC #0
5461  A8                03967 	TAY
5462  68                03968 	PLA
5463  8402              03969 	STY TEMP
5465  4602              03970 	LSR TEMP
5467  6A                03971 	ROR A
5468  4602              03972 	LSR TEMP
546A  6A                03973 	ROR A
546B  4602              03974 	LSR TEMP
546D  6A                03975 	ROR A
546E  A402              03976 	LDY TEMP
5470  855B              03977 	STA CVB_COLUMN
5472                    03978 	; 			row = (y_player + 16) / 8
5472  A56C              03979 	LDA CVB_Y_PLAYER
5474  A000              03980 	LDY #0
5476  18                03981 	CLC
5477  6910              03982 	ADC #16
5479  48                03983 	PHA
547A  98                03984 	TYA
547B  6900              03985 	ADC #0
547D  A8                03986 	TAY
547E  68                03987 	PLA
547F  8402              03988 	STY TEMP
5481  4602              03989 	LSR TEMP
5483  6A                03990 	ROR A
5484  4602              03991 	LSR TEMP
5486  6A                03992 	ROR A
5487  4602              03993 	LSR TEMP
5489  6A                03994 	ROR A
548A  A402              03995 	LDY TEMP
548C  856B              03996 	STA CVB_ROW
548E                    03997 	; 			#c = $1800 + row * 32 + column
548E  A56B              03998 	LDA CVB_ROW
5490  A000              03999 	LDY #0
5492  8402              04000 	STY TEMP
5494  0A                04001 	ASL A
5495  2602              04002 	ROL TEMP
5497  0A                04003 	ASL A
5498  2602              04004 	ROL TEMP
549A  0A                04005 	ASL A
549B  2602              04006 	ROL TEMP
549D  0A                04007 	ASL A
549E  2602              04008 	ROL TEMP
54A0  0A                04009 	ASL A
54A1  2602              04010 	ROL TEMP
54A3  A402              04011 	LDY TEMP
54A5  18                04012 	CLC
54A6  6900              04013 	ADC #0
54A8  48                04014 	PHA
54A9  98                04015 	TYA
54AA  6918              04016 	ADC #24
54AC  A8                04017 	TAY
54AD  68                04018 	PLA
54AE  48                04019 	PHA
54AF  98                04020 	TYA
54B0  48                04021 	PHA
54B1  A55B              04022 	LDA CVB_COLUMN
54B3  A000              04023 	LDY #0
54B5  8502              04024 	STA TEMP
54B7  8403              04025 	STY TEMP+1
54B9  68                04026 	PLA
54BA  A8                04027 	TAY
54BB  68                04028 	PLA
54BC  18                04029 	CLC
54BD  6502              04030 	ADC TEMP
54BF  AA                04031 	TAX
54C0  98                04032 	TYA
54C1  6503              04033 	ADC TEMP+1
54C3  A8                04034 	TAY
54C4  8A                04035 	TXA
54C5  855F              04036 	STA CVB_#C
54C7  8460              04037 	STY CVB_#C+1
54C9                    04038 	; 			IF VPEEK(#c) = base_character + 3 THEN	' Ladder?
54C9  A55F              04039 	LDA CVB_#C
54CB  A460              04040 	LDY CVB_#C+1
54CD  78                04041 	SEI
54CE  202A40            04042 	JSR RDVRM
54D1  58                04043 	CLI
54D2  A000              04044 	LDY #0
54D4  48                04045 	PHA
54D5  98                04046 	TYA
54D6  48                04047 	PHA
54D7  A563              04048 	LDA CVB_BASE_CHARACTER
54D9  A000              04049 	LDY #0
54DB  18                04050 	CLC
54DC  6903              04051 	ADC #3
54DE  48                04052 	PHA
54DF  98                04053 	TYA
54E0  6900              04054 	ADC #0
54E2  A8                04055 	TAY
54E3  68                04056 	PLA
54E4  8502              04057 	STA TEMP
54E6  8403              04058 	STY TEMP+1
54E8  68                04059 	PLA
54E9  A8                04060 	TAY
54EA  68                04061 	PLA
54EB  38                04062 	SEC
54EC  E502              04063 	SBC TEMP
54EE  8502              04064 	STA TEMP
54F0  98                04065 	TYA
54F1  E503              04066 	SBC TEMP+1
54F3  0502              04067 	ORA TEMP
54F5  F003              04068 	BEQ CV96
54F7  4C0155            04069 	JMP CV95
54FA                    04070 CV96:
54FA                    04071 	; 				y_player = y_player + 1
54FA  A56C              04072 	LDA CVB_Y_PLAYER
54FC  18                04073 	CLC
54FD  6901              04074 	ADC #1
54FF  856C              04075 	STA CVB_Y_PLAYER
5501                    04076 	; 			END IF
5501                    04077 CV95:
5501                    04078 	; 		ELSE
5501  4C2755            04079 	JMP CV97
5504                    04080 CV93:
5504                    04081 	; 			IF FRAME AND 4 THEN player_frame = 16 ELSE player_frame = 20
5504  A524              04082 	LDA FRAME
5506  A425              04083 	LDY FRAME+1
5508  2904              04084 	AND #4
550A  A000              04085 	LDY #0
550C  8402              04086 	STY TEMP
550E  0502              04087 	ORA TEMP
5510  D003              04088 	BNE CV99
5512  4C1C55            04089 	JMP CV98
5515                    04090 CV99:
5515  A910              04091 	LDA #16
5517  8556              04092 	STA CVB_PLAYER_FRAME
5519  4C2055            04093 	JMP CV100
551C                    04094 CV98:
551C  A914              04095 	LDA #20
551E  8556              04096 	STA CVB_PLAYER_FRAME
5520                    04097 CV100:
5520                    04098 	; 			y_player = y_player + 1
5520  A56C              04099 	LDA CVB_Y_PLAYER
5522  18                04100 	CLC
5523  6901              04101 	ADC #1
5525  856C              04102 	STA CVB_Y_PLAYER
5527                    04103 	; 		END IF
5527                    04104 CV97:
5527                    04105 	; 	END IF
5527                    04106 CV91:
5527                    04107 	; 	END
5527  60                04108 	RTS
5528                    04109 	; 
5528                    04110 	; 	'
5528                    04111 	; 	' Move the enemies.
5528                    04112 	; 	'
5528                    04113 	; move_enemies:	PROCEDURE
5528                    04114 CVB_MOVE_ENEMIES:
5528                    04115 	; 	IF enemy1_frame < 32 THEN
5528  A55A              04116 	LDA CVB_ENEMY1_FRAME
552A  C920              04117 	CMP #32
552C  9003              04118 	BCC CV102
552E  4C4855            04119 	JMP CV101
5531                    04120 CV102:
5531                    04121 	; 		x_enemy1 = x_enemy1 - 1.
5531  A566              04122 	LDA CVB_X_ENEMY1
5533  38                04123 	SEC
5534  E901              04124 	SBC #1
5536  8566              04125 	STA CVB_X_ENEMY1
5538                    04126 	; 		IF x_enemy1 = 0 THEN enemy1_frame = 32
5538  A566              04127 	LDA CVB_X_ENEMY1
553A  C900              04128 	CMP #0
553C  F003              04129 	BEQ CV104
553E  4C4555            04130 	JMP CV103
5541                    04131 CV104:
5541  A920              04132 	LDA #32
5543  855A              04133 	STA CVB_ENEMY1_FRAME
5545                    04134 CV103:
5545                    04135 	; 	ELSE
5545  4C5C55            04136 	JMP CV105
5548                    04137 CV101:
5548                    04138 	; 		x_enemy1 = x_enemy1 + 1.
5548  A566              04139 	LDA CVB_X_ENEMY1
554A  18                04140 	CLC
554B  6901              04141 	ADC #1
554D  8566              04142 	STA CVB_X_ENEMY1
554F                    04143 	; 		IF x_enemy1 = 240 THEN enemy1_frame = 24
554F  A566              04144 	LDA CVB_X_ENEMY1
5551  C9F0              04145 	CMP #240
5553  F003              04146 	BEQ CV107
5555  4C5C55            04147 	JMP CV106
5558                    04148 CV107:
5558  A918              04149 	LDA #24
555A  855A              04150 	STA CVB_ENEMY1_FRAME
555C                    04151 CV106:
555C                    04152 	; 	END IF
555C                    04153 CV105:
555C                    04154 	; 	enemy1_frame = (enemy1_frame AND $f8) + (FRAME AND 4)
555C  A55A              04155 	LDA CVB_ENEMY1_FRAME
555E  29F8              04156 	AND #248
5560  A000              04157 	LDY #0
5562  48                04158 	PHA
5563  98                04159 	TYA
5564  48                04160 	PHA
5565  A524              04161 	LDA FRAME
5567  A425              04162 	LDY FRAME+1
5569  2904              04163 	AND #4
556B  A000              04164 	LDY #0
556D  8502              04165 	STA TEMP
556F  8403              04166 	STY TEMP+1
5571  68                04167 	PLA
5572  A8                04168 	TAY
5573  68                04169 	PLA
5574  18                04170 	CLC
5575  6502              04171 	ADC TEMP
5577  AA                04172 	TAX
5578  98                04173 	TYA
5579  6503              04174 	ADC TEMP+1
557B  A8                04175 	TAY
557C  8A                04176 	TXA
557D  855A              04177 	STA CVB_ENEMY1_FRAME
557F                    04178 	; 
557F                    04179 	; 	IF enemy2_frame < 32 THEN
557F  A55E              04180 	LDA CVB_ENEMY2_FRAME
5581  C920              04181 	CMP #32
5583  9003              04182 	BCC CV109
5585  4C9F55            04183 	JMP CV108
5588                    04184 CV109:
5588                    04185 	; 		x_enemy2 = x_enemy2 - 1.
5588  A567              04186 	LDA CVB_X_ENEMY2
558A  38                04187 	SEC
558B  E901              04188 	SBC #1
558D  8567              04189 	STA CVB_X_ENEMY2
558F                    04190 	; 		IF x_enemy2 = 0 THEN enemy2_frame = 32
558F  A567              04191 	LDA CVB_X_ENEMY2
5591  C900              04192 	CMP #0
5593  F003              04193 	BEQ CV111
5595  4C9C55            04194 	JMP CV110
5598                    04195 CV111:
5598  A920              04196 	LDA #32
559A  855E              04197 	STA CVB_ENEMY2_FRAME
559C                    04198 CV110:
559C                    04199 	; 	ELSE
559C  4CB355            04200 	JMP CV112
559F                    04201 CV108:
559F                    04202 	; 		x_enemy2 = x_enemy2 + 1.
559F  A567              04203 	LDA CVB_X_ENEMY2
55A1  18                04204 	CLC
55A2  6901              04205 	ADC #1
55A4  8567              04206 	STA CVB_X_ENEMY2
55A6                    04207 	; 		IF x_enemy2 = 240 THEN enemy2_frame = 24
55A6  A567              04208 	LDA CVB_X_ENEMY2
55A8  C9F0              04209 	CMP #240
55AA  F003              04210 	BEQ CV114
55AC  4CB355            04211 	JMP CV113
55AF                    04212 CV114:
55AF  A918              04213 	LDA #24
55B1  855E              04214 	STA CVB_ENEMY2_FRAME
55B3                    04215 CV113:
55B3                    04216 	; 	END IF
55B3                    04217 CV112:
55B3                    04218 	; 	enemy2_frame = (enemy2_frame AND $f8) + (FRAME AND 4)
55B3  A55E              04219 	LDA CVB_ENEMY2_FRAME
55B5  29F8              04220 	AND #248
55B7  A000              04221 	LDY #0
55B9  48                04222 	PHA
55BA  98                04223 	TYA
55BB  48                04224 	PHA
55BC  A524              04225 	LDA FRAME
55BE  A425              04226 	LDY FRAME+1
55C0  2904              04227 	AND #4
55C2  A000              04228 	LDY #0
55C4  8502              04229 	STA TEMP
55C6  8403              04230 	STY TEMP+1
55C8  68                04231 	PLA
55C9  A8                04232 	TAY
55CA  68                04233 	PLA
55CB  18                04234 	CLC
55CC  6502              04235 	ADC TEMP
55CE  AA                04236 	TAX
55CF  98                04237 	TYA
55D0  6503              04238 	ADC TEMP+1
55D2  A8                04239 	TAY
55D3  8A                04240 	TXA
55D4  855E              04241 	STA CVB_ENEMY2_FRAME
55D6                    04242 	; 
55D6                    04243 	; 	IF enemy3_frame < 32 THEN
55D6  A565              04244 	LDA CVB_ENEMY3_FRAME
55D8  C920              04245 	CMP #32
55DA  9003              04246 	BCC CV116
55DC  4CF655            04247 	JMP CV115
55DF                    04248 CV116:
55DF                    04249 	; 		x_enemy3 = x_enemy3 - 1.
55DF  A568              04250 	LDA CVB_X_ENEMY3
55E1  38                04251 	SEC
55E2  E901              04252 	SBC #1
55E4  8568              04253 	STA CVB_X_ENEMY3
55E6                    04254 	; 		IF x_enemy3 = 0 THEN enemy3_frame = 32
55E6  A568              04255 	LDA CVB_X_ENEMY3
55E8  C900              04256 	CMP #0
55EA  F003              04257 	BEQ CV118
55EC  4CF355            04258 	JMP CV117
55EF                    04259 CV118:
55EF  A920              04260 	LDA #32
55F1  8565              04261 	STA CVB_ENEMY3_FRAME
55F3                    04262 CV117:
55F3                    04263 	; 	ELSE
55F3  4C0A56            04264 	JMP CV119
55F6                    04265 CV115:
55F6                    04266 	; 		x_enemy3 = x_enemy3 + 1.
55F6  A568              04267 	LDA CVB_X_ENEMY3
55F8  18                04268 	CLC
55F9  6901              04269 	ADC #1
55FB  8568              04270 	STA CVB_X_ENEMY3
55FD                    04271 	; 		IF x_enemy3 = 240 THEN enemy3_frame = 24
55FD  A568              04272 	LDA CVB_X_ENEMY3
55FF  C9F0              04273 	CMP #240
5601  F003              04274 	BEQ CV121
5603  4C0A56            04275 	JMP CV120
5606                    04276 CV121:
5606  A918              04277 	LDA #24
5608  8565              04278 	STA CVB_ENEMY3_FRAME
560A                    04279 CV120:
560A                    04280 	; 	END IF
560A                    04281 CV119:
560A                    04282 	; 	enemy3_frame = (enemy3_frame AND $f8) + (FRAME AND 4)
560A  A565              04283 	LDA CVB_ENEMY3_FRAME
560C  29F8              04284 	AND #248
560E  A000              04285 	LDY #0
5610  48                04286 	PHA
5611  98                04287 	TYA
5612  48                04288 	PHA
5613  A524              04289 	LDA FRAME
5615  A425              04290 	LDY FRAME+1
5617  2904              04291 	AND #4
5619  A000              04292 	LDY #0
561B  8502              04293 	STA TEMP
561D  8403              04294 	STY TEMP+1
561F  68                04295 	PLA
5620  A8                04296 	TAY
5621  68                04297 	PLA
5622  18                04298 	CLC
5623  6502              04299 	ADC TEMP
5625  AA                04300 	TAX
5626  98                04301 	TYA
5627  6503              04302 	ADC TEMP+1
5629  A8                04303 	TAY
562A  8A                04304 	TXA
562B  8565              04305 	STA CVB_ENEMY3_FRAME
562D                    04306 	; 	END
562D  60                04307 	RTS
562E                    04308 	; 
562E                    04309 	; game_bitmaps:
562E                    04310 CVB_GAME_BITMAPS:
562E                    04311 	; 	BITMAP "XXXXXXXX"
562E                    04312 	; 	BITMAP "XXXXXXXX"
562E                    04313 	; 	BITMAP "XXXXXXXX"
562E                    04314 	; 	BITMAP "XXXXXXXX"
562E                    04315 	; 	BITMAP "XXXXXXXX"
562E                    04316 	; 	BITMAP "XXXXXXXX"
562E                    04317 	; 	BITMAP "XXXXXXXX"
562E                    04318 	; 	BITMAP "XXXXXXXX"
562E  FFFFFFFFFFFFFFFF  04319 	DB $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
5636                    04320 	; 
5636                    04321 	; 	BITMAP "XXX..XXX"
5636                    04322 	; 	BITMAP "XXX..XXX"
5636                    04323 	; 	BITMAP "XXX..XXX"
5636                    04324 	; 	BITMAP "XXX..XXX"
5636                    04325 	; 	BITMAP "XXX..XXX"
5636                    04326 	; 	BITMAP "XXX..XXX"
5636                    04327 	; 	BITMAP "XXX..XXX"
5636                    04328 	; 	BITMAP "XXX..XXX"
5636  E7E7E7E7E7E7E7E7  04329 	DB $E7,$E7,$E7,$E7,$E7,$E7,$E7,$E7
563E                    04330 	; 
563E                    04331 	; 	BITMAP "XXXXXXXX"
563E                    04332 	; 	BITMAP "XXXXXXXX"
563E                    04333 	; 	BITMAP "........"
563E                    04334 	; 	BITMAP "XXXXXXXX"
563E                    04335 	; 	BITMAP "XXXXXXXX"
563E                    04336 	; 	BITMAP "........"
563E                    04337 	; 	BITMAP "XXXXXXXX"
563E                    04338 	; 	BITMAP "XXXXXXXX"
563E  FFFF00FFFF00FFFF  04339 	DB $FF,$FF,$00,$FF,$FF,$00,$FF,$FF
5646                    04340 	; 
5646                    04341 	; 	BITMAP ".X....X."
5646                    04342 	; 	BITMAP ".X....X."
5646                    04343 	; 	BITMAP ".XXXXXX."
5646                    04344 	; 	BITMAP ".X....X."
5646                    04345 	; 	BITMAP ".X....X."
5646                    04346 	; 	BITMAP ".XXXXXX."
5646                    04347 	; 	BITMAP ".X....X."
5646                    04348 	; 	BITMAP ".X....X."
5646  42427E42427E4242  04349 	DB $42,$42,$7E,$42,$42,$7E,$42,$42
564E                    04350 	; 
564E                    04351 	; 	BITMAP "XXXXXXX."
564E                    04352 	; 	BITMAP "X.....X."
564E                    04353 	; 	BITMAP "X.XXX.X."
564E                    04354 	; 	BITMAP "X.X.X.X."
564E                    04355 	; 	BITMAP "X.XXX.X."
564E                    04356 	; 	BITMAP "X.....X."
564E                    04357 	; 	BITMAP "XXXXXXX."
564E                    04358 	; 	BITMAP "........"
564E  FE82BAAABA82FE00  04359 	DB $FE,$82,$BA,$AA,$BA,$82,$FE,$00
5656                    04360 	; 
5656                    04361 	; 	BITMAP "X.XXX.X."
5656                    04362 	; 	BITMAP "X.XXX.X."
5656                    04363 	; 	BITMAP "X.XXX.X."
5656                    04364 	; 	BITMAP "X.XXX.X."
5656                    04365 	; 	BITMAP "X.XXX.X."
5656                    04366 	; 	BITMAP "X.XXX.X."
5656                    04367 	; 	BITMAP "X.XXX.X."
5656                    04368 	; 	BITMAP "X.XXX.X."
5656  BABABABABABABABA  04369 	DB $BA,$BA,$BA,$BA,$BA,$BA,$BA,$BA
565E                    04370 	; 
565E                    04371 	; 	BITMAP "XXX.XXX."
565E                    04372 	; 	BITMAP "........"
565E                    04373 	; 	BITMAP "XXXXXXXX"
565E                    04374 	; 	BITMAP "XXXXXXXX"
565E                    04375 	; 	BITMAP "XXXXXXXX"
565E                    04376 	; 	BITMAP "........"
565E                    04377 	; 	BITMAP "........"
565E                    04378 	; 	BITMAP "........"
565E  EE00FFFFFF000000  04379 	DB $EE,$00,$FF,$FF,$FF,$00,$00,$00
5666                    04380 	; 
5666                    04381 	; 	BITMAP ".X....X."
5666                    04382 	; 	BITMAP ".X....X."
5666                    04383 	; 	BITMAP ".XXXXXX."
5666                    04384 	; 	BITMAP ".X....X."
5666                    04385 	; 	BITMAP ".X....X."
5666                    04386 	; 	BITMAP ".XXXXXX."
5666                    04387 	; 	BITMAP ".X....X."
5666                    04388 	; 	BITMAP ".X....X."
5666  42427E42427E4242  04389 	DB $42,$42,$7E,$42,$42,$7E,$42,$42
566E                    04390 	; 
566E                    04391 	; 	BITMAP "XXX.XXXX"
566E                    04392 	; 	BITMAP "XXX.XXXX"
566E                    04393 	; 	BITMAP "XXX.XXXX"
566E                    04394 	; 	BITMAP "........"
566E                    04395 	; 	BITMAP "XXXXXXX."
566E                    04396 	; 	BITMAP "XXXXXXX."
566E                    04397 	; 	BITMAP "XXXXXXX."
566E                    04398 	; 	BITMAP "........"
566E  EFEFEF00FEFEFE00  04399 	DB $EF,$EF,$EF,$00,$FE,$FE,$FE,$00
5676                    04400 	; 
5676                    04401 	; 	BITMAP ".XXXXXX."
5676                    04402 	; 	BITMAP ".XXXXXX."
5676                    04403 	; 	BITMAP ".XXXXXX."
5676                    04404 	; 	BITMAP "........"
5676                    04405 	; 	BITMAP ".XX.XXX."
5676                    04406 	; 	BITMAP ".XX.XXX."
5676                    04407 	; 	BITMAP ".XX.XXX."
5676                    04408 	; 	BITMAP "........"
5676  7E7E7E006E6E6E00  04409 	DB $7E,$7E,$7E,$00,$6E,$6E,$6E,$00
567E                    04410 	; 
567E                    04411 	; 	BITMAP "........"
567E                    04412 	; 	BITMAP "XXXXXXXX"
567E                    04413 	; 	BITMAP "XXXXXXXX"
567E                    04414 	; 	BITMAP "X.X.X.X."
567E                    04415 	; 	BITMAP ".X...X.."
567E                    04416 	; 	BITMAP "........"
567E                    04417 	; 	BITMAP "........"
567E                    04418 	; 	BITMAP "........"
567E  00FFFFAA44000000  04419 	DB $00,$FF,$FF,$AA,$44,$00,$00,$00
5686                    04420 	; 
5686                    04421 	; 	BITMAP ".X....X."
5686                    04422 	; 	BITMAP ".X....X."
5686                    04423 	; 	BITMAP ".XXXXXX."
5686                    04424 	; 	BITMAP ".X....X."
5686                    04425 	; 	BITMAP ".X....X."
5686                    04426 	; 	BITMAP ".XXXXXX."
5686                    04427 	; 	BITMAP ".X....X."
5686                    04428 	; 	BITMAP ".X....X."
5686  42427E42427E4242  04429 	DB $42,$42,$7E,$42,$42,$7E,$42,$42
568E                    04430 	; 
568E                    04431 	; 	BITMAP "XXX.XXX."
568E                    04432 	; 	BITMAP "XXX.XXX."
568E                    04433 	; 	BITMAP "XXX.XXX."
568E                    04434 	; 	BITMAP "........"
568E                    04435 	; 	BITMAP "XXX.XXX."
568E                    04436 	; 	BITMAP "XXX.XXX."
568E                    04437 	; 	BITMAP "XXX.XXX."
568E                    04438 	; 	BITMAP "........"
568E  EEEEEE00EEEEEE00  04439 	DB $EE,$EE,$EE,$00,$EE,$EE,$EE,$00
5696                    04440 	; 
5696                    04441 	; 	BITMAP ".X......"
5696                    04442 	; 	BITMAP "..XX...."
5696                    04443 	; 	BITMAP "....XX.."
5696                    04444 	; 	BITMAP "......XX"
5696                    04445 	; 	BITMAP "....XX.."
5696                    04446 	; 	BITMAP "..XX...."
5696                    04447 	; 	BITMAP ".X......"
5696                    04448 	; 	BITMAP ".X......"
5696  40300C030C304040  04449 	DB $40,$30,$0C,$03,$0C,$30,$40,$40
569E                    04450 	; 
569E                    04451 	; 	BITMAP "........"
569E                    04452 	; 	BITMAP "XXXXXXXX"
569E                    04453 	; 	BITMAP "........"
569E                    04454 	; 	BITMAP "X.X.X.X."
569E                    04455 	; 	BITMAP ".X.X.X.X"
569E                    04456 	; 	BITMAP "........"
569E                    04457 	; 	BITMAP "XXXXXXXX"
569E                    04458 	; 	BITMAP "........"
569E  00FF00AA5500FF00  04459 	DB $00,$FF,$00,$AA,$55,$00,$FF,$00
56A6                    04460 	; 
56A6                    04461 	; 	BITMAP "X......X"
56A6                    04462 	; 	BITMAP "X......X"
56A6                    04463 	; 	BITMAP "XX....XX"
56A6                    04464 	; 	BITMAP "X.XXXX.X"
56A6                    04465 	; 	BITMAP "X......X"
56A6                    04466 	; 	BITMAP "X......X"
56A6                    04467 	; 	BITMAP "XX....XX"
56A6                    04468 	; 	BITMAP "X.XXXX.X"
56A6  8181C3BD8181C3BD  04469 	DB $81,$81,$C3,$BD,$81,$81,$C3,$BD
56AE                    04470 	; 
56AE                    04471 	; 	BITMAP "X......X"
56AE                    04472 	; 	BITMAP ".X.XX..."
56AE                    04473 	; 	BITMAP "..XX.XXX"
56AE                    04474 	; 	BITMAP ".X...XXX"
56AE                    04475 	; 	BITMAP "..XXX..X"
56AE                    04476 	; 	BITMAP "..X..XXX"
56AE                    04477 	; 	BITMAP ".X..X..X"
56AE                    04478 	; 	BITMAP "..X..XXX"
56AE  8158374739274927  04479 	DB $81,$58,$37,$47,$39,$27,$49,$27
56B6                    04480 	; 
56B6                    04481 	; 	BITMAP ".X...XXX"
56B6                    04482 	; 	BITMAP ".X..X..X"
56B6                    04483 	; 	BITMAP "..X..XXX"
56B6                    04484 	; 	BITMAP ".X......"
56B6                    04485 	; 	BITMAP "..X.X..."
56B6                    04486 	; 	BITMAP "...X.X.X"
56B6                    04487 	; 	BITMAP "...X..X."
56B6                    04488 	; 	BITMAP "..X..XXX"
56B6  4749274028151227  04489 	DB $47,$49,$27,$40,$28,$15,$12,$27
56BE                    04490 	; 
56BE                    04491 	; 	BITMAP "........"
56BE                    04492 	; 	BITMAP "XXXXXXX."
56BE                    04493 	; 	BITMAP "XXXXXXX."
56BE                    04494 	; 	BITMAP "........"
56BE                    04495 	; 	BITMAP "XXX.XXXX"
56BE                    04496 	; 	BITMAP "XXX.XXXX"
56BE                    04497 	; 	BITMAP "........"
56BE                    04498 	; 	BITMAP "........"
56BE  00FEFE00EFEF0000  04499 	DB $00,$FE,$FE,$00,$EF,$EF,$00,$00
56C6                    04500 	; 
56C6                    04501 	; 	BITMAP "....XX.."
56C6                    04502 	; 	BITMAP "....XX.."
56C6                    04503 	; 	BITMAP "...XX..."
56C6                    04504 	; 	BITMAP "...XX..."
56C6                    04505 	; 	BITMAP "..XX...."
56C6                    04506 	; 	BITMAP "..XX...."
56C6                    04507 	; 	BITMAP "...XX..."
56C6                    04508 	; 	BITMAP "...XX..."
56C6  0C0C181830301818  04509 	DB $0C,$0C,$18,$18,$30,$30,$18,$18
56CE                    04510 	; 
56CE                    04511 	; 	BITMAP ".X.X.X.."
56CE                    04512 	; 	BITMAP "XXXXXXX."
56CE                    04513 	; 	BITMAP ".X.X.X.."
56CE                    04514 	; 	BITMAP "XXXXXXX."
56CE                    04515 	; 	BITMAP ".X.X.X.."
56CE                    04516 	; 	BITMAP "XXXXXXX."
56CE                    04517 	; 	BITMAP ".X.X.X.."
56CE                    04518 	; 	BITMAP "........"
56CE  54FE54FE54FE5400  04519 	DB $54,$FE,$54,$FE,$54,$FE,$54,$00
56D6                    04520 	; 
56D6                    04521 	; game_colors:
56D6                    04522 CVB_GAME_COLORS:
56D6                    04523 	; 	DATA BYTE $CC,$CC,$CC,$CC,$CC,$CC,$CC,$CC
56D6  CCCCCCCCCCCCCCCC  04524 	DB $CC,$CC,$CC,$CC,$CC,$CC,$CC,$CC
56DE                    04525 	; 	DATA BYTE $21,$21,$21,$21,$21,$21,$21,$21
56DE  2121212121212121  04526 	DB $21,$21,$21,$21,$21,$21,$21,$21
56E6                    04527 	; 	DATA BYTE $A1,$A1,$A1,$A1,$A1,$A1,$A1,$A1
56E6  A1A1A1A1A1A1A1A1  04528 	DB $A1,$A1,$A1,$A1,$A1,$A1,$A1,$A1
56EE                    04529 	; 	DATA BYTE $51,$51,$51,$51,$51,$51,$51,$51
56EE  5151515151515151  04530 	DB $51,$51,$51,$51,$51,$51,$51,$51
56F6                    04531 	; 
56F6                    04532 	; 	DATA BYTE $54,$54,$54,$54,$54,$54,$54,$54
56F6  5454545454545454  04533 	DB $54,$54,$54,$54,$54,$54,$54,$54
56FE                    04534 	; 	DATA BYTE $51,$51,$51,$51,$51,$51,$51,$51
56FE  5151515151515151  04535 	DB $51,$51,$51,$51,$51,$51,$51,$51
5706                    04536 	; 	DATA BYTE $F1,$11,$E1,$E1,$E1,$11,$11,$11
5706  F111E1E1E1111111  04537 	DB $F1,$11,$E1,$E1,$E1,$11,$11,$11
570E                    04538 	; 	DATA BYTE $51,$51,$51,$51,$51,$51,$51,$51
570E  5151515151515151  04539 	DB $51,$51,$51,$51,$51,$51,$51,$51
5716                    04540 	; 
5716                    04541 	; 	DATA BYTE $68,$68,$68,$68,$68,$68,$68,$68
5716  6868686868686868  04542 	DB $68,$68,$68,$68,$68,$68,$68,$68
571E                    04543 	; 	DATA BYTE $81,$81,$81,$81,$81,$81,$81,$81
571E  8181818181818181  04544 	DB $81,$81,$81,$81,$81,$81,$81,$81
5726                    04545 	; 	DATA BYTE $51,$51,$51,$51,$51,$51,$51,$51
5726  5151515151515151  04546 	DB $51,$51,$51,$51,$51,$51,$51,$51
572E                    04547 	; 	DATA BYTE $51,$51,$51,$51,$51,$51,$51,$51
572E  5151515151515151  04548 	DB $51,$51,$51,$51,$51,$51,$51,$51
5736                    04549 	; 
5736                    04550 	; 	DATA BYTE $61,$61,$61,$61,$61,$61,$61,$61
5736  6161616161616161  04551 	DB $61,$61,$61,$61,$61,$61,$61,$61
573E                    04552 	; 	DATA BYTE $A1,$A1,$A1,$A1,$A1,$A1,$A1,$A1
573E  A1A1A1A1A1A1A1A1  04553 	DB $A1,$A1,$A1,$A1,$A1,$A1,$A1,$A1
5746                    04554 	; 	DATA BYTE $F1,$F1,$F1,$51,$51,$F1,$F1,$F1
5746  F1F1F15151F1F1F1  04555 	DB $F1,$F1,$F1,$51,$51,$F1,$F1,$F1
574E                    04556 	; 	DATA BYTE $E1,$E1,$E1,$E1,$E1,$E1,$E1,$E1
574E  E1E1E1E1E1E1E1E1  04557 	DB $E1,$E1,$E1,$E1,$E1,$E1,$E1,$E1
5756                    04558 	; 
5756                    04559 	; 	DATA BYTE $86,$86,$86,$86,$86,$86,$86,$86
5756  8686868686868686  04560 	DB $86,$86,$86,$86,$86,$86,$86,$86
575E                    04561 	; 	DATA BYTE $2C,$2C,$2C,$2C,$2C,$2C,$2C,$2C
575E  2C2C2C2C2C2C2C2C  04562 	DB $2C,$2C,$2C,$2C,$2C,$2C,$2C,$2C
5766                    04563 	; 	DATA BYTE $11,$6E,$6E,$6E,$6E,$6E,$6E,$11
5766  116E6E6E6E6E6E11  04564 	DB $11,$6E,$6E,$6E,$6E,$6E,$6E,$11
576E                    04565 	; 	DATA BYTE $C1,$C1,$C1,$C1,$C1,$C1,$C1,$C1
576E  C1C1C1C1C1C1C1C1  04566 	DB $C1,$C1,$C1,$C1,$C1,$C1,$C1,$C1
5776                    04567 	; 
5776                    04568 	; 	DATA BYTE $F1,$F1,$F1,$F1,$F1,$F1,$F1,$F1
5776  F1F1F1F1F1F1F1F1  04569 	DB $F1,$F1,$F1,$F1,$F1,$F1,$F1,$F1
577E                    04570 	; 
577E                    04571 	; game_sprites:
577E                    04572 CVB_GAME_SPRITES:
577E                    04573 	; 	BITMAP "................"
577E                    04574 	; 	BITMAP ".......X.X.X...."
577E                    04575 	; 	BITMAP ".....X.XXXXX...."
577E                    04576 	; 	BITMAP "......XXXXXX...."
577E                    04577 	; 	BITMAP ".....XXXXX.X...."
577E                    04578 	; 	BITMAP "......XX.XXX...."
577E                    04579 	; 	BITMAP ".....XXX...X...."
577E                    04580 	; 	BITMAP "...XXXX.XXX....."
577E                    04581 	; 	BITMAP "..XX.XXX........"
577E                    04582 	; 	BITMAP ".XX..XXXX.XXX..."
577E                    04583 	; 	BITMAP ".XXX.XXXX.XXX..."
577E                    04584 	; 	BITMAP ".XXX.X.........."
577E                    04585 	; 	BITMAP "......XXXX......"
577E                    04586 	; 	BITMAP "....XXX.XXXXX..."
577E                    04587 	; 	BITMAP "....XXX..XXXXX.."
577E                    04588 	; 	BITMAP "....XXXX........"
577E  000105030703071E  04589 	DB $00,$01,$05,$03,$07,$03,$07,$1E
5786  37677774030E0E0F  04590 	DB $37,$67,$77,$74,$03,$0E,$0E,$0F
578E  0050F0F0D07010E0  04591 	DB $00,$50,$F0,$F0,$D0,$70,$10,$E0
5796  00B8B800C0F87C00  04592 	DB $00,$B8,$B8,$00,$C0,$F8,$7C,$00
579E                    04593 	; 
579E                    04594 	; 	BITMAP "........X.X.X..."
579E                    04595 	; 	BITMAP "......X.XXXXX..."
579E                    04596 	; 	BITMAP ".......XXXXXX..."
579E                    04597 	; 	BITMAP "......XXXXX.X..."
579E                    04598 	; 	BITMAP ".......XX.XXX..."
579E                    04599 	; 	BITMAP "......XXX...X..."
579E                    04600 	; 	BITMAP "......XX.XXX...."
579E                    04601 	; 	BITMAP ".....XXXX......."
579E                    04602 	; 	BITMAP ".....XXXXX......"
579E                    04603 	; 	BITMAP ".....XX.XXX....."
579E                    04604 	; 	BITMAP ".....XX.XXX....."
579E                    04605 	; 	BITMAP ".....XXX........"
579E                    04606 	; 	BITMAP "......XXXX......"
579E                    04607 	; 	BITMAP "......XX........"
579E                    04608 	; 	BITMAP "......XXXX......"
579E                    04609 	; 	BITMAP "......XXXXX....."
579E  0002010301030307  04610 	DB $00,$02,$01,$03,$01,$03,$03,$07
57A6  0706060703030303  04611 	DB $07,$06,$06,$07,$03,$03,$03,$03
57AE  A8F8F8E8B8887080  04612 	DB $A8,$F8,$F8,$E8,$B8,$88,$70,$80
57B6  C0E0E000C000C0E0  04613 	DB $C0,$E0,$E0,$00,$C0,$00,$C0,$E0
57BE                    04614 	; 
57BE                    04615 	; 	BITMAP "................"
57BE                    04616 	; 	BITMAP "....X.X.X......."
57BE                    04617 	; 	BITMAP "....XXXXX.X....."
57BE                    04618 	; 	BITMAP "....XXXXXX......"
57BE                    04619 	; 	BITMAP "....X.XXXXX....."
57BE                    04620 	; 	BITMAP "....XXX.XX......"
57BE                    04621 	; 	BITMAP "....X...XXX....."
57BE                    04622 	; 	BITMAP ".....XXX.XXXX..."
57BE                    04623 	; 	BITMAP "........XXX.XX.."
57BE                    04624 	; 	BITMAP "...XXX.XXXX..XX."
57BE                    04625 	; 	BITMAP "...XXX.XXXX.XXX."
57BE                    04626 	; 	BITMAP "..........X.XXX."
57BE                    04627 	; 	BITMAP "......XXXX......"
57BE                    04628 	; 	BITMAP "...XXXXX.XXX...."
57BE                    04629 	; 	BITMAP "..XXXXX..XXX...."
57BE                    04630 	; 	BITMAP "........XXXX...."
57BE  000A0F0F0B0E0807  04631 	DB $00,$0A,$0F,$0F,$0B,$0E,$08,$07
57C6  001D1D00031F3E00  04632 	DB $00,$1D,$1D,$00,$03,$1F,$3E,$00
57CE  0080A0C0E0C0E078  04633 	DB $00,$80,$A0,$C0,$E0,$C0,$E0,$78
57D6  ECE6EE2EC07070F0  04634 	DB $EC,$E6,$EE,$2E,$C0,$70,$70,$F0
57DE                    04635 	; 
57DE                    04636 	; 	BITMAP "...X.X.X........"
57DE                    04637 	; 	BITMAP "...XXXXX.X......"
57DE                    04638 	; 	BITMAP "...XXXXXX......."
57DE                    04639 	; 	BITMAP "...X.XXXXX......"
57DE                    04640 	; 	BITMAP "...XXX.XX......."
57DE                    04641 	; 	BITMAP "...X...XXX......"
57DE                    04642 	; 	BITMAP "....XXX.XX......"
57DE                    04643 	; 	BITMAP ".......XXXX....."
57DE                    04644 	; 	BITMAP "......XXXXX....."
57DE                    04645 	; 	BITMAP ".....XXX.XX....."
57DE                    04646 	; 	BITMAP ".....XXX.XX....."
57DE                    04647 	; 	BITMAP "........XXX....."
57DE                    04648 	; 	BITMAP "......XXXX......"
57DE                    04649 	; 	BITMAP "........XX......"
57DE                    04650 	; 	BITMAP "......XXXX......"
57DE                    04651 	; 	BITMAP ".....XXXXX......"
57DE  151F1F171D110E01  04652 	DB $15,$1F,$1F,$17,$1D,$11,$0E,$01
57E6  0307070003000307  04653 	DB $03,$07,$07,$00,$03,$00,$03,$07
57EE  004080C080C0C0E0  04654 	DB $00,$40,$80,$C0,$80,$C0,$C0,$E0
57F6  E06060E0C0C0C0C0  04655 	DB $E0,$60,$60,$E0,$C0,$C0,$C0,$C0
57FE                    04656 	; 
57FE                    04657 	; 	BITMAP "....X.X.X.X....."
57FE                    04658 	; 	BITMAP ".....XXXXX......"
57FE                    04659 	; 	BITMAP "....XXXXXXX....."
57FE                    04660 	; 	BITMAP "....XXXXXXX....."
57FE                    04661 	; 	BITMAP ".....XXXXX..XXX."
57FE                    04662 	; 	BITMAP ".....XXXXX..XXX."
57FE                    04663 	; 	BITMAP "......XXX..XX..."
57FE                    04664 	; 	BITMAP "....XX...XXX...."
57FE                    04665 	; 	BITMAP "...XX.XXXX......"
57FE                    04666 	; 	BITMAP ".XXX............"
57FE                    04667 	; 	BITMAP ".XXX..XXXX......"
57FE                    04668 	; 	BITMAP "......X..XX....."
57FE                    04669 	; 	BITMAP ".....XX...XXX..."
57FE                    04670 	; 	BITMAP ".....XX...XXXX.."
57FE                    04671 	; 	BITMAP "...XXXX........."
57FE                    04672 	; 	BITMAP "..XXXXX........."
57FE  0A070F0F0707030C  04673 	DB $0A,$07,$0F,$0F,$07,$07,$03,$0C
5806  1B70730206061E3E  04674 	DB $1B,$70,$73,$02,$06,$06,$1E,$3E
580E  A0C0E0E0CECE9870  04675 	DB $A0,$C0,$E0,$E0,$CE,$CE,$98,$70
5816  C000C060383C0000  04676 	DB $C0,$00,$C0,$60,$38,$3C,$00,$00
581E                    04677 	; 
581E                    04678 	; 
581E                    04679 	; 	BITMAP ".....X.X.X.X...."
581E                    04680 	; 	BITMAP "......XXXXX....."
581E                    04681 	; 	BITMAP ".....XXXXXXX...."
581E                    04682 	; 	BITMAP ".....XXXXXXX...."
581E                    04683 	; 	BITMAP ".XXX..XXXXX....."
581E                    04684 	; 	BITMAP ".XXX..XXXXX....."
581E                    04685 	; 	BITMAP "...XX..XXX......"
581E                    04686 	; 	BITMAP "....XXX...XX...."
581E                    04687 	; 	BITMAP "......XXXX.XX..."
581E                    04688 	; 	BITMAP "............XXX."
581E                    04689 	; 	BITMAP "......XXXX..XXX."
581E                    04690 	; 	BITMAP ".....XX..X......"
581E                    04691 	; 	BITMAP "...XXX...XX....."
581E                    04692 	; 	BITMAP "..XXX....XX....."
581E                    04693 	; 	BITMAP ".........XXXX..."
581E                    04694 	; 	BITMAP ".........XXXXX.."
581E  050307077373190E  04695 	DB $05,$03,$07,$07,$73,$73,$19,$0E
5826  030003061C380000  04696 	DB $03,$00,$03,$06,$1C,$38,$00,$00
582E  50E0F0F0E0E0C030  04697 	DB $50,$E0,$F0,$F0,$E0,$E0,$C0,$30
5836  D80ECE406060787C  04698 	DB $D8,$0E,$CE,$40,$60,$60,$78,$7C
583E                    04699 	; 
583E                    04700 	; 	BITMAP "...XX.XX........"
583E                    04701 	; 	BITMAP "..X.XX.X........"
583E                    04702 	; 	BITMAP "..X.XX.X........"
583E                    04703 	; 	BITMAP "..XX.XX........."
583E                    04704 	; 	BITMAP "...XXXXX........"
583E                    04705 	; 	BITMAP ".XXXXX.XX......."
583E                    04706 	; 	BITMAP "X..XX.XXX......."
583E                    04707 	; 	BITMAP "......XXX.....X."
583E                    04708 	; 	BITMAP "....XXXX......X."
583E                    04709 	; 	BITMAP "...XXXXX.....XX."
583E                    04710 	; 	BITMAP "..XXXXX......XX."
583E                    04711 	; 	BITMAP "..XXXX......XXX."
583E                    04712 	; 	BITMAP "..XXXX..XX..XX.."
583E                    04713 	; 	BITMAP "..XXXXXXXXX.XX.."
583E                    04714 	; 	BITMAP "...XXXXXXXXXXX.."
583E                    04715 	; 	BITMAP "....XXXX..XXX..."
583E  1B2D2D361F7D9B03  04716 	DB $1B,$2D,$2D,$36,$1F,$7D,$9B,$03
5846  0F1F3E3C3C3F1F0F  04717 	DB $0F,$1F,$3E,$3C,$3C,$3F,$1F,$0F
584E  0000000000808082  04718 	DB $00,$00,$00,$00,$00,$80,$80,$82
5856  0206060ECCECFC38  04719 	DB $02,$06,$06,$0E,$CC,$EC,$FC,$38
585E                    04720 	; 
585E                    04721 	; 	BITMAP "................"
585E                    04722 	; 	BITMAP "....XX.XX......."
585E                    04723 	; 	BITMAP "...X.XX.X......."
585E                    04724 	; 	BITMAP "...X.XX.X......."
585E                    04725 	; 	BITMAP "...XX.XX........"
585E                    04726 	; 	BITMAP "....XXXXX......."
585E                    04727 	; 	BITMAP "...XXXX.XX......"
585E                    04728 	; 	BITMAP ".X.XXX.XXX......"
585E                    04729 	; 	BITMAP ".XX....XXX......"
585E                    04730 	; 	BITMAP "....XXXXX....X.."
585E                    04731 	; 	BITMAP "...XXXXX....XX.."
585E                    04732 	; 	BITMAP "...XXXX.XX..XX.."
585E                    04733 	; 	BITMAP "...XXXX.XX.XX..."
585E                    04734 	; 	BITMAP "...XXXXXXXXXX..."
585E                    04735 	; 	BITMAP "....XXXXX.XXX..."
585E                    04736 	; 	BITMAP ".....XXX..XX...."
585E  000D16161B0F1E5D  04737 	DB $00,$0D,$16,$16,$1B,$0F,$1E,$5D
5866  610F1F1E1E1F0F07  04738 	DB $61,$0F,$1F,$1E,$1E,$1F,$0F,$07
586E  008080800080C0C0  04739 	DB $00,$80,$80,$80,$00,$80,$C0,$C0
5876  C0840CCCD8F8B830  04740 	DB $C0,$84,$0C,$CC,$D8,$F8,$B8,$30
587E                    04741 	; 
587E                    04742 	; 	BITMAP "........XX.XX..."
587E                    04743 	; 	BITMAP "........X.XX.X.."
587E                    04744 	; 	BITMAP "........X.XX.X.."
587E                    04745 	; 	BITMAP ".........XX.XX.."
587E                    04746 	; 	BITMAP "........XXXXX..."
587E                    04747 	; 	BITMAP ".......XX.XXXXX."
587E                    04748 	; 	BITMAP ".......XXX.XX..X"
587E                    04749 	; 	BITMAP ".X.....XXX......"
587E                    04750 	; 	BITMAP ".X......XXXX...."
587E                    04751 	; 	BITMAP ".XX.....XXXXX..."
587E                    04752 	; 	BITMAP ".XX......XXXXX.."
587E                    04753 	; 	BITMAP ".XXX......XXXX.."
587E                    04754 	; 	BITMAP "..XX..XX..XXXX.."
587E                    04755 	; 	BITMAP "..XX.XXXXXXXXX.."
587E                    04756 	; 	BITMAP "..XXXXXXXXXXX..."
587E                    04757 	; 	BITMAP "...XXX..XXXX...."
587E  0000000000010141  04758 	DB $00,$00,$00,$00,$00,$01,$01,$41
5886  4060607033373F1C  04759 	DB $40,$60,$60,$70,$33,$37,$3F,$1C
588E  D8B4B46CF8BED9C0  04760 	DB $D8,$B4,$B4,$6C,$F8,$BE,$D9,$C0
5896  F0F87C3C3CFCF8F0  04761 	DB $F0,$F8,$7C,$3C,$3C,$FC,$F8,$F0
589E                    04762 	; 
589E                    04763 	; 	BITMAP "................"
589E                    04764 	; 	BITMAP ".......XX.XX...."
589E                    04765 	; 	BITMAP ".......X.XX.X..."
589E                    04766 	; 	BITMAP ".......X.XX.X..."
589E                    04767 	; 	BITMAP "........XX.XX..."
589E                    04768 	; 	BITMAP ".......XXXXX...."
589E                    04769 	; 	BITMAP "......XX.XXXX..."
589E                    04770 	; 	BITMAP "......XXX.XXX.X."
589E                    04771 	; 	BITMAP "......XXX....XX."
589E                    04772 	; 	BITMAP "..X....XXXXX...."
589E                    04773 	; 	BITMAP "..XX....XXXXX..."
589E                    04774 	; 	BITMAP "..XX..XX.XXXX..."
589E                    04775 	; 	BITMAP "...XX.XX.XXXX..."
589E                    04776 	; 	BITMAP "...XXXXXXXXXX..."
589E                    04777 	; 	BITMAP "...XXX.XXXXX...."
589E                    04778 	; 	BITMAP "....XX..XXX....."
589E  0001010100010303  04779 	DB $00,$01,$01,$01,$00,$01,$03,$03
58A6  032130331B1F1D0C  04780 	DB $03,$21,$30,$33,$1B,$1F,$1D,$0C
58AE  00B06868D8F078BA  04781 	DB $00,$B0,$68,$68,$D8,$F0,$78,$BA
58B6  86F0F87878F8F0E0  04782 	DB $86,$F0,$F8,$78,$78,$F8,$F0,$E0
58BE                    04783 	; 
58BE                    04784 	; start_song:	PROCEDURE
58BE                    04785 CVB_START_SONG:
58BE                    04786 	; 	tick_note = 8
58BE  A908              04787 	LDA #8
58C0  8557              04788 	STA CVB_TICK_NOTE
58C2                    04789 	; 	song_note = 47
58C2  A92F              04790 	LDA #47
58C4  855D              04791 	STA CVB_SONG_NOTE
58C6                    04792 	; 	END
58C6  60                04793 	RTS
58C7                    04794 	; 
58C7                    04795 	; play_song:	PROCEDURE
58C7                    04796 CVB_PLAY_SONG:
58C7                    04797 	; 	tick_note = tick_note + 1.
58C7  A557              04798 	LDA CVB_TICK_NOTE
58C9  18                04799 	CLC
58CA  6901              04800 	ADC #1
58CC  8557              04801 	STA CVB_TICK_NOTE
58CE                    04802 	; 	IF tick_note = 16. THEN
58CE  A557              04803 	LDA CVB_TICK_NOTE
58D0  C910              04804 	CMP #16
58D2  F003              04805 	BEQ CV123
58D4  4C2659            04806 	JMP CV122
58D7                    04807 CV123:
58D7                    04808 	; 		tick_note = 0.
58D7  A900              04809 	LDA #0
58D9  8557              04810 	STA CVB_TICK_NOTE
58DB                    04811 	; 		song_note = song_note + 1.
58DB  A55D              04812 	LDA CVB_SONG_NOTE
58DD  18                04813 	CLC
58DE  6901              04814 	ADC #1
58E0  855D              04815 	STA CVB_SONG_NOTE
58E2                    04816 	; 		IF song_note = 48. THEN song_note = 0.
58E2  A55D              04817 	LDA CVB_SONG_NOTE
58E4  C930              04818 	CMP #48
58E6  F003              04819 	BEQ CV125
58E8  4CEF58            04820 	JMP CV124
58EB                    04821 CV125:
58EB  A900              04822 	LDA #0
58ED  855D              04823 	STA CVB_SONG_NOTE
58EF                    04824 CV124:
58EF                    04825 	; 		note = song_notes(song_note)
58EF  A55D              04826 	LDA CVB_SONG_NOTE
58F1  A000              04827 	LDY #0
58F3  18                04828 	CLC
58F4  6969              04829 	ADC #CVB_SONG_NOTES
58F6  48                04830 	PHA
58F7  98                04831 	TYA
58F8  6959              04832 	ADC #CVB_SONG_NOTES>>8
58FA  A8                04833 	TAY
58FB  68                04834 	PLA
58FC  20BF42            04835 	JSR _PEEK8
58FF  8569              04836 	STA CVB_NOTE
5901                    04837 	; 		SOUND 0, #note_freq(note - 1)
5901  A569              04838 	LDA CVB_NOTE
5903  A000              04839 	LDY #0
5905  38                04840 	SEC
5906  E901              04841 	SBC #1
5908  48                04842 	PHA
5909  98                04843 	TYA
590A  E900              04844 	SBC #0
590C  A8                04845 	TAY
590D  68                04846 	PLA
590E  8402              04847 	STY TEMP
5910  0A                04848 	ASL A
5911  2602              04849 	ROL TEMP
5913  A402              04850 	LDY TEMP
5915  18                04851 	CLC
5916  6999              04852 	ADC #CVB_#NOTE_FREQ
5918  48                04853 	PHA
5919  98                04854 	TYA
591A  6959              04855 	ADC #CVB_#NOTE_FREQ>>8
591C  A8                04856 	TAY
591D  68                04857 	PLA
591E  20C842            04858 	JSR _PEEK16
5921  A280              04859 	LDX #$80
5923  204144            04860 	JSR SN76489_FREQ
5926                    04861 	; 	END IF
5926                    04862 CV122:
5926                    04863 	; 	SOUND 0, , volume_effect(tick_note)
5926  A557              04864 	LDA CVB_TICK_NOTE
5928  A000              04865 	LDY #0
592A  18                04866 	CLC
592B  6959              04867 	ADC #CVB_VOLUME_EFFECT
592D  48                04868 	PHA
592E  98                04869 	TYA
592F  6959              04870 	ADC #CVB_VOLUME_EFFECT>>8
5931  A8                04871 	TAY
5932  68                04872 	PLA
5933  20BF42            04873 	JSR _PEEK8
5936  A290              04874 	LDX #$90
5938  206144            04875 	JSR SN76489_VOL
593B                    04876 	; 	END
593B  60                04877 	RTS
593C                    04878 	; 
593C                    04879 	; sound_off:	PROCEDURE
593C                    04880 CVB_SOUND_OFF:
593C                    04881 	; 	SOUND 0,,0
593C  A900              04882 	LDA #0
593E  A290              04883 	LDX #$90
5940  206144            04884 	JSR SN76489_VOL
5943                    04885 	; 	SOUND 1,,0
5943  A900              04886 	LDA #0
5945  A2B0              04887 	LDX #$B0
5947  206144            04888 	JSR SN76489_VOL
594A                    04889 	; 	SOUND 2,,0
594A  A900              04890 	LDA #0
594C  A2D0              04891 	LDX #$D0
594E  206144            04892 	JSR SN76489_VOL
5951                    04893 	; 	SOUND 3,,0
5951  A900              04894 	LDA #0
5953  A2F0              04895 	LDX #$F0
5955  206144            04896 	JSR SN76489_VOL
5958                    04897 	; 	END
5958  60                04898 	RTS
5959                    04899 	; 
5959                    04900 	; volume_effect:
5959                    04901 CVB_VOLUME_EFFECT:
5959                    04902 	; 	DATA BYTE 11,12,13,12,12,11,11,10
5959  0B0C0D0C0C0B0B0A  04903 	DB $0B,$0C,$0D,$0C,$0C,$0B,$0B,$0A
5961                    04904 	; 	DATA BYTE 10,9,9,10,10,9,9,8
5961  0A09090A0A090908  04905 	DB $0A,$09,$09,$0A,$0A,$09,$09,$08
5969                    04906 	; 
5969                    04907 	; song_notes:
5969                    04908 CVB_SONG_NOTES:
5969                    04909 	; 	DATA BYTE 1,2,3,4,5,4,3,2
5969  0102030405040302  04910 	DB $01,$02,$03,$04,$05,$04,$03,$02
5971                    04911 	; 	DATA BYTE 1,2,3,4,5,4,3,2
5971  0102030405040302  04912 	DB $01,$02,$03,$04,$05,$04,$03,$02
5979                    04913 	; 	DATA BYTE 6,4,7,8,9,8,7,4
5979  0604070809080704  04914 	DB $06,$04,$07,$08,$09,$08,$07,$04
5981                    04915 	; 	DATA BYTE 6,4,7,8,9,8,7,4
5981  0604070809080704  04916 	DB $06,$04,$07,$08,$09,$08,$07,$04
5989                    04917 	; 	DATA BYTE 3,12,8,10,11,10,8,12
5989  030C080A0B0A080C  04918 	DB $03,$0C,$08,$0A,$0B,$0A,$08,$0C
5991                    04919 	; 	DATA BYTE 6,4,7,8,9,8,7,4
5991  0604070809080704  04920 	DB $06,$04,$07,$08,$09,$08,$07,$04
5999                    04921 	; 
5999                    04922 	; #note_freq:
5999                    04923 CVB_#NOTE_FREQ:
5999                    04924 	; 	DATA $01AC
5999  AC01              04925 	DW $01AC
599B                    04926 	; 	DATA $0153
599B  5301              04927 	DW $0153
599D                    04928 	; 	DATA $011D
599D  1D01              04929 	DW $011D
599F                    04930 	; 	DATA $00FE
599F  FE00              04931 	DW $00FE
59A1                    04932 	; 	DATA $00F0
59A1  F000              04933 	DW $00F0
59A3                    04934 	; 	DATA $0140
59A3  4001              04935 	DW $0140
59A5                    04936 	; 	DATA $00D6
59A5  D600              04937 	DW $00D6
59A7                    04938 	; 	DATA $00BE
59A7  BE00              04939 	DW $00BE
59A9                    04940 	; 	DATA $00B4
59A9  B400              04941 	DW $00B4
59AB                    04942 	; 	DATA $00AA
59AB  AA00              04943 	DW $00AA
59AD                    04944 	; 	DATA $00A0
59AD  A000              04945 	DW $00A0
59AF                    04946 	; 	DATA $00E2
59AF  E200              04947 	DW $00E2
59B1                    04948 ROM_END:
59B1  FFFFFFFFFFFFFFFF  04949 	TIMES $BFE8-$ DB $FF
BFE8                    04950 
BFE8  F249              04951 	DW START
BFEA  0000              04952 	DW 0		; IRQ2 handler.
BFEC                    04953 
BFEC  0000              04954 	DW 0
BFEE  0000              04955 	DW 0
BFF0                    04956 
BFF0                    04957 	; Initial VDP registers
BFF0  02                04958 	DB $02
BFF1  82                04959 	DB $82
BFF2  06                04960 	DB $06
BFF3  FF                04961 	DB $FF
BFF4  00                04962 	DB $00
BFF5  36                04963 	DB $36
BFF6  07                04964 	DB $07
BFF7  01                04965 	DB $01
BFF8                    04966 
BFF8  0000              04967 	DW 0
BFFA  0000              04968 	DW 0
BFFC  08F8              04969 	DW BIOS_NMI_RESET_ADDR	; Handler for reset.
BFFE  D845              04970 	DW INT_HANDLER	; IRQ1 handler.

00000 ERRORS FOUND
00000 WARNINGS FOUND

65536 PROGRAM BYTES

LABEL                VALUE/ADDRESS

BASE_RAM             0050
BIOS_NMI_RESET_ADDR  f808
BIOS_READ_CONTROLLERS fa00
BIOS_WRITE_PSG       fe77
CLS                  4107
COLECO               0000
CONVERT_JOYSTICK     4698
CONVERT_JOYSTICK.1   46b4
CONVERT_JOYSTICK.2   46af
CPM                  0000
CPYBLK               40b9
CPYBLK.1             40ba
CURSOR               000c
CV1                  4a78
CV10                 4c98
CV100                5520
CV101                5548
CV102                5531
CV103                5545
CV104                5541
CV105                555c
CV106                555c
CV107                5558
CV108                559f
CV109                5588
CV11                 4b9a
CV110                559c
CV111                5598
CV112                55b3
CV113                55b3
CV114                55af
CV115                55f6
CV116                55df
CV117                55f3
CV118                55ef
CV119                560a
CV12                 4c98
CV120                560a
CV121                5606
CV122                5926
CV123                58d7
CV124                58ef
CV125                58eb
CV13                 4ba3
CV14                 4baf
CV15                 4bc0
CV16                 4bcc
CV17                 4bd3
CV18                 4c1b
CV19                 4c95
CV2                  4a7f
CV20                 4c2b
CV21                 4c42
CV22                 4c4c
CV23                 4c54
CV25                 4c8e
CV26                 4c8b
CV27                 4d1b
CV28                 4cd8
CV29                 4d1b
CV3                  4a9a
CV30                 4d18
CV31                 4d9e
CV32                 4d5b
CV33                 4d9e
CV34                 4d9b
CV35                 4e21
CV36                 4dde
CV37                 4e21
CV38                 4e1e
CV39                 4e5f
CV4                  4aa8
CV40                 4e95
CV41                 4e98
CV43                 4ef5
CV44                 4ef2
CV45                 4f65
CV46                 4f01
CV47                 4f15
CV48                 4f20
CV49                 4f28
CV5                  4af4
CV51                 4f62
CV52                 4f5f
CV53                 4f83
CV54                 501f
CV55                 5027
CV56                 502f
CV57                 507d
CV58                 50ab
CV59                 50d0
CV6                  4e24
CV60                 50d4
CV61                 520a
CV62                 5238
CV63                 52b1
CV64                 5256
CV65                 52b1
CV66                 5285
CV67                 5295
CV68                 528e
CV69                 52ad
CV7                  4b7b
CV70                 52a6
CV71                 52b1
CV72                 5315
CV73                 52ba
CV74                 5315
CV75                 52e9
CV76                 52f9
CV77                 52f2
CV78                 5311
CV79                 530a
CV8                  4b91
CV80                 5315
CV81                 541e
CV82                 531e
CV83                 53fb
CV84                 534d
CV85                 53f8
CV86                 53f1
CV87                 541e
CV88                 5413
CV89                 540c
CV9                  4b84
CV90                 5417
CV91                 5527
CV92                 5427
CV93                 5504
CV94                 5456
CV95                 5501
CV96                 54fa
CV97                 5527
CV98                 551c
CV99                 5515
CVBASIC_BANK_SWITCHING 0000
CVBASIC_COMPRESSION  0000
CVBASIC_MUSIC_PLAYER 0000
CVB_#C               005f
CVB_#D               0061
CVB_#NOTE_FREQ       5999
CVB_BASE_CHARACTER   0063
CVB_C                0053
CVB_COLUMN           005b
CVB_D                0054
CVB_DRAW_LEVEL       4f6f
CVB_E                0055
CVB_ENEMY1_FRAME     005a
CVB_ENEMY2_FRAME     005e
CVB_ENEMY3_FRAME     0065
CVB_ENEMY_SPEED      005c
CVB_GAME_BITMAPS     562e
CVB_GAME_COLORS      56d6
CVB_GAME_LOOP        4af4
CVB_GAME_SPRITES     577e
CVB_LADDERS          006a
CVB_LEVEL            0059
CVB_LIVES            0058
CVB_MOVE_ENEMIES     5528
CVB_MOVE_PLAYER      524d
CVB_NEXT_LEVEL       4aa8
CVB_NOTE             0069
CVB_PLAYER_DIES      4e24
CVB_PLAYER_FRAME     0056
CVB_PLAY_SONG        58c7
CVB_RESTART_GAME     4a5c
CVB_RESTART_LEVEL    4a64
CVB_ROW              006b
CVB_SONG_NOTE        005d
CVB_SONG_NOTES       5969
CVB_SOUND_OFF        593c
CVB_START_SONG       58be
CVB_TICK_NOTE        0057
CVB_VOLUME_EFFECT    5959
CVB_X_ENEMY1         0066
CVB_X_ENEMY2         0067
CVB_X_ENEMY3         0068
CVB_X_PLAYER         0064
CVB_Y_ENEMY1         0050
CVB_Y_ENEMY2         0051
CVB_Y_ENEMY3         0052
CVB_Y_PLAYER         006c
DEFINE_CHAR          4207
DEFINE_CHAR.1        4235
DEFINE_COLOR         423a
DEFINE_SPRITE        41d5
DISSCR               40a5
EINSTEIN             0000
ENASCR               40af
FILVRM               403c
FILVRM.1             4049
FLICKER              0029
FONT_BITMAPS         46f2
FRAME                0024
INT_HANDLER          45d8
INT_HANDLER.4        45ff
INT_HANDLER.5        463f
INT_HANDLER.6        460b
INT_HANDLER.7        45ef
INT_HANDLER.8        465c
JOY1_BUTTONS         0016
JOY1_DATA            0020
JOY1_DIR             0011
JOY2_BUTTONS         0017
JOY2_DATA            0021
JOY2_DIR             0013
JOYSTICK_TABLE       46b6
KEY1_DATA            0022
KEY2_DATA            0023
LDIRVM               4059
LDIRVM.1             4066
LDIRVM.2             4068
LDIRVM.3             4073
LDIRVM3              407c
LDIRVM3.1            4082
LFSR                 0026
MEMOTECH             0000
MODE                 0028
MODE_0               44a8
MODE_1               451a
MODE_1.1             4560
MODE_1.2             456c
MODE_2               458c
MSX                  0000
MUSIC_INIT           46dd
NTSC                 002e
PENCIL               0000
PLETTER_BIT          002f
PLETTER_OFF          000e
POINTER              0008
PRINT_DIGIT          418d
PRINT_DIGIT.1        41d1
PRINT_DIGIT.2        418f
PRINT_DIGIT.3        41b6
PRINT_DIGIT.4        41ad
PRINT_DIGIT.5        41bc
PRINT_DIGIT.6        41b4
PRINT_NUMBER         414d
PRINT_NUMBER1        417e
PRINT_NUMBER2        4173
PRINT_NUMBER3        4168
PRINT_NUMBER4        415d
PRINT_NUMBER5        4152
PRINT_STRING         4125
PRINT_STRING.1       414c
PSG                  0000
PV2000               0000
RAM_END              4a1d
RANDOM               4412
RANDOM.0             4420
RDVRM                402a
READ_POINTER         000a
RESULT               0006
ROM_END              59b1
SETRD                4014
SETWRT               400a
SG1000               0000
SGM                  0000
SN76489_CONTROL      446c
SN76489_FREQ         4441
SN76489_VOL          4461
SORD                 0000
SPRITES              0180
SPRITE_DATA          002a
STACK                017f
START                49f2
SVI                  0000
TEMP                 0002
TEMP2                0004
UPDATE_SPRITE        4264
VDP                  0000
VDPR                 0000
VDP_GENERIC_MODE     4473
VDP_GENERIC_SPRITES  44f1
VDP_GENERIC_SPRITES.1 450b
WAIT                 46d6
WAIT.1               46d8
WRTVDP               4000
WRTVRM               401e
_ABS16               4284
_DIV16               4382
_DIV16.1             4394
_DIV16.2             439c
_DIV16.3             43c0
_DIV16S              4347
_DIV16S.1            436b
_DIV16S.2            4378
_DIV16S.3            4381
_MOD16               43cc
_MOD16.1             43de
_MOD16.2             43e6
_MOD16.3             440a
_MOD16S              4310
_MOD16S.1            4330
_MOD16S.2            433d
_MOD16S.3            4346
_MUL16               42d7
_MUL16.1             42f1
_MUL16.2             4304
_NEG16               4289
_NEG16.1             4295
_PEEK16              42c8
_PEEK8               42bf
_READ16              42aa
_READ8               42b4
_READ8.1             42be
_SGN16               4297
_SGN16.1             42a8
_SGN16.2             42a6
